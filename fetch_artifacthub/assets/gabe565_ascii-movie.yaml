---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-ascii-movie-ssh
  labels:
    app.kubernetes.io/instance: my-ascii-movie
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.5
    helm.sh/chart: ascii-movie-0.16.3
stringData:
  ssh_host_ed25519_key: |
    -----BEGIN PRIVATE KEY-----
    MC4CAQAwBQYDK2VwBCIEIMNcwTQoM5sAVk/3icmbjSp9EkHESUpo+NlNvTxubWGG
    -----END PRIVATE KEY-----
  ssh_host_rsa_key: |
    -----BEGIN RSA PRIVATE KEY-----
    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
    -----END RSA PRIVATE KEY-----
---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-ascii-movie-api
  labels:
    app.kubernetes.io/service: my-ascii-movie-api
    app.kubernetes.io/instance: my-ascii-movie
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.5
    helm.sh/chart: ascii-movie-0.16.3
  annotations:
spec:
  type: ClusterIP
  ports:
    - port: 1977
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/instance: my-ascii-movie
    app.kubernetes.io/name: ascii-movie
---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-ascii-movie
  labels:
    app.kubernetes.io/service: my-ascii-movie
    app.kubernetes.io/instance: my-ascii-movie
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.5
    helm.sh/chart: ascii-movie-0.16.3
  annotations:
spec:
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
    - port: 22
      targetPort: ssh
      protocol: TCP
      name: ssh
    - port: 23
      targetPort: telnet
      protocol: TCP
      name: telnet
  selector:
    app.kubernetes.io/instance: my-ascii-movie
    app.kubernetes.io/name: ascii-movie
---
# Source: ascii-movie/templates/common.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-ascii-movie
  labels:
    app.kubernetes.io/instance: my-ascii-movie
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.5
    helm.sh/chart: ascii-movie-0.16.3
spec:
  revisionHistoryLimit: 3
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: ascii-movie
      app.kubernetes.io/instance: my-ascii-movie
  template:
    metadata:
      annotations:
        
        checksum/secrets: c0946295e4094e120cd116e1a04138ea8780410474d7f3095268584661c55e0a
      labels:
        app.kubernetes.io/name: ascii-movie
        app.kubernetes.io/instance: my-ascii-movie
    spec:
      
      serviceAccountName: default
      automountServiceAccountToken: true
      securityContext:
        runAsNonRoot: true
      dnsPolicy: ClusterFirst
      enableServiceLinks: true
      containers:
        - name: my-ascii-movie
          image: ghcr.io/gabe565/ascii-movie:1.9.5
          imagePullPolicy: Always
          securityContext:
            readOnlyRootFilesystem: true
          env:
            - name: ASCII_MOVIE_API_ADDRESS
              value: :1977
            - name: ASCII_MOVIE_CONCURRENT_STREAMS
              value: "10"
            - name: ASCII_MOVIE_SSH_ADDRESS
              value: :22
            - name: ASCII_MOVIE_SSH_ENABLED
              value: "true"
            - name: ASCII_MOVIE_SSH_HOST_KEY
              value: /etc/ssh/ssh_host_rsa_key,/etc/ssh/ssh_host_ed25519_key
            - name: ASCII_MOVIE_TELNET_ADDRESS
              value: :23
            - name: ASCII_MOVIE_TELNET_ENABLED
              value: "true"
          ports:
            - name: http
              containerPort: 1977
              protocol: TCP
            - name: ssh
              containerPort: 22
              protocol: TCP
            - name: telnet
              containerPort: 23
              protocol: TCP
          volumeMounts:
            - name: ssh
              mountPath: /etc/ssh
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 1
          startupProbe:
            failureThreshold: 30
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 5
            timeoutSeconds: 1
      volumes:
        - name: ssh
          secret:
            secretName: my-ascii-movie-ssh
