---
# Source: apk-helm/charts/cert-manager/templates/cainjector-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: my-apk-helm-cert-manager-cainjector
  namespace: default
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
---
# Source: apk-helm/charts/cert-manager/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: my-apk-helm-cert-manager
  namespace: default
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
---
# Source: apk-helm/charts/cert-manager/templates/webhook-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: my-apk-helm-cert-manager-webhook
  namespace: default
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
---
# Source: apk-helm/charts/redis/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: redis
  namespace: "default"
  labels:
    app.kubernetes.io/name: redis
    helm.sh/chart: redis-17.8.0
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: gateway-api-admission
  labels:
    name: gateway-api-webhook
  namespace: default
---
# Source: apk-helm/templates/serviceAccount/apk-service-account.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: ServiceAccount
metadata:
  name: wso2apk-platform
  namespace: default
---
# Source: apk-helm/charts/postgresql/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: wso2apk-db-service
  namespace: "default"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-11.9.6
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
type: Opaque
data:
  postgres-password: "d3NvMmNhcmJvbg=="
  password: "d3NvMmNhcmJvbg=="
  # We don't auto-generate LDAP password when it's not provided as we do for other passwords
---
# Source: apk-helm/templates/cert-manager/issuers/apk-root-certificate-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: apk-root-certificate
  namespace: default
type: kubernetes.io/tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvVENDQWVXZ0F3SUJBZ0lVZDRuanY4eVNQZ283dDBGMWUyYUpFbzlUcFE0d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0RqRU1NQW9HQTFVRUF3d0RZWEJyTUI0WERUSXpNRE13T1RBNE1UWXpORm9YRFRNek1ETXdOakE0TVRZegpORm93RGpFTU1Bb0dBMVVFQXd3RFlYQnJNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDCkFRRUExRzlCQWNWYTNhTWVteEVSWStKOFVtSC9XOEpwY0VPdGRlTlg1WU5paG5OT1h0bHZoU3pGek9QYUs5N1AKcjRJcUdBU2JWTmlSKzFKNldFb2kvYjZaSlR4MHEzWVVuMFlsUUpyejdnMjBUZG9HSmp4R1ZXem4wRVc0YmVIWApHcTYwdlhMZjR0M21sTENMR0lLM2tKVFdBb1J6ZDc0ZGpWNys1djBCbS82S0JCQVdjdTVVYk9EOUtScE9zeEdNCm4zWjAxMDNvQUdWaXlxODRRdEZ2aFhWTld0dERMZTJqVS83bzQyZGRhSm96Ukw5eisxQWVwZG9XUHlKWklacVUKYlhjR0FrN2lkazdjLzhkS014d0FtM0NWL1d2Z1dyVks1UitZVGlHcVJmNXBkOVdXQ3lkRVZRa05xQ1pnVFBOeQpCVFJ2SG81Mm9uUG5UNkFMdE1JMG1uV0x0UUlEQVFBQm8xTXdVVEFkQmdOVkhRNEVGZ1FVenhjQThjZUNGNXQrCnZQZU9wWWJpMTFDV2p3Y3dId1lEVlIwakJCZ3dGb0FVenhjQThjZUNGNXQrdlBlT3BZYmkxMUNXandjd0R3WUQKVlIwVEFRSC9CQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFGQ0tkNXg4ejY0cDFqOUJub1NBbApKSnVOejR1V2p2L1lLOTRCM3MzS1VrWE9Yakh1THVhemtTc3MyVUhGYitLZUxkNnZoaW1NNVFxa0ZzVUVNc25DCjhSeUJaUDU4a2doY0x6SmxkNVVpd2xuci9SdU9BTnZjdjRlS1Nhdnd1NS9BQlh1TVVRYi9Hdkt0V1BycjJWYkoKVUxnM3A3TkdpZ1hISGc4NGVWTUE3b05YMVo1UjJjUzRJU2tsV1htNVNwTVBoK1NOQ2dxd3FoeFJOWUoySjBFWgpxbHA0b2ZRRzNHSjcySitEUkhsTnVqV0Vza1A1SUpqdzZ3OFEwempYeDI2eWVsR2UyK1RNNkJCN1BwQ042a05VCnpIbzJrLzU3NWJ1MmlaenRuWVZtRTc0SDFXM2NYSjdjMHE4MnVVRnZkVytGbFJ0bStPUElpSUdLNzRsRmlaTkIKT1E9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRRFViMEVCeFZyZG94NmIKRVJGajRueFNZZjlid21sd1E2MTE0MWZsZzJLR2MwNWUyVytGTE1YTTQ5b3Izcyt2Z2lvWUJKdFUySkg3VW5wWQpTaUw5dnBrbFBIU3JkaFNmUmlWQW12UHVEYlJOMmdZbVBFWlZiT2ZRUmJodDRkY2FyclM5Y3QvaTNlYVVzSXNZCmdyZVFsTllDaEhOM3ZoMk5YdjdtL1FHYi9vb0VFQlp5N2xSczRQMHBHazZ6RVl5ZmRuVFhUZWdBWldMS3J6aEMKMFcrRmRVMWEyME10N2FOVC91ampaMTFvbWpORXYzUDdVQjZsMmhZL0lsa2htcFJ0ZHdZQ1R1SjJUdHoveDBvegpIQUNiY0pYOWErQmF0VXJsSDVoT0lhcEYvbWwzMVpZTEowUlZDUTJvSm1CTTgzSUZORzhlam5haWMrZFBvQXUwCndqU2FkWXUxQWdNQkFBRUNnZ0VBQ1VMRVdiaHB5cW0yeHRuS29Va1pWRm9UVU1PNzV2bjhVTnhWVTVzVHEzclIKV3M4dHptZHlSQWxXMUh6Rkh3aVVuekZzT0JtczI0RHY5bk5jN1NUbTlqbVplSFFRV0JVdHdKQkF2QXI2NWozdgo4TERGL0NsZ1BiTWNaQ1hwUTYrRUQ1STNjbU5zRHVWWFd2MHYxV3kzbTZwOGdpYldrUGdvTXBlcS8wcnNaMXJiCjB6TDhuNkpENUtxc3JjWE5WODNObTZqUmxUMzJZWGZreHpwczhpME1PZGYyLzllQmVrMC93N2xBTU0wNFQ3dXMKNWRHeVRFNHo3eThYVndscmF6WFlMM2VUL3RDOHY4M3BrWXNlOWdBZ2I4Z3MrRmlhTUc3WG1sMmpmY05YV1I0ZwpHRmRSMmRJVlNQbnJwdldLajNrS0IwVXFsVVplakp2WkhhQlk2cStDd1FLQmdRRGRKbFB3MUFONjhncVVMdjB2CmltMWNyVTJneS9kbzZpWjl0Y05MdjgxblMzS1JtRVllKzBTYzZZR3dNQWtPWjd0S1BTMnNsRU9IUDUzQjVseU8KakttSlhkQXBvZVUzSW5lOW5kRGs3TEoxNVpsTkFzNXlWb1pjdzdINHp2YTIwM0c2UDFnZWpja2RpOWVicDFnVAorUVpNSmZjdHJtaExDaDhQR1ZzZDRPaFFNUUtCZ1FEMTZWYVRDQ243MElESFNnLzJia1M3NjJzK2dmcHJpK3hCCjE4UmhMOVowL1RQQVl2dUpqNWNUaHh6S2hGWG53ZDRHVGZ4eFdnaURsV3lIb1BjRDhLT2JLM1htT1ZUUEg2WDcKNjdNdTc4bWxLZlVZY3VrM244ekFmc1FkQzBBNmNRRVlhcVFIMW4wSjZVM255RnNwL0hJWis1NjhQQmQwT0dMUQprWmdrc3oyMnhRS0JnR01uZEN0ZVk5RVVCTG83OXprQmo5Y2x2TkNEb3dKZk9iTFRkQ1RhY25ZRjFmQ0JuYTcyCmFlVVFyUjBaN0hXUS9PQmtYYjRyRzd2Z1FoTlYvZG5NSjVkM2dJV3FHT09IaUxoenNkMXlZdkdKYUJxblQzamsKWW9ubEZEN0NUTXZjTWZtWHZTSzEzNTVudk53RlEvQndqdXBGZTNYMzVMc0FacnlXV2N3anN3V0JBb0dBYTNidApQcFB5eFBqNVRoNHZtNkhVcDhyWnN4ZGFPR1dOZWJpeE9VZU9rTkdXTEIwVmo2Z1FmWmd1SE5KNE9DK2d0MkNkClVXdm5ESm5nTStWRURaUzc2ck96Y2tqYnB5aE5nU29meEFOR084ZDZOSlVERml2ZmJyLzNORG9XZDNPcTV1Q3oKampsTnEyY3BoSUVxVmM3Y2pqNUh3RHNDaE9lZlIwWlpGckM5NTRFQ2dZRUFwZHloY1FiL1o0WXJ5bHJmelJycAovR0RjdVg5TlQxWDdtT2tCamExVXUvSTV6ZFVMYzkrNjZUc3IyTEhiVUdtUkhnTGx4NHo1U1dIeVJiTnhOUENwCkN1Q0svdkh6TlN6YlZVeDRUSzBYZHJHOWI5SHRXcU4yU0pERk9tSXBVYUJPd25SYThxa3hwSTF3YWRsT2ZYejUKUFdIQ3RJcWRkdlRkeG50TnpxekRnVzg9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
---
# Source: apk-helm/templates/data-plane/gateway-components/adapter/adapter-truststore-consul-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-apk-helm-wso2-apk-adapter-truststore-consul-secret
  namespace: default
type: Opaque
data:
  consul-agent-ca.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM3VENDQXBPZ0F3SUJBZ0lRVEpTb1l5NmMxdHd1VDQrc3FiM3BHREFLQmdncWhrak9QUVFEQWpDQnVURUwKTUFrR0ExVUVCaE1DVlZNeEN6QUpCZ05WQkFnVEFrTkJNUll3RkFZRFZRUUhFdzFUWVc0Z1JuSmhibU5wYzJOdgpNUm93R0FZRFZRUUpFeEV4TURFZ1UyVmpiMjVrSUZOMGNtVmxkREVPTUF3R0ExVUVFUk1GT1RReE1EVXhGekFWCkJnTlZCQW9URGtoaGMyaHBRMjl5Y0NCSmJtTXVNVUF3UGdZRFZRUURFemREYjI1emRXd2dRV2RsYm5RZ1EwRWcKTVRBeE56a3pNakF5T1RFM05UUTBNVGd3TnpVd01qQXlNekkwTXprd05URTRPRFF6TmpjeU1CNFhEVEl4TURFdwpOakF4TlRVeU5Wb1hEVEkyTURFd05UQXhOVFV5TlZvd2dia3hDekFKQmdOVkJBWVRBbFZUTVFzd0NRWURWUVFJCkV3SkRRVEVXTUJRR0ExVUVCeE1OVTJGdUlFWnlZVzVqYVhOamJ6RWFNQmdHQTFVRUNSTVJNVEF4SUZObFkyOXUKWkNCVGRISmxaWFF4RGpBTUJnTlZCQkVUQlRrME1UQTFNUmN3RlFZRFZRUUtFdzVJWVhOb2FVTnZjbkFnU1c1agpMakZBTUQ0R0ExVUVBeE0zUTI5dWMzVnNJRUZuWlc1MElFTkJJREV3TVRjNU16SXdNamt4TnpVME5ERTRNRGMxCk1ESXdNak15TkRNNU1EVXhPRGcwTXpZM01qQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJKSHkKRGhCSE1RMTRVQjJmbGhVZk1jZUMyZm5taE5RNnl1K0JDQTE0WEdhQTRkdnVMNXFhNUtWQjFuNG85cVl2VDZvYwp5cVgxMW9HdFZFemRTaFNTMzBXamV6QjVNQTRHQTFVZER3RUIvd1FFQXdJQmhqQVBCZ05WSFJNQkFmOEVCVEFECkFRSC9NQ2tHQTFVZERnUWlCQ0MvNmtTamhFd0h2T05UVk5MSGxYU05nUlRZcFBhWENST2VMamdRMDBsQmFUQXIKQmdOVkhTTUVKREFpZ0NDLzZrU2poRXdIdk9OVFZOTEhsWFNOZ1JUWXBQYVhDUk9lTGpnUTAwbEJhVEFLQmdncQpoa2pPUFFRREFnTklBREJGQWlFQXRZaEx6ZjdLMDB6NWJ1d0NvdlBlM2d3S2JRekp6anZMZy94d2ZVQXVrZGdDCklIVXZEcnZNZEFNcGRFZVhmSnIwSDFDc1NVdDJ1d0o2TFFyMXhEbW1QZjdlCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  local-dc-client-consul-0-key.pem: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSVBCTzBYM2tGUXhqWDFRUE81OE96TFBWRzR0bzR0QkhOb3JTMlNXaUx5TjFvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFY0dJdlc0cmU2b0syNTdkVFdqNS85WDRrK0NhN3lMSE9LZ2hRVWN6NVhuRnBXRExlVDBxZgo0RW9wNkhMZ2FEcHZXUEluT3JXc29YQ1hORkFReTJTOVpRPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  local-dc-client-consul-0.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNwakNDQWt5Z0F3SUJBZ0lRSXpsNEZ5YnZZNk5OOTQ1SU5nTFlyVEFLQmdncWhrak9QUVFEQWpDQnVURUwKTUFrR0ExVUVCaE1DVlZNeEN6QUpCZ05WQkFnVEFrTkJNUll3RkFZRFZRUUhFdzFUWVc0Z1JuSmhibU5wYzJOdgpNUm93R0FZRFZRUUpFeEV4TURFZ1UyVmpiMjVrSUZOMGNtVmxkREVPTUF3R0ExVUVFUk1GT1RReE1EVXhGekFWCkJnTlZCQW9URGtoaGMyaHBRMjl5Y0NCSmJtTXVNVUF3UGdZRFZRUURFemREYjI1emRXd2dRV2RsYm5RZ1EwRWcKTVRBeE56a3pNakF5T1RFM05UUTBNVGd3TnpVd01qQXlNekkwTXprd05URTRPRFF6TmpjeU1CNFhEVEl4TURFdwpOakE1TkRFeU4xb1hEVEl5TURFd05qQTVOREV5TjFvd0lURWZNQjBHQTFVRUF4TVdZMnhwWlc1MExteHZZMkZzCkxXUmpMbU52Ym5OMWJEQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJIQmlMMXVLM3VxQ3R1ZTMKVTFvK2YvVitKUGdtdThpeHppb0lVRkhNK1Y1eGFWZ3kzazlLbitCS0tlaHk0R2c2YjFqeUp6cTFyS0Z3bHpSUQpFTXRrdldXamdjd3dnY2t3RGdZRFZSMFBBUUgvQkFRREFnV2dNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01DCkJnZ3JCZ0VGQlFjREFUQU1CZ05WSFJNQkFmOEVBakFBTUNrR0ExVWREZ1FpQkNDSDVrbVlJOXFsYVJIYWN0VkMKWFZTcE1nS0cwSFBRd1Y2cml4VDJrT3BnWHpBckJnTlZIU01FSkRBaWdDQy82a1NqaEV3SHZPTlRWTkxIbFhTTgpnUlRZcFBhWENST2VMamdRMDBsQmFUQXlCZ05WSFJFRUt6QXBnaFpqYkdsbGJuUXViRzlqWVd3dFpHTXVZMjl1CmMzVnNnZ2xzYjJOaGJHaHZjM1NIQkg4QUFBRXdDZ1lJS29aSXpqMEVBd0lEU0FBd1JRSWhBTGdJMUFlNm9tQy8KWWE4S3ZBdlVNOEhWRS9pQkIzZlhuTk00VUpaWXhGZzFBaUJDT1lwZ0RhMjNWVVQ4eDlWSlZ1Q21DWjAydUV6QwpsdU5BdDRCV2x2QURIQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/common-controller-sts-shared-auth-key.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
data:
  auth_key.txt: MmpybXlwYWszOTF6c3F6OTc0dWdkZGRlYmY4MTJvZngxYjl0MW9xMjc1MzBpcjAydGM4MTVlZW1yeDQzNXF2Y3A0MXVjZ3k3djV1dWF3emk0cWNtanJ4MGsxemdveDJzMjhjcg==
kind: Secret
metadata:
  name: my-apk-helm-wso2-apk-sts-shared-auth-key
  namespace: default
type: Opaque
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/enforcer-keystore-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-apk-helm-wso2-apk-enforcer-keystore-secret
  namespace: default
type: Opaque
data:
  mg.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRRGZXUkE5cUVRcHZYSDkKYnhCTDBkU2YwOEMycENYRDhrcno5am1ibk1XMVR3c2w2SjhwWFNpSmhJU2VpMzdqSzdzZWFLUVhseGN5SG9YUApDQ0kyUHlWTmhwWW9aNjVUeEpUQTBOa0xuTTJZME9wMm9wR0U1S2piRFRUQmZscjRyZXlCMUdITTkrcVNHL3BpClp2c1gwcDVVMldEK3RKSlhKUXZzZW9vVnVTRDV3Nmk0eWtMZmRWMTFBUlJ0dzFmcGJvVGtyQUs1dzZWWU5KTVkKSThIUHhTeU5iSW5BWVdFdFdNem1ETUR0MTE4WFdFOWtpQ3JtZHhhdGpVaDNkeHhOSTNCMG1oNXFYTll6ZU9KRAp1RGhHNWNQSE5rUWpwbFJRczJyK3h6d0ZLTVppQUFOZzdEQk43L01LUjNPdnlCSHhVbEZPNTBESlZHamQ3Z0NWCk1XUUZZY25QQWdNQkFBRUNnZ0VBTGZXMzM5ZzJYcGg3VW5sK1V2dlUweWJSNjBPUCtlaHNBQlBVK3U2aHlKT0IKYWNXYXF2cGVreDNQNUlnMERpODdqQ0JnVS9KbGRZek9ZREgrU0VkcU42L1FTblE3YlVWd2p0VHJOUGFKWUQ3dApZSWhIaFo5QUdBTjVyYStBck5ldGFYSDR4aUxtQkRiNXFUSWp6VjByODYzZnhjb0dxeVFXZGcwcFNSc1ZiQSt5Cng0Q0NuV0JsMkoxYWRWMXhRSXljTGU5Rk5ubTVvUm9Na2hrNjRuN2crY2REbVQ3UjNJOG1RNHhxaXVNaGpaZEoKQmplWEc1ZGExVjlRNEN4YTJ0QU9PZXhNNVJZYnVPd3dsaDVPc2c2eXZtaFNrZkZVbUhEVUplbEN2dVFaSm5hbApkaGxJbzNoL3R5RlN4NG05L2tCRG5ZcnB5RXdiQ2k4c3QyTGJ6cFd1MFFLQmdRRHg5NXNjL1N0NHFPczNsNyt3ClFGelpFUFhMSDhNZU0wWk96VmpIZ0k1YzVDbDZaR0tVR0ViWmpxd3E5YnlZZGp6SkJ2QmNXNS81TmMrMk5Oam4KRkQ0dDRCVE5wYVlVTWRPMHVSdy84R0VGYXFNVzRoT3pOUE1TaEM2RDc4NEU2eXhrZTdTaEJQZE5wZjErN2tSNgpuTzhrWFBIV1JNTEt1U1NQeVdGVVFTeEduUUtCZ1FEc1RRWWE4N3ZFTkNuWm1HWUM1Q1ZKRWFURTg0R2xXVlExCnRlOUt1YUtraFNjRDljam9Sdm1zMDVZNm8wdmJUb1Jma3hNT0V1WXQ1SldORzB6eFVYRWF3VVdZSGVuT1NhRU0KaXpNaDV5MkZxSStxV01WK0c5YVZCUDNGTGJaVHhaSU9XT3ZPRUxrYmkvc2FsMGxtTStKY29odUx5bG5scytsMwpXbjZRdnNCd1d3S0JnSHBaQ3hPamFBSEExLzdxT2tEeXFvQVB0VmthSEZ6KzdFUVlUUlhEaVRpckhkWUhRRmxGCjFUMVlpUEhJQTY3THlueVRoNklMcWw0bXVYcVdTajY5MjVyeXZWSW11azFuekhhTFN4K0JlbTEwdURadjVpb3QKVWVOQTl3dzdpMTZ0VTJzVHFnZnBMT3NVVFpPTEF4RkVuUjh6NkF6Q0JBVGhqUDB2aElsSDB3MTVBb0dCQU05awpIcHFqRmtYeWZsU0N3KzEvclJXL1RYeXFOendXOWFpYVFDVzJYWC9GZVdPcFlTWXp2TWdwZisyQkNuKzFIc3IvCk96Y2I4VGVRS28ySXkzUDB4YTcwdUE3MUdoSTZYd1d5V2pORVFaalFReDhBQUgxWkUzRUF5M1UyVkpLYmtUL1UKWFVrak5rTnVEUG5lazhZR2ZZSk5xSjE5QUg5dzh0UVU4WVk2VkkySEFvR0JBTnJNd2x3WGx5VnpWNzJzZ3BtZQpRc2tuZjdCeVUyOEJ0dlZraGtMdTdWVnhVd2F3cEFNM3ZES1pwc0trek1xQUlpa1hIeWMyRmtobUE4VkFMaHdiClZqNnMrTDUrL1BxcVloT045cG9hZGVJTUZUaHcvaldRYUVjcW9yc21HSHdJQnhkQi9MZStKc1o4ZmR4U0huUTAKd1B3TFFzVGVQLzJ3dnlFWXdZZzlxYVNjCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
  mg.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURrekNDQW51Z0F3SUJBZ0lKQVBEOGVTM2VtY3JRTUEwR0NTcUdTSWIzRFFFQkN3VUFNR1F4Q3pBSkJnTlYKQkFZVEFsVlRNUXN3Q1FZRFZRUUlEQUpEUVRFV01CUUdBMVVFQnd3TlRXOTFiblJoYVc0Z1ZtbGxkekVOTUFzRwpBMVVFQ2d3RVYxTlBNakVOTUFzR0ExVUVDd3dFVjFOUE1qRVNNQkFHQTFVRUF3d0piRzlqWVd4b2IzTjBNQ0FYCkRUSXlNVEV4TnpFNE1EWXpPRm9ZRHpJd05USXhNVEE1TVRnd05qTTRXakJrTVFzd0NRWURWUVFHRXdKVlV6RUwKTUFrR0ExVUVDQXdDUTBFeEZqQVVCZ05WQkFjTURVMXZkVzUwWVdsdUlGWnBaWGN4RFRBTEJnTlZCQW9NQkZkVApUekl4RFRBTEJnTlZCQXNNQkZkVFR6SXhFakFRQmdOVkJBTU1DV3h2WTJGc2FHOXpkRENDQVNJd0RRWUpLb1pJCmh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTjlaRUQyb1JDbTljZjF2RUV2UjFKL1R3TGFrSmNQeVN2UDIKT1p1Y3hiVlBDeVhvbnlsZEtJbUVoSjZMZnVNcnV4NW9wQmVYRnpJZWhjOElJalkvSlUyR2xpaG5ybFBFbE1EUQoyUXVjelpqUTZuYWlrWVRrcU5zTk5NRitXdml0N0lIVVljejM2cEliK21KbSt4ZlNubFRaWVA2MGtsY2xDK3g2CmloVzVJUG5EcUxqS1F0OTFYWFVCRkczRFYrbHVoT1NzQXJuRHBWZzBreGdqd2MvRkxJMXNpY0JoWVMxWXpPWU0Kd08zWFh4ZFlUMlNJS3VaM0ZxMk5TSGQzSEUwamNIU2FIbXBjMWpONDRrTzRPRWJsdzhjMlJDT21WRkN6YXY3SApQQVVveG1JQUEyRHNNRTN2OHdwSGM2L0lFZkZTVVU3blFNbFVhTjN1QUpVeFpBVmh5YzhDQXdFQUFhTkdNRVF3ClFnWURWUjBSQkRzd09ZSUhZV1JoY0hSbGNvSUlaVzVtYjNKalpYS0NCbkp2ZFhSbGNvSUpiRzlqWVd4b2IzTjAKZ2hGdFlXNWhaMlZ0Wlc1MExYTmxjblpsY2pBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWNsY0NqWGppS3J1UwpyWUhNRjNDeDBPSmEwS2tlWkoxVkxFY0xseXAvTXp4VEdvdnk5MXR3NlhNVVFFbndqVkxLWUc5T3Q1MU9wc3pyCmdqQXBGSnE1QlZyblJsNHp0ajFsdHVMUmpyVzBlSnIrckNpbUFKdVI0ZUhMRTUrRU5uc2t1cGVNUXdyUG50dFMKdkVMUkZmMm1Zd3JqY2sxZFdNUGhsOGUyQmh4bDN3QXgwb1o0Z0k4d2dSSThndlVNYW0xd0hzeWR1NEpCYVRuWgpSM2FpOFpIU1Q2QlZHTUhBMFdUVTFpVWJyK0dDUkFjRE5kSkJpNHpCY0JzejREN09RdTBVK1dPbTBXWlNWNGZjCmNXdTE5K0pydk1KN0llWDNaaHFSdkdiblQzWVVSSFpoUGZsbGFoYWZTNlhMYzBzeExYMFV5RGJybkk2enZoRWMKb1NySFI0WGcwUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/enforcer-truststore-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-apk-helm-wso2-apk-enforcer-truststore-secret
  namespace: default
type: Opaque
data:
  mg.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURrekNDQW51Z0F3SUJBZ0lKQVBEOGVTM2VtY3JRTUEwR0NTcUdTSWIzRFFFQkN3VUFNR1F4Q3pBSkJnTlYKQkFZVEFsVlRNUXN3Q1FZRFZRUUlEQUpEUVRFV01CUUdBMVVFQnd3TlRXOTFiblJoYVc0Z1ZtbGxkekVOTUFzRwpBMVVFQ2d3RVYxTlBNakVOTUFzR0ExVUVDd3dFVjFOUE1qRVNNQkFHQTFVRUF3d0piRzlqWVd4b2IzTjBNQ0FYCkRUSXlNVEV4TnpFNE1EWXpPRm9ZRHpJd05USXhNVEE1TVRnd05qTTRXakJrTVFzd0NRWURWUVFHRXdKVlV6RUwKTUFrR0ExVUVDQXdDUTBFeEZqQVVCZ05WQkFjTURVMXZkVzUwWVdsdUlGWnBaWGN4RFRBTEJnTlZCQW9NQkZkVApUekl4RFRBTEJnTlZCQXNNQkZkVFR6SXhFakFRQmdOVkJBTU1DV3h2WTJGc2FHOXpkRENDQVNJd0RRWUpLb1pJCmh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTjlaRUQyb1JDbTljZjF2RUV2UjFKL1R3TGFrSmNQeVN2UDIKT1p1Y3hiVlBDeVhvbnlsZEtJbUVoSjZMZnVNcnV4NW9wQmVYRnpJZWhjOElJalkvSlUyR2xpaG5ybFBFbE1EUQoyUXVjelpqUTZuYWlrWVRrcU5zTk5NRitXdml0N0lIVVljejM2cEliK21KbSt4ZlNubFRaWVA2MGtsY2xDK3g2CmloVzVJUG5EcUxqS1F0OTFYWFVCRkczRFYrbHVoT1NzQXJuRHBWZzBreGdqd2MvRkxJMXNpY0JoWVMxWXpPWU0Kd08zWFh4ZFlUMlNJS3VaM0ZxMk5TSGQzSEUwamNIU2FIbXBjMWpONDRrTzRPRWJsdzhjMlJDT21WRkN6YXY3SApQQVVveG1JQUEyRHNNRTN2OHdwSGM2L0lFZkZTVVU3blFNbFVhTjN1QUpVeFpBVmh5YzhDQXdFQUFhTkdNRVF3ClFnWURWUjBSQkRzd09ZSUhZV1JoY0hSbGNvSUlaVzVtYjNKalpYS0NCbkp2ZFhSbGNvSUpiRzlqWVd4b2IzTjAKZ2hGdFlXNWhaMlZ0Wlc1MExYTmxjblpsY2pBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWNsY0NqWGppS3J1UwpyWUhNRjNDeDBPSmEwS2tlWkoxVkxFY0xseXAvTXp4VEdvdnk5MXR3NlhNVVFFbndqVkxLWUc5T3Q1MU9wc3pyCmdqQXBGSnE1QlZyblJsNHp0ajFsdHVMUmpyVzBlSnIrckNpbUFKdVI0ZUhMRTUrRU5uc2t1cGVNUXdyUG50dFMKdkVMUkZmMm1Zd3JqY2sxZFdNUGhsOGUyQmh4bDN3QXgwb1o0Z0k4d2dSSThndlVNYW0xd0hzeWR1NEpCYVRuWgpSM2FpOFpIU1Q2QlZHTUhBMFdUVTFpVWJyK0dDUkFjRE5kSkJpNHpCY0JzejREN09RdTBVK1dPbTBXWlNWNGZjCmNXdTE5K0pydk1KN0llWDNaaHFSdkdiblQzWVVSSFpoUGZsbGFoYWZTNlhMYzBzeExYMFV5RGJybkk2enZoRWMKb1NySFI0WGcwUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  wso2carbon.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURxVENDQXBHZ0F3SUJBZ0lFWWZFVlNqQU5CZ2txaGtpRzl3MEJBUXNGQURCa01Rc3dDUVlEVlFRR0V3SlYKVXpFTE1Ba0dBMVVFQ0F3Q1EwRXhGakFVQmdOVkJBY01EVTF2ZFc1MFlXbHVJRlpwWlhjeERUQUxCZ05WQkFvTQpCRmRUVHpJeERUQUxCZ05WQkFzTUJGZFRUekl4RWpBUUJnTlZCQU1NQ1d4dlkyRnNhRzl6ZERBZUZ3MHlNakF4Ck1qWXdPVE15TlRoYUZ3MHlOREEwTXpBd09UTXlOVGhhTUdReEN6QUpCZ05WQkFZVEFsVlRNUXN3Q1FZRFZRUUkKREFKRFFURVdNQlFHQTFVRUJ3d05UVzkxYm5SaGFXNGdWbWxsZHpFTk1Bc0dBMVVFQ2d3RVYxTlBNakVOTUFzRwpBMVVFQ3d3RVYxTlBNakVTTUJBR0ExVUVBd3dKYkc5allXeG9iM04wTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGCkFBT0NBUThBTUlJQkNnS0NBUUVBa2RnbmNvQ3J6NjU1THE4cFRkWDA3ZW9WQmpkWkRDVUU2dWVCZDBEMWhwSjAKL3pFM3gzQXo2dGx2enM5OFBzUHVHemFRT01tdUxhNHF4TkorT0t4Sm11dERVbENscHV2eHVmK2p5cTRnQ1Y1dApFSUlMV1JNQmpsQkVwSmZXbTYzK1ZLS1U0bnZCV05KN0tmaFdqbDgrRFVkTlNoMnBDRExwVU9ibWI5S3F1cWMxCng0Qmd0dGpONHJ4L1ArMy92KzFqRVRYeklQMUw0NHlIdHBRTnYwa2hZZjRqL2FIamNFcmk5eWt2cHoxbXRkYWMKYnJLSzI1TjRWMUhIUndEcVppSnpPQ0NJU1hEdXFCNndndVkvdjRuMGwxWHRyRXM3aUN5ZlJGd05TS05yTHFyMgozdFIxQ3NjbUxmYkg2WkxnNUNZSlREKzF1UFN4MEhNT0I0V3Y1MVBiV3dJREFRQUJvMk13WVRBVUJnTlZIUkVFCkRUQUxnZ2xzYjJOaGJHaHZjM1F3SFFZRFZSME9CQllFRkgwS1EzWVRaSnhUc05zUHlyWk9TRmdYWGhHK01CMEcKQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWpBTEJnTlZIUThFQkFNQ0JQQXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQUZOSjM0Q0lpSWxDeG15cDI3K0tBMjI0TGFIVnRMNUR1Y0ZLMFAyMkZRK1FLa09OCmlVd083MEtvVkZyZUJIMVNteHU0ZVBXazZyTVpGT001b0w4SFhZZzN0d3krNWVHY0wzUFFkN1g1ZHdBcWxWaXYKem9rb2k2U0RhQS9iSUc2Si9PMVU5UWQ0WEVWSmRWdUxxamsxK2NwNzBBTHQwWDZCN3NOTGZqRmNiejNqUVVMTgpuSzhITnZxYm43elF1UDEwczhwNXkycVZrUEJBL3BqaWdSRHNJV1I2cDc4UUVTRitUYUhGanhmY0Q2ZjljbllpCmUreUVIRVJ0RzhrOHg1akxGZStvZEkxL1FHWlA4Rnkwb0tUK0UvVEoxRkJoNHJCMUZ0S3lscUdlYXVQdTg5RG4KYUo5K2t2cE5ROTR5Rm1FdWh0REJ5dkRpanhBcXZsaW4zVFBJZnk4PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  wso2-apim-carbon.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR1VENDQXFHZ0F3SUJBZ0lVWXlTK2JjenM4R1N3Y3hoUUUyWUJqZEFFakw4d0RRWUpLb1pJaHZjTkFRRUwKQlFBd1pERUxNQWtHQTFVRUJoTUNWVk14Q3pBSkJnTlZCQWdNQWtOQk1SWXdGQVlEVlFRSERBMU5iM1Z1ZEdGcApiaUJXYVdWM01RMHdDd1lEVlFRS0RBUlhVMDh5TVEwd0N3WURWUVFMREFSWFUwOHlNUkl3RUFZRFZRUUREQWxzCmIyTmhiR2h2YzNRd0hoY05NalF3TWpJeU1EZzFNalUxV2hjTk1qWXdOVEkzTURnMU1qVTFXakJrTVFzd0NRWUQKVlFRR0V3SlZVekVMTUFrR0ExVUVDQXdDUTBFeEZqQVVCZ05WQkFjTURVMXZkVzUwWVdsdUlGWnBaWGN4RFRBTApCZ05WQkFvTUJGZFRUekl4RFRBTEJnTlZCQXNNQkZkVFR6SXhFakFRQmdOVkJBTU1DV3h2WTJGc2FHOXpkRENDCkFTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT2JIZTRycjIxRlQ3WHVveXozQ1MwcisKeThRTGhweW9nRmxYdzBMQ0lQRmpWcUxVbUFCSTlTRkl6N3BWekpwcVRQbDRCbGFVcUc3N0I3MjJTSXNrQm5MUgpHczVHVzVBSEd1akhVZmpyUlVDL0xFMGh3YWE3QTVrU1RueHB2cUxVOWd6UGw1R1EyOHdib3BpcHcwWTJDTkdxCmxZclRKd0wwL1MyN0JDZU9iWWtSeFprNEovRlZiS2VNVm5SQVVZZUE3UjZJUjh3QnU2d2FQUzVDTk9Ua2kvWncKNTBBb2pHYWRWZm1HeTZRQzZnVmFpQzhJYW1CWktrdk9qYy90Q2F1UDlCTmtIZ3BBbkFhWE9adFNyRVg2aS9xSgpHL1pYbU9jSlNGR0hLempIT3VGaTYrOGJQK0t3czNVTS92RmZkNEdoMmFTMmI2Z093MjV0L1IwbERKVit3dEVDCkF3RUFBYU5qTUdFd0ZBWURWUjBSQkEwd0M0SUpiRzlqWVd4b2IzTjBNQjBHQTFVZERnUVdCQlNIQXhLb0tlWnMKWnMxbmkrRVhZVzc1Zk03MGJqQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBUVlJS3dZQkJRVUhBd0l3Q3dZRApWUjBQQkFRREFnVHdNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUURHTDlTU0FjOHplWnBVb2loU2ExVnowZGNXCm5FR1lkdDdkQnB4U3ppcVJWSDVPNjJxVU92ZDhtbGh5M0h4N3B2Wm0yK2pKYjVMeEdKM2MvVzhGM211dDFTdGoKQVNFRXVsOWF4dXhvNWZuelVXazZBV20ycGFobEttZTBiSk8vdUJyY010WlU2TXdCdkU3NkEzZmgra1p6VlREbApMbjJUVG9ySlhydC9JQm5KdVZHT2UzWGxGTlMyMEo3bEtFUmt3UHZEZlhkZ25aSWlUYkcwdzliQUxVSmpROFUyCkFBUDlha2d1N3BMV0w3RzU1c1NWb2JGckJMSkVMZ3FxU1VUVXhBOXVybzYwRjFRMFVhWHBOd2h0MUJ3QTFVUEIKcys1T3ZmVzhnMWhkVmdWdmNmZUZIQk9oSTJOa1RtemRGRldKZTBFeE9Db3liR1dJZkZkYlZtalVZL2JSCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0=
---
# Source: apk-helm/templates/idp/idp-ds/idp-signing-keystore-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-apk-helm-wso2-apk-idp-signing-keystore-secret
  namespace: default
type: Opaque
data:
  wso2carbon.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBa2RnbmNvQ3J6NjU1THE4cFRkWDA3ZW9WQmpkWkRDVUU2dWVCZDBEMWhwSjAvekUzCngzQXo2dGx2enM5OFBzUHVHemFRT01tdUxhNHF4TkorT0t4Sm11dERVbENscHV2eHVmK2p5cTRnQ1Y1dEVJSUwKV1JNQmpsQkVwSmZXbTYzK1ZLS1U0bnZCV05KN0tmaFdqbDgrRFVkTlNoMnBDRExwVU9ibWI5S3F1cWMxeDRCZwp0dGpONHJ4L1ArMy92KzFqRVRYeklQMUw0NHlIdHBRTnYwa2hZZjRqL2FIamNFcmk5eWt2cHoxbXRkYWNicktLCjI1TjRWMUhIUndEcVppSnpPQ0NJU1hEdXFCNndndVkvdjRuMGwxWHRyRXM3aUN5ZlJGd05TS05yTHFyMjN0UjEKQ3NjbUxmYkg2WkxnNUNZSlREKzF1UFN4MEhNT0I0V3Y1MVBiV3dJREFRQUJBb0lCQUFlRnd3QnpSZWxsWjJ5OQpXTlVNbkhYZnVyYU5DUFBKRTdMYmFXQnhvazI1cE5LUTJGUUV6bzRRMUdVeUZkelZsYVRPVzFhdExic1V5UWRKCk90SWVMaXhtY1hJcWVoRGRDZnA5QnNGcWhTUFdrZ0RscEVPSTZSaWlaKzFSYmtsWXRTTS93T0dFWHBtcWxFaGwKa3hsWmdrV0VaYWFBQWRCTUhVcXdvNHdsclVGZXBlN0xGSHdIV3paOGRjUlpuaUhwVURiSVd0VkVwKzJMZzFhOQpBdS9reEZTUklJK0Z6WU1RRExIVDh0WWRiajVXbjN4Sms0Tk01c09JRm5iZ2FNbHhwRXFlNWVjYzY0NHZ4NHRrCkVEYVdFOExidmNCZ2NSb2thR2daS05TVmRHM1JQdWFjWDhGUG9IeGdrbHEvMldENzlxUGRZdUdmRFQxWEhCUXEKeFRqb2R0a0NnWUVBeDhCcDJpOGh4Zmc3ekQxZDAzTmFZekFad3loZnVMNmhvQXhHUGdMVzQvVktNOEtHSnU3UQo2QnZrZUpkVkY4UzlvZlQ5RHRRUUFMS3FTN3NValBDdFdxK3FSeUR0S2VTM3lzRmxvUlRHZ1VnU3ZmNFpKMDByCkQyU28xTjhwUWtNcmNud2lPTnpzaWZtVE9ZWHpQQ0oyeXlnVk1kZGxQb3BCL21EN2ZLMmhUTGNDZ1lFQXV1bXoKODZCdzRuYzg1bGgyL2xDYTBORXdRcUU3Nm5rekNUaUhGdTU2SmswUUMxZ2pBUWRBc2J2WFloeHUrOGUxR2R4Twp1eVlhYkFYN042c0NJQzFuVlNZL2lVZWFnMnh2b0lZVkZiZ2xaWFNjWUxpQmZGNVZtOEF0aUlGdi9Fc0ZZZW03CkswT2l5U09GZ1NtRmlCRVRrTnFUNExwcGNYbzM2OGgwTzhnL3luMENnWUFwRjVJdkNrY2VYTVNnYlhkaHluY3IKdEhkNFNGUDR3MjZvYUI0REg3NXBRc3F5L3k5dHp1ODI4Slg5b05RbWdaaXBPcWJjYUErcXRSYUhZY01HZzNTRwpGV0VvSk1QbFBHSDYyZkk0UXZmYkhLS09aemx4ZGxTSFpDTy9OdkZiNmttRDBibVFqUkkwQ0IyYlZjMEY3K2tVClBmaXVPaXRmeEQxelFTdzdKOVRvM1FLQmdGbTR3MFBvT1NmTWV2UkxkTnRCRC8rNjJzS3hLTlMxMXhUUENMR3UKU2Y1R3NiUHdXK1VyZVJlWUJweTI3Mk4zQ3V6ZC93RUJHbC9PUXpnR281K1VpK3lvem9qMFVTeFRDZ1p4Tm4vVgpoRVgrUXU1K3d0RlRheDYza21QYlZra3lMZVJCVVRKRVprak0vMUh2LzRSQVJqY2JaUzdUN0xlbkpsN05PMVpUCkdxUDFBb0dBWUF3cmk0NEN1YzZieTFiRTY1TFpVZm4rZytTRCtib2M5N1doL0NCMzZlMm5zZ1pSVzBMTVluNysKenlRcU1kS1lUQ1kxVW1wZVRMSW4zQmp6Y1d0d0lVS0ZGc1NoSHVNNHNIL1kycWcwNGN0SHgyU2ZNMEpFRDg3Mgp3c1FGbXZKNkxwZGNwSElLTjU1SzdGTVdYQlZoN0FpNnI0SnB4Rkdlb3dJN3E5clJrbk09Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
  wso2carbon.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURxVENDQXBHZ0F3SUJBZ0lFWWZFVlNqQU5CZ2txaGtpRzl3MEJBUXNGQURCa01Rc3dDUVlEVlFRR0V3SlYKVXpFTE1Ba0dBMVVFQ0F3Q1EwRXhGakFVQmdOVkJBY01EVTF2ZFc1MFlXbHVJRlpwWlhjeERUQUxCZ05WQkFvTQpCRmRUVHpJeERUQUxCZ05WQkFzTUJGZFRUekl4RWpBUUJnTlZCQU1NQ1d4dlkyRnNhRzl6ZERBZUZ3MHlNakF4Ck1qWXdPVE15TlRoYUZ3MHlOREEwTXpBd09UTXlOVGhhTUdReEN6QUpCZ05WQkFZVEFsVlRNUXN3Q1FZRFZRUUkKREFKRFFURVdNQlFHQTFVRUJ3d05UVzkxYm5SaGFXNGdWbWxsZHpFTk1Bc0dBMVVFQ2d3RVYxTlBNakVOTUFzRwpBMVVFQ3d3RVYxTlBNakVTTUJBR0ExVUVBd3dKYkc5allXeG9iM04wTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGCkFBT0NBUThBTUlJQkNnS0NBUUVBa2RnbmNvQ3J6NjU1THE4cFRkWDA3ZW9WQmpkWkRDVUU2dWVCZDBEMWhwSjAKL3pFM3gzQXo2dGx2enM5OFBzUHVHemFRT01tdUxhNHF4TkorT0t4Sm11dERVbENscHV2eHVmK2p5cTRnQ1Y1dApFSUlMV1JNQmpsQkVwSmZXbTYzK1ZLS1U0bnZCV05KN0tmaFdqbDgrRFVkTlNoMnBDRExwVU9ibWI5S3F1cWMxCng0Qmd0dGpONHJ4L1ArMy92KzFqRVRYeklQMUw0NHlIdHBRTnYwa2hZZjRqL2FIamNFcmk5eWt2cHoxbXRkYWMKYnJLSzI1TjRWMUhIUndEcVppSnpPQ0NJU1hEdXFCNndndVkvdjRuMGwxWHRyRXM3aUN5ZlJGd05TS05yTHFyMgozdFIxQ3NjbUxmYkg2WkxnNUNZSlREKzF1UFN4MEhNT0I0V3Y1MVBiV3dJREFRQUJvMk13WVRBVUJnTlZIUkVFCkRUQUxnZ2xzYjJOaGJHaHZjM1F3SFFZRFZSME9CQllFRkgwS1EzWVRaSnhUc05zUHlyWk9TRmdYWGhHK01CMEcKQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWpBTEJnTlZIUThFQkFNQ0JQQXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQUZOSjM0Q0lpSWxDeG15cDI3K0tBMjI0TGFIVnRMNUR1Y0ZLMFAyMkZRK1FLa09OCmlVd083MEtvVkZyZUJIMVNteHU0ZVBXazZyTVpGT001b0w4SFhZZzN0d3krNWVHY0wzUFFkN1g1ZHdBcWxWaXYKem9rb2k2U0RhQS9iSUc2Si9PMVU5UWQ0WEVWSmRWdUxxamsxK2NwNzBBTHQwWDZCN3NOTGZqRmNiejNqUVVMTgpuSzhITnZxYm43elF1UDEwczhwNXkycVZrUEJBL3BqaWdSRHNJV1I2cDc4UUVTRitUYUhGanhmY0Q2ZjljbllpCmUreUVIRVJ0RzhrOHg1akxGZStvZEkxL1FHWlA4Rnkwb0tUK0UvVEoxRkJoNHJCMUZ0S3lscUdlYXVQdTg5RG4KYUo5K2t2cE5ROTR5Rm1FdWh0REJ5dkRpanhBcXZsaW4zVFBJZnk4PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
---
# Source: apk-helm/templates/postgres/database-secret.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

kind: Secret
apiVersion: v1
metadata:
  name: apk-db-secret
  namespace: default
type: Opaque
stringData:
  DB_PASSWORD: "wso2carbon"
---
# Source: apk-helm/templates/serviceAccount/apk-account-secret.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Secret
metadata:
  name: my-apk-helm-wso2-apk-token
  namespace: default
  annotations:
    kubernetes.io/service-account.name: wso2apk-platform
type: kubernetes.io/service-account-token
---
# Source: apk-helm/charts/cert-manager/templates/webhook-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-apk-helm-cert-manager-webhook
  namespace: default
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
data:
---
# Source: apk-helm/charts/postgresql/templates/primary/extended-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: wso2apk-db-service-extended-configuration
  namespace: "default"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-11.9.6
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: primary
data:
  override.conf: |-
    max_connections = 400
---
# Source: apk-helm/charts/redis/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-configuration
  namespace: "default"
  labels:
    app.kubernetes.io/name: redis
    helm.sh/chart: redis-17.8.0
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
data:
  redis.conf: |-
    # User-supplied common configuration:
    # Enable AOF https://redis.io/topics/persistence#append-only-file
    appendonly yes
    # Disable RDB persistence, AOF persistence already enabled.
    save ""
    # End of common configuration
  master.conf: |-
    dir /data
    # User-supplied master configuration:
    rename-command FLUSHDB ""
    rename-command FLUSHALL ""
    # End of master configuration
  replica.conf: |-
    dir /data
    # User-supplied replica configuration:
    rename-command FLUSHDB ""
    rename-command FLUSHALL ""
    # End of replica configuration
---
# Source: apk-helm/charts/redis/templates/health-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-health
  namespace: "default"
  labels:
    app.kubernetes.io/name: redis
    helm.sh/chart: redis-17.8.0
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
data:
  ping_readiness_local.sh: |-
    #!/bin/bash

    [[ -f $REDIS_PASSWORD_FILE ]] && export REDIS_PASSWORD="$(< "${REDIS_PASSWORD_FILE}")"
    [[ -n "$REDIS_PASSWORD" ]] && export REDISCLI_AUTH="$REDIS_PASSWORD"
    response=$(
      timeout -s 3 $1 \
      redis-cli \
        -h localhost \
        -p $REDIS_PORT \
        ping
    )
    if [ "$?" -eq "124" ]; then
      echo "Timed out"
      exit 1
    fi
    if [ "$response" != "PONG" ]; then
      echo "$response"
      exit 1
    fi
  ping_liveness_local.sh: |-
    #!/bin/bash

    [[ -f $REDIS_PASSWORD_FILE ]] && export REDIS_PASSWORD="$(< "${REDIS_PASSWORD_FILE}")"
    [[ -n "$REDIS_PASSWORD" ]] && export REDISCLI_AUTH="$REDIS_PASSWORD"
    response=$(
      timeout -s 3 $1 \
      redis-cli \
        -h localhost \
        -p $REDIS_PORT \
        ping
    )
    if [ "$?" -eq "124" ]; then
      echo "Timed out"
      exit 1
    fi
    responseFirstWord=$(echo $response | head -n1 | awk '{print $1;}')
    if [ "$response" != "PONG" ] && [ "$responseFirstWord" != "LOADING" ] && [ "$responseFirstWord" != "MASTERDOWN" ]; then
      echo "$response"
      exit 1
    fi
  ping_readiness_master.sh: |-
    #!/bin/bash

    [[ -f $REDIS_MASTER_PASSWORD_FILE ]] && export REDIS_MASTER_PASSWORD="$(< "${REDIS_MASTER_PASSWORD_FILE}")"
    [[ -n "$REDIS_MASTER_PASSWORD" ]] && export REDISCLI_AUTH="$REDIS_MASTER_PASSWORD"
    response=$(
      timeout -s 3 $1 \
      redis-cli \
        -h $REDIS_MASTER_HOST \
        -p $REDIS_MASTER_PORT_NUMBER \
        ping
    )
    if [ "$?" -eq "124" ]; then
      echo "Timed out"
      exit 1
    fi
    if [ "$response" != "PONG" ]; then
      echo "$response"
      exit 1
    fi
  ping_liveness_master.sh: |-
    #!/bin/bash

    [[ -f $REDIS_MASTER_PASSWORD_FILE ]] && export REDIS_MASTER_PASSWORD="$(< "${REDIS_MASTER_PASSWORD_FILE}")"
    [[ -n "$REDIS_MASTER_PASSWORD" ]] && export REDISCLI_AUTH="$REDIS_MASTER_PASSWORD"
    response=$(
      timeout -s 3 $1 \
      redis-cli \
        -h $REDIS_MASTER_HOST \
        -p $REDIS_MASTER_PORT_NUMBER \
        ping
    )
    if [ "$?" -eq "124" ]; then
      echo "Timed out"
      exit 1
    fi
    responseFirstWord=$(echo $response | head -n1 | awk '{print $1;}')
    if [ "$response" != "PONG" ] && [ "$responseFirstWord" != "LOADING" ]; then
      echo "$response"
      exit 1
    fi
  ping_readiness_local_and_master.sh: |-
    script_dir="$(dirname "$0")"
    exit_status=0
    "$script_dir/ping_readiness_local.sh" $1 || exit_status=$?
    "$script_dir/ping_readiness_master.sh" $1 || exit_status=$?
    exit $exit_status
  ping_liveness_local_and_master.sh: |-
    script_dir="$(dirname "$0")"
    exit_status=0
    "$script_dir/ping_liveness_local.sh" $1 || exit_status=$?
    "$script_dir/ping_liveness_master.sh" $1 || exit_status=$?
    exit $exit_status
---
# Source: apk-helm/charts/redis/templates/scripts-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-scripts
  namespace: "default"
  labels:
    app.kubernetes.io/name: redis
    helm.sh/chart: redis-17.8.0
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
data:
  start-master.sh: |
    #!/bin/bash

    [[ -f $REDIS_PASSWORD_FILE ]] && export REDIS_PASSWORD="$(< "${REDIS_PASSWORD_FILE}")"
    if [[ -f /opt/bitnami/redis/mounted-etc/master.conf ]];then
        cp /opt/bitnami/redis/mounted-etc/master.conf /opt/bitnami/redis/etc/master.conf
    fi
    if [[ -f /opt/bitnami/redis/mounted-etc/redis.conf ]];then
        cp /opt/bitnami/redis/mounted-etc/redis.conf /opt/bitnami/redis/etc/redis.conf
    fi
    ARGS=("--port" "${REDIS_PORT}")
    ARGS+=("--protected-mode" "no")
    ARGS+=("--include" "/opt/bitnami/redis/etc/redis.conf")
    ARGS+=("--include" "/opt/bitnami/redis/etc/master.conf")
    exec redis-server "${ARGS[@]}"
---
# Source: apk-helm/templates/data-plane/config-deployer/config-ds-configmap.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-apk-helm-wso2-apk-config-ds-configmap
  namespace: default
data:
  Config.toml: |
   
    [ballerina.observe]
    metricsEnabled = false
   
    [wso2.config_deployer_service.keyStores.tls]
    keyFilePath = "/home/wso2apk/config-deployer/security/config.key"
    certFilePath = "/home/wso2apk/config-deployer/security/config.pem"
    [wso2.config_deployer_service.gatewayConfiguration]
    name = "wso2-apk-default"
    listenerName = "httpslistener"
---
# Source: apk-helm/templates/data-plane/config-deployer/wso2-apk-config-deployer-api-definition.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "ConfigMap"
apiVersion: "v1"
metadata:
  name: "my-apk-helm-wso2-apk-wso2-apk-config-deployer-api-definition"
  namespace: default
  labels:
    managed-by: "apk"
binaryData:
  definition: H4sICODjjWQAA2RlcGxveWVyLWFwaS55YW1sAOUaaXPbuPW7fwWqTdvEWR12jknVY+rYzka1E6s+mszE2RmIhCRseC0AOlay6W/vA0iQIAlejrPxTDXjQ8DDu9/DewCGw+FWGJEAR3SKHo0mo50tGizD6RZCggqPTNGbs5NdtDefobmHxTJkPoJf6CheEBYQQTgaogMSeeEGHT3j6JTwMGYOkSsAh0u4w2gkaBhM0W8wgND5mnKFD/7EnLhIhGhFAsKwIAoFS1FwRQgHEngES68I4wrPDrA52YqwWHPJ5xh452NX8TBVJKKQi+Q/kAKvuP4fAa+AjKdfeez7mG2mmv+EZfkpso3SUdATMAljM3eKEnr5EkZ+jQkXz0N3k5NzwkCQQOQDCPmxJ2iEmRhLXQ5dLLA5DVw5a+KXxhC6x8hyigY/jJ3Qj8IAkPJxAqlFH4IahgsgP8g44gDJiSH+YHeyMzBRW+yjP9JECWawEY8dMAhfxp63MaDWBLtglSKzx6GjtFQWoYGW/JyvCbo4PUbhEgn4NyAfvQ1yGAG3cDOfGJWWcbGRPsqpH3mkNEeugXkXZpfY4+VJu5bBXTaRxCcYDVaFyf3ElMNzCdBfstQTFH4tojTW9xLI4pkI4SjyaGK88Qb7XhlbHY0m59ybH4HqloPcBx9PJgUftK3OfHf8HLunSWgNtnIcT3rhmIGsLMDeGWGQRA4ZC5lClmSOOPia3HGRru6XPTTNfBGkBOxDPmUFigGMTcEudOYa0lLACyphZig2+ODFxexA+5xMsDKydZ42AGUGo4wAd4LF5oTN7Ba3sueb3T75RqulZ8b5f4vNX3g1u/ZOaAnXWMoCkdOg/bsXujmkRJRmmgRnmm6yCE5qGClduPiFOMLYrZWvG7Gm1H4tjBEZfcbXtADRqJViC1gjJoNcUDMEqGsKW2ONjsGbZ4tEBuyeBN6mFK8qZZgFB74+JsFKrKfo6cQcp4Ee32njMFVNDdrdR7s3xKtLOjveRx3YhSpQOsgU/fzu5//+4Z8//HX6x5+37z94+PfPX367vPzbPwZ//vFP43uX7y7fX/KHl+P3D++18SRKSaTWZEsMpdwUnR6enRvjJIj9YhQOyyBy6KfTvfnLfx9XRuf7paE3h8/PTvaPDnMEIVvhgH6q1Fj9fevEwGTzMRK4UUgDISOKruJk++Jtwat3/kPr6jybZBsir0qBGcNm2qeC+KWk31J0nGTYc4qwj85DyKKFAG3DNMsw6bUFhKdQnx5Tn4quGLMFBpoYNB8IWq2bO2vDko0Ar+tSiRF7c0tmqsNecJhXOJKe4cRchL6R4ORgMR11ZUp+bIky+ZSzl4nIuoldYS/uuuJqDcWdRQMVDhtiJlXIFWUixh5SGKvKqBMQxt3YsXVHdlvIj0WxjTrhOHAX4fW3IeCEjBcCuqvb75+cnhUWJu6/Z3X9jnurjJtyzVejlqzS+debPJNySHDn4QcSnIcXESwh2K+iWoShR3BQ8I409RdrPRLghUcs230VQ8ZNYedOatvXpQhoE0hqMGRpFs8AVHswlz1FX3yQ0z6QTYmpQyVbu2g52ZYVelDNV3yjwQ9qQlOiQAUcxaC0uU/Flw+7W7DGB7Aqm2U/wkJvz/PCjyeMrugNtzirqaok9qGQlTEEnNwq6y+rvdZts/6KgPO635YEvt5bWRwRKhOyIsymmEnaSlS3fktfkcGgY3JFPKRBGxwvPSv8pmWPYsPo3XRL9bsRrY43Ki8B2coVVG7PIgXwOm/JOm4S+brWLJiA/qfalLT1AFc7JRyz9q7PduBTW5Bk2fnzIN8lBtP0y87gi4Kt1KKGpuUcUpPogAhMPV6vRpv6U5/lc8IuAmp2yXH+tcHZ9cJugWjk+NexvyBMZnONCWEZ18RFQAvxiDh0SeGb5EN1MdQnNtUZ7WRsZaS5dbqoQV/q94boFQ1iQQpDL8OYFQYOChGXsWgstXdPJcNqINmgA1RTzrFXnr37tzyhWMrMG2KzTk0bfFH3pf0SgV7VIdyA95NlMQUO6wvuYaPgR8+4PLyiDhlUWDkjTsyo2PRVol6XY3SktEtZRlvSXEW+xkI9x1TYPahHSeB0ZvU0W5Fg2a8y2NFunDiMiE4JPAE9IptGyLIWe/LTo86vKbV4Srjcu1jdrknJzzGnjt0prFPfTvMxT/akNt0rUpjzjyFz22BPK07XzDf6/KVSeZQzZjbRTxMCsxXpsmVkqXwMAhI2/qz+zNwvGcwVYYs+iOYnxuGh7nh7dCr2XtPwzcq4sekV23Pkhy5Rt/L6Phbdl6vHyr0fVNLbNz43vN2zvAztbZzocQfQdWhrMuO8e9+z2cm3lZ5BXT5ha/O/iH76hPkaOx+GPCFYQMUj7PQ8X/gwjNKnJEbVzDpVhhmWZ5NneTkHYorQCb0+bKyFiNR46fXEtEF1wHrt2VeXElKK7hTOKJa0cJModYIhJBc0wMzqJwPgc6Tx5P4GwUwDddb7gtpOXdr4ogYGdP9k72z8E8PR+ldv/IYszkLnAxEP+vGZPioayXcEaZknL+/KBawcS30WkoqIWQCV/Ecq1ujx27fo5fn5HJ0JLGJd2tov7lzzmg58kuNVzy5R4ujigFpymHn6OBtPSfbVeyJ9uni0ZYPpibF0pQ6TstUzYRBehLFQVz3ETt4PGZmlb8BuTnsOCRMS6sLbyCdcMfMSq0rkKVe8zErOAjFdJaffeFNRJD9Tt1lAC8OPIirWwAdk7lRsj3JF2kfAQ/Gm/wVMp478YwIn2bzCHnWTqFUYOFpsEMHOGoKYeK6JoucJinKDY6Azg3VGrOihUswcGMaEfpQGLr2irryMSPkCSQXy8Qat8RVBoQO1H0QMcmNpPYR1Hz36LiFV8qEbRk7R2AcV964qRavh+0dZ+eBHve7RLFQf/MjHPvKt41YjI9vb8pBndrC9Lc8COHiOtHV6p7u9LUtzmMrveCvGN8tA20MX6wOX8qOTivLMu+qykG+H8mnp0LyENkROTrbahC7cYCvpUxFNwlpmtCBeGKwgQMLfSfw9xyGRKIqdjPWU9BVxKVb4uTrijoSs/1UpLoXTh7sjCAVV1cvHteUXQ1WZC7LcmtCJGGlzUWZiy/JOLH8nNDUQGHoAAJRCjNAsUJlYZzGwdCU157nY8pSq+SFV/9e36ZskE1xXQSUsKiGix5NJaVznQFPOEkhBHR00UKagt3Q0GJSmkq027z9kgQv6qTOFnh6hs+zgNWsGsSffJMGueA35h99xK/ylzgpaxCYTtAp/cwNA9bGgrkuCGgtk8yP1eFE7gR/Dr4V6zKgffaAFbEFBmA9BQQBVCyFBfmp+x430qM5ImRaarHQL+rm5HS0vF2ssqiFRApoUf3faME/qc5hVmDYj8QSWBE4Yy/UQV1CsU40qSepo7hHMk+e6GNpF7PrQscLGg4Wprt6Geh2KvWxLrTERwKAcqBB5wKuf7c5y3w0AlseRPNK48/H1tM6MRYE7BlmzKr7KQi/AMdwG46j5xC68mpvdkCTMqOR8x23yuMkmSs7WcGrTwM1NAW19li5fQNND6oxiAqIEsrhhyVwrGVL5FppHebICHC+Ig2OIctmpp7V8ZKDi2q2gg7rbdtzZrbOjRTVdd7GvV9rNTX8R4PSpWa3RTZDE2vJeSFM35u605SY7dZYz5WszmV3yr1F/lklVN1i8PCyZIQNNO0cJnBhE3uaIjfYS7VcfU7+iAcJ5xk5PO++2tXae1FsrlyTfl9rsdgMF3cCo/wPR5SmSeDsAAA==
---
# Source: apk-helm/templates/data-plane/config-deployer/wso2-apk-config-generator-api-definition.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "ConfigMap"
apiVersion: "v1"
metadata:
  name: "my-apk-helm-wso2-apk-wso2-apk-config-generator-api-definition"
  namespace: default
  labels:
    managed-by: "apk"
binaryData:
  definition: "H4sIAAAAAAAAAK2RvW7DMAyEX6XgXP/EXQq/QocORaYig6DQMRFHFES6QWr43UvJaYcOnaqFgu7uO4BagCMGFwl6eKrbegePD0BhYOgXUNIJTbgKd5WL58pzGOhUnTBgcsqpykELfGAS4mDWnTFaWO1N0M+J9Ab9+wJHHNw8qd0P68HE6HSUXNEYQZo7EO8Fs90LboHIonkmlMhBsIS6ts3jiOITxc0Kry+w/t1b5F+F52epjM1z8hv7fwuz7vliJAxaUN/uNz/iZaP/ZGzjt5gXzm7WscubHSa+FhNd4kSeiiurnOizbGmfJkuMqlH6plEUra0xZ8Xb3+bwup0vY0KevuwBAAA="
---
# Source: apk-helm/templates/data-plane/gateway-components/adapter/adapter-grpc-probe-script-conf.yaml
# --------------------------------------------------------------------
# Copyright (c) 2022, WSO2 LLC. (http://wso2.com) All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# -----------------------------------------------------------------------
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-apk-helm-wso2-apk-adapter-grpc-probe-script-conf
  namespace: default
data:
  check_health.sh: |
    #!/bin/bash
    # --------------------------------------------------------------------
    # Copyright (c) 2022, WSO2 LLC. (http://wso2.com) All Rights Reserved.
    #
    # Licensed under the Apache License, Version 2.0 (the "License");
    # you may not use this file except in compliance with the License.
    # You may obtain a copy of the License at
    #
    # http://www.apache.org/licenses/LICENSE-2.0
    #
    # Unless required by applicable law or agreed to in writing, software
    # distributed under the License is distributed on an "AS IS" BASIS,
    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    # See the License for the specific language governing permissions and
    # limitations under the License.
    # -----------------------------------------------------------------------

    ADAPTER_XDS_PORT="${ADAPTER_XDS_PORT:-18000}"
    grpc_health_probe -addr "127.0.0.1:${ADAPTER_XDS_PORT}" \
        -tls \
        -tls-ca-cert "${ADAPTER_PUBLIC_CERT_PATH}" \
        -tls-client-cert "${ADAPTER_PUBLIC_CERT_PATH}" \
        -tls-client-key "${ADAPTER_PRIVATE_KEY_PATH}" \
        -tls-server-name adapter \
        -connect-timeout=3s
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/common-controller-grpc-probe-script-conf.yaml
# --------------------------------------------------------------------
# Copyright (c) 2022, WSO2 LLC. (http://wso2.com) All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# -----------------------------------------------------------------------
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-apk-helm-wso2-apk-common-controller-grpc-probe-script-conf
  namespace: default
data:
  check_health.sh: |
    #!/bin/bash
    # --------------------------------------------------------------------
    # Copyright (c) 2022, WSO2 LLC. (http://wso2.com) All Rights Reserved.
    #
    # Licensed under the Apache License, Version 2.0 (the "License");
    # you may not use this file except in compliance with the License.
    # You may obtain a copy of the License at
    #
    # http://www.apache.org/licenses/LICENSE-2.0
    #
    # Unless required by applicable law or agreed to in writing, software
    # distributed under the License is distributed on an "AS IS" BASIS,
    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    # See the License for the specific language governing permissions and
    # limitations under the License.
    # -----------------------------------------------------------------------

    COMMON_CONTROLLER_XDS_PORT="${COMMON_CONTROLLER_XDS_PORT:-18005}"
    grpc_health_probe -addr "127.0.0.1:${COMMON_CONTROLLER_XDS_PORT}" \
        -tls \
        -tls-ca-cert "${COMMON_CONTROLLER_PUBLIC_CERT_PATH}" \
        -tls-client-cert "${COMMON_CONTROLLER_PUBLIC_CERT_PATH}" \
        -tls-client-key "${COMMON_CONTROLLER_PRIVATE_KEY_PATH}" \
        -tls-server-name commoncontroller \
        -connect-timeout=3s
---
# Source: apk-helm/templates/data-plane/gateway-components/common-log-conf.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-apk-helm-wso2-apk-common-log-conf
  namespace: default
data:
  config.toml: | 
    [commoncontroller]
      
    [commoncontroller.server]
      label = "ratelimiter"
      
    [commoncontroller.keystore]
      certPath = "/home/wso2/security/keystore/commoncontroller.crt"
      keyPath = "/home/wso2/security/keystore/commoncontroller.key"

    [commoncontroller.truststore]
      location = "/home/wso2/security/truststore"

    [commoncontroller.redis]
      host = "redis-master"
      port = "6379"
      username = "default"
      password = ""
      userCertPath = "/home/wso2/security/keystore/commoncontroller.crt"
      userKeyPath = "/home/wso2/security/keystore/commoncontroller.key"
      cACertPath = "/home/wso2/security/keystore/commoncontroller.crt"
      tlsEnabled = false
      revokedTokenChannel = "wso2-apk-revoked-tokens-channel"
    [commoncontroller.sts]
      authKeyPath = "/home/wso2/security/sts/auth_key.txt"
      authKeyHeader = "stsAuthKey"
    
    [commoncontroller.webServer]
      port = 9543

  log_config.toml: |
    # The logging configuration for Adapter

    ## Common Controller root Level configurations
    logLevel = "INFO" # LogLevels can be "DEBG", "FATL", "ERRO", "WARN", "INFO", "PANC"
    LogFormat = "TEXT" # Values can be "JSON", "TEXT"

    [rotation]
    MaxSize = 10    # In MegaBytes (MB)
    MaxBackups = 3
    MaxAge =  2   # In days
    Compress = true

    ## Adapter package Level configurations

    [[pkg]]
    name = "github.com/wso2/apk/common-adapter/internal/operator"
    logLevel = "INFO" # LogLevels can be "DEBG", "FATL", "ERRO", "WARN", "INFO", "PANC"
    [[pkg]]
    name = "github.com/wso2/apk/common-controller/internal/utils"
    logLevel = "INFO" # LogLevels can be "DEBG", "FATL", "ERRO", "WARN", "INFO", "PANC"
    [[pkg]]

    # The logging configuration for Router

    [accessLogs]
    enable = false
    logfile = "/tmp/envoy.access.log" # This file will be created inside router container.
    format = "[%START_TIME%] '%REQ(:METHOD)% %DYNAMIC_METADATA(envoy.filters.http.ext_authz:originalPath)% %REQ(:PATH)% %PROTOCOL%' %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% '%REQ(X-FORWARDED-FOR)%' '%REQ(USER-AGENT)%' '%REQ(X-REQUEST-ID)%' '%REQ(:AUTHORITY)%' '%UPSTREAM_HOST%'\n"

    [wireLogs]
    enable = false
    include = ["Headers", "Body", "Trailers"]

    # [[pkg]]
    # name = "github.com/wso2/apk/Adapter/pkg/xds"
    # logLevel = "INFO"
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/enforcer-grpc-probe-script-conf.yaml
# --------------------------------------------------------------------
# Copyright (c) 2022, WSO2 LLC. (http://wso2.com) All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# -----------------------------------------------------------------------

apiVersion: v1
kind: ConfigMap
metadata:
  name: my-apk-helm-wso2-apk-enforcer-grpc-probe-script-conf
  namespace: default
data:
  check_health.sh: |
    #!/bin/bash
    # --------------------------------------------------------------------
    # Copyright (c) 2021, WSO2 LLC. (http://wso2.com) All Rights Reserved.
    #
    # Licensed under the Apache License, Version 2.0 (the "License");
    # you may not use this file except in compliance with the License.
    # You may obtain a copy of the License at
    #
    # http://www.apache.org/licenses/LICENSE-2.0
    #
    # Unless required by applicable law or agreed to in writing, software
    # distributed under the License is distributed on an "AS IS" BASIS,
    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    # See the License for the specific language governing permissions and
    # limitations under the License.
    # -----------------------------------------------------------------------

    ENFORCER_PORT="${ENFORCER_PORT:-8081}"
    grpc_health_probe -addr "127.0.0.1:${ENFORCER_PORT}" \
        -tls \
        -tls-ca-cert "${ENFORCER_PUBLIC_CERT_PATH}" \
        -tls-client-cert "${ENFORCER_PUBLIC_CERT_PATH}" \
        -tls-client-key "${ENFORCER_PRIVATE_KEY_PATH}" \
        -tls-server-name enforcer \
        -connect-timeout=3s
---
# Source: apk-helm/templates/data-plane/gateway-components/log-conf.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-apk-helm-wso2-apk-log-conf
  namespace: default
data:
  config.toml: | 
    [adapter]
        
      

    

    
    [router.ratelimit]
      
      host = "my-apk-helm-wso2-apk-ratelimiter-service.default.svc"
      
      enabled = true
      keyFilePath = "/home/wso2/security/keystore/router.key"
      certFilePath = "/home/wso2/security/keystore/router.crt"
      caCertFilePath = "/home/wso2/security/truststore/ratelimiter.crt"
      sslCertSANHostname = "ratelimiter"
      requestTimeoutInMillis = 80
      failureModeDeny = false
    

    [enforcer]
    

    

    [enforcer.jwtGenerator]
      publicCertificatePath = "/home/wso2/security/truststore/mg.pem"
      privateKeyPath = "/home/wso2/security/keystore/mg.key"

    [enforcer.metrics]
      enabled = false
    
    

    

  log_config.toml: |
    # The logging configuration for Adapter

    ## Adapter root Level configurations
    logLevel = "INFO" # LogLevels can be "DEBG", "FATL", "ERRO", "WARN", "INFO", "PANC"
    LogFormat = "TEXT" # Values can be "JSON", "TEXT"

    [rotation]
    MaxSize = 10    # In MegaBytes (MB)
    MaxBackups = 3
    MaxAge =  2   # In days
    Compress = true

    ## Adapter package Level configurations

    [[pkg]]
    name = "github.com/wso2/apk/adapter/internal/adapter"
    logLevel = "INFO" # LogLevels can be "DEBG", "FATL", "ERRO", "WARN", "INFO", "PANC"

    [[pkg]]
    name = "github.com/wso2/apk/adapter/internal/oasparser"
    logLevel = "INFO"


    # The logging configuration for Router
    [wireLogs]
    enable = false
    include = ["Headers", "Body", "Trailers"]
    [accessLogs]
    enable = false
    format = "[%START_TIME%] '%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)% %PROTOCOL%' %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% '%REQ(X-FORWARDED-FOR)%' '%REQ(USER-AGENT)%' '%REQ(X-REQUEST-ID)%' '%REQ(:AUTHORITY)%' '%UPSTREAM_HOST%'\n"

  log4j2.properties: |
    monitorInterval=20

    appenders = ENFORCER_CONSOLE

    appender.ENFORCER_CONSOLE.type = Console
    appender.ENFORCER_CONSOLE.name = ENFORCER_CONSOLE
    appender.ENFORCER_CONSOLE.layout.type = PatternLayout
    appender.ENFORCER_CONSOLE.layout.pattern = [%d{DEFAULT}][TRACE_ID: %X{traceId}][API_UUID: %X{API_UUID}]%x %5p - {%c} - \%m [%errorDetails]%n
    appender.ENFORCER_CONSOLE.filter.threshold.type = ThresholdFilter
    appender.ENFORCER_CONSOLE.filter.threshold.level = DEBUG

    loggers = reporter, enforcer, io-swagger-v3, enforcer-interceptors

    logger.reporter.name = org.wso2.am.analytics.publisher.reporter.elk
    logger.reporter.level = INFO
    logger.reporter.additivity = false
    logger.reporter.appenderRef.console.ref = ENFORCER_CONSOLE

    # Log access log to console
    logger.enforcer-interceptors.name = org.wso2.apk.enforcer.grpc.interceptors
    # Change the log level into DEBUG to view the access logs.
    logger.enforcer-interceptors.level = INFO 
    logger.enforcer-interceptors.additivity = false
    logger.enforcer-interceptors.appenderRef.console.ref = ENFORCER_CONSOLE

    # Log to console 
    logger.enforcer.name = org.wso2.apk.enforcer
    logger.enforcer.level = INFO 
    logger.enforcer.additivity = false
    logger.enforcer.appenderRef.console.ref = ENFORCER_CONSOLE

    logger.io-swagger-v3.name = io.swagger.v3.parser
    logger.io-swagger-v3.level = ERROR
    logger.io-swagger-v3.additivity = false
    logger.io-swagger-v3.appenderRef.console.ref = ENFORCER_CONSOLE

    rootLogger.level = ERROR
    rootLogger.appenderRef.ENFORCER_CONSOLE.ref = ENFORCER_CONSOLE
---
# Source: apk-helm/templates/idp/idp-ds/idp-ds-configmap.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-apk-helm-wso2-apk-idp-ds-configmap
  namespace: default
data:
  Config.toml: |
    [ballerina.log]
    level = "INFO"
    [ballerina.http]
    traceLogConsole = false
     
    # Sample configurations      
    [wso2.idp_domain_service.datasourceConfiguration]
    description = "Database for idp"
    url = "jdbc:postgresql://wso2apk-db-service:5432/WSO2AM_DB"
    host = "wso2apk-db-service"
    port = 5432
    databaseName = "WSO2AM_DB"
    username = "wso2carbon"
    validationTimeout = 250
    testQuery = "SELECT 1"
    driver = "org.postgresql.Driver"
    [wso2.idp_domain_service.idpConfiguration]
    hostname = "idp.am.wso2.com"
    loginPageURl = "https://idp.am.wso2.com:9095/authenticationEndpoint/login"
    loginErrorPageUrl = "https://idp.am.wso2.com:9095/authenticationEndpoint/error"
    loginCallBackURl = "https://idp.am.wso2.com:9095/authenticationEndpoint/login-callback"
    [wso2.idp_domain_service.idpConfiguration.tokenIssuerConfiguration]
    issuer = "https://idp.am.wso2.com/token"
    keyId="gateway_certificate_alias"
    [[wso2.idp_domain_service.idpConfiguration.fileBaseApp]]
    clientId = "45f1c5c8-a92e-11ed-afa1-0242ac120002"
    clientSecret = "4fbd62ec-a92e-11ed-afa1-0242ac120002"
    callbackUrls = ["http://httpbin.org"]
    grantTypes = ["client_credentials","refresh_token", "authorization_code"]

    [[wso2.idp_domain_service.idpConfiguration.user]]
    username = "org1user"
    password = "org1user"
    organizations = ["org1"]

    [[wso2.idp_domain_service.idpConfiguration.user]]
    username = "org2user"
    password = "org2user"
    organizations = ["org2"]

    [[wso2.idp_domain_service.idpConfiguration.user]]
    username = "org2user"
    password = "org2user"
    organizations = ["org2"]

    [[wso2.idp_domain_service.idpConfiguration.user]]
    username = "multiorguser"
    password = "multiorguser"
    organizations = ["org1","org2"]

    [[wso2.idp_domain_service.idpConfiguration.user]]
    username = "superAdmin"
    password = "superAdmin"
    organizations = [""]
    superAdmin = true
    [wso2.idp_domain_service.idpConfiguration.keyStores.tls]
    keyFile = "/home/wso2apk/idp/security/idp.key"
    certFile = "/home/wso2apk/idp/security/idp.crt"
---
# Source: apk-helm/templates/postgres/initdb-conf.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.


apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-initdb-scripts-configmap
  namespace: default
data:
  setup1.sql: |
    CREATE DATABASE WSO2AM_DB;
    GRANT ALL PRIVILEGES ON DATABASE "WSO2AM_DB" TO wso2carbon;
    \c "WSO2AM_DB"
        BEGIN TRANSACTION;
        
        CREATE TABLE IF NOT EXISTS INTERNAL_USER (
        UUID VARCHAR(100) NOT NULL,
        IDP_USER_NAME VARCHAR(255) NOT NULL,
        PRIMARY KEY (UUID),
        UNIQUE (IDP_USER_NAME)
        );
        
        CREATE TABLE IF NOT EXISTS APPLICATION (
        NAME VARCHAR(100),
        USER_UUID VARCHAR(100),
        APPLICATION_TIER VARCHAR(50) DEFAULT 'Unlimited',
        CALLBACK_URL VARCHAR(512),
        DESCRIPTION VARCHAR(512),
        APPLICATION_STATUS VARCHAR(50) DEFAULT 'APPROVED',
        GROUP_ID VARCHAR(100),
        CREATED_BY VARCHAR(100),
        CREATED_TIME TIMESTAMP,
        UPDATED_BY VARCHAR(100),
        UPDATED_TIME TIMESTAMP,
        UUID VARCHAR(256),
        TOKEN_TYPE VARCHAR(10),
        ORGANIZATION VARCHAR(100),
        FOREIGN KEY(USER_UUID) REFERENCES INTERNAL_USER(UUID) ON UPDATE CASCADE ON DELETE RESTRICT,
        PRIMARY KEY(UUID),
        UNIQUE(NAME,USER_UUID,ORGANIZATION)
        );
        
        CREATE TABLE IF NOT EXISTS API (
        UUID VARCHAR(256),
        API_NAME VARCHAR(256),
        API_VERSION VARCHAR(30),
        CONTEXT VARCHAR(256),
        CONTEXT_TEMPLATE VARCHAR(256),
        API_TIER VARCHAR(256),
        API_TYPE VARCHAR(10),
        ORGANIZATION VARCHAR(100),
        GATEWAY_VENDOR VARCHAR(100) DEFAULT 'wso2',
        CREATED_BY VARCHAR(100),
        CREATED_TIME TIMESTAMP,
        UPDATED_BY VARCHAR(100),
        UPDATED_TIME TIMESTAMP,
        STATUS VARCHAR(30),
        VERSION_COMPARABLE VARCHAR(15),
        LOG_LEVEL VARCHAR(255) DEFAULT 'OFF',
        REVISIONS_CREATED INTEGER DEFAULT 0,
        SDK JSONB,
        CATEGORIES JSONB,
        ARTIFACT JSONB NOT NULL,
        DEFAULT_API_VERSION VARCHAR(30),
        PRIMARY KEY(UUID),
        UNIQUE(API_NAME,API_VERSION,ORGANIZATION)
        );
        
        CREATE TABLE API_ARTIFACT (
        ORGANIZATION VARCHAR(100) NOT NULL,
        API_UUID VARCHAR(256) NOT NULL,
        API_DEFINITION BYTEA,
        MEDIA_TYPE VARCHAR(100),
        FOREIGN KEY(API_UUID) REFERENCES API(UUID) ON UPDATE CASCADE ON DELETE CASCADE
        );
        
        CREATE SEQUENCE RESOURCE_CATEGORIES_seq;
        CREATE TABLE RESOURCE_CATEGORIES (
        RESOURCE_CATEGORY_ID INTEGER DEFAULT NEXTVAL ('RESOURCE_CATEGORIES_seq'),
        RESOURCE_CATEGORY VARCHAR(255),
        PRIMARY KEY (RESOURCE_CATEGORY_ID),
        UNIQUE (RESOURCE_CATEGORY)
        );
        
        CREATE TABLE API_RESOURCES (
        UUID VARCHAR(255),
        API_UUID VARCHAR(256),
        RESOURCE_CATEGORY_ID INTEGER,
        DATA_TYPE VARCHAR(255),
        RESOURCE_CONTENT TSVECTOR,
        RESOURCE_BINARY_VALUE BYTEA,
        CREATED_BY VARCHAR(100),
        CREATED_TIME TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
        UPDATED_BY VARCHAR(100),
        LAST_UPDATED_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        PRIMARY KEY(UUID),
        FOREIGN KEY(API_UUID) REFERENCES API(UUID) ON
        UPDATE CASCADE ON DELETE CASCADE,
        FOREIGN KEY (RESOURCE_CATEGORY_ID) REFERENCES RESOURCE_CATEGORIES(RESOURCE_CATEGORY_ID)
        );
        
        CREATE TABLE API_DOC_META_DATA(
        UUID VARCHAR(255),
        RESOURCE_UUID VARCHAR(255),
        API_UUID VARCHAR(256),
        NAME VARCHAR(255),
        SUMMARY VARCHAR(1024),
        TYPE VARCHAR(255),
        OTHER_TYPE_NAME VARCHAR(255),
        SOURCE_URL VARCHAR(255),
        FILE_NAME VARCHAR(255),
        SOURCE_TYPE VARCHAR(255),
        VISIBILITY VARCHAR(30),
        CREATED_BY VARCHAR(100),
        CREATED_TIME TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
        UPDATED_BY VARCHAR(100),
        LAST_UPDATED_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        PRIMARY KEY(UUID),
        FOREIGN KEY(API_UUID) REFERENCES API(UUID) ON
        UPDATE CASCADE ON DELETE CASCADE,
        FOREIGN KEY(RESOURCE_UUID) REFERENCES API_RESOURCES(UUID) ON
        UPDATE CASCADE ON DELETE CASCADE
        );
        
        CREATE SEQUENCE API_URL_MAPPING_SEQUENCE START WITH 1 INCREMENT BY 1;
        CREATE TABLE IF NOT EXISTS API_URL_MAPPING (
        URL_MAPPING_ID INTEGER DEFAULT nextval('api_url_mapping_sequence'),
        API_UUID VARCHAR(256) NOT NULL,
        HTTP_METHOD VARCHAR(20) NULL,
        AUTH_SCHEME VARCHAR(50) NULL,
        URL_PATTERN VARCHAR(512) NULL,
        THROTTLING_TIER_UNIT_TIME VARCHAR(255) DEFAULT NULL,
        THROTTLING_TIER_UNIT_VALUE VARCHAR(255) DEFAULT NULL,
        PRIMARY KEY(URL_MAPPING_ID),
        FOREIGN KEY(API_UUID) REFERENCES API(UUID) ON UPDATE CASCADE ON DELETE CASCADE
        );
        
        CREATE TABLE IF NOT EXISTS API_RESOURCE_SCOPE_MAPPING (
        SCOPE_NAME VARCHAR(256) NOT NULL,
        URL_MAPPING_ID INTEGER NOT NULL,
        FOREIGN KEY(URL_MAPPING_ID) REFERENCES API_URL_MAPPING(URL_MAPPING_ID) ON DELETE CASCADE,
        PRIMARY KEY(SCOPE_NAME, URL_MAPPING_ID)
        );
        
        CREATE TABLE IF NOT EXISTS SUBSCRIPTION (
        UUID VARCHAR(256),
        TIER_ID VARCHAR(50),
        TIER_ID_PENDING VARCHAR(50),
        API_UUID VARCHAR(256),
        LAST_ACCESSED TIMESTAMP NULL,
        APPLICATION_UUID VARCHAR(256),
        SUB_STATUS VARCHAR(50),
        SUBS_CREATE_STATE VARCHAR(50) DEFAULT 'SUBSCRIBE',
        CREATED_BY VARCHAR(100),
        CREATED_TIME TIMESTAMP,
        UPDATED_BY VARCHAR(100),
        UPDATED_TIME TIMESTAMP,
        FOREIGN KEY(APPLICATION_UUID) REFERENCES APPLICATION(UUID) ON UPDATE CASCADE ON DELETE CASCADE,
        FOREIGN KEY(API_UUID) REFERENCES API(UUID) ON
        UPDATE CASCADE ON DELETE CASCADE,
        PRIMARY KEY (UUID)
        );
        
        CREATE TABLE APPLICATION_KEY_MAPPING (
        UUID VARCHAR(100),
        APPLICATION_UUID VARCHAR(256),
        CONSUMER_KEY VARCHAR(512),
        KEY_TYPE VARCHAR(512) NOT NULL,
        CREATE_MODE VARCHAR(30) DEFAULT 'CREATED',
        APP_INFO BYTEA DEFAULT NULL,
        KEY_MANAGER_UUID VARCHAR(100),
        FOREIGN KEY(APPLICATION_UUID) REFERENCES APPLICATION(UUID) ON UPDATE CASCADE ON DELETE CASCADE,
        -- FOREIGN KEY(KEY_MANAGER_UUID) REFERENCES KEY_MANAGER(UUID) ON UPDATE CASCADE ON DELETE CASCADE, --
        PRIMARY KEY(APPLICATION_UUID,KEY_TYPE,KEY_MANAGER_UUID)
        );
        
        CREATE SEQUENCE API_LC_EVENT_SEQUENCE START WITH 1 INCREMENT BY 1;
        CREATE TABLE IF NOT EXISTS API_LC_EVENT (
        EVENT_ID INTEGER DEFAULT nextval('api_lc_event_sequence'),
        API_UUID VARCHAR(256) NOT NULL,
        PREVIOUS_STATE VARCHAR(50),
        NEW_STATE VARCHAR(50) NOT NULL,
        USER_UUID VARCHAR(100) NOT NULL,
        ORGANIZATION VARCHAR(100) NOT NULL,
        EVENT_DATE TIMESTAMP NOT NULL,
        FOREIGN KEY(API_UUID) REFERENCES API(UUID) ON
        UPDATE CASCADE ON DELETE CASCADE,
        FOREIGN KEY(USER_UUID) REFERENCES INTERNAL_USER(UUID) ON UPDATE CASCADE ON DELETE CASCADE,
        PRIMARY KEY (EVENT_ID)
        );
        
        CREATE TABLE IF NOT EXISTS API_COMMENTS (
        COMMENT_ID VARCHAR(64) NOT NULL,
        COMMENT_TEXT VARCHAR(512),
        CREATED_BY VARCHAR(255),
        CREATED_TIME TIMESTAMP NOT NULL,
        UPDATED_TIME TIMESTAMP,
        API_UUID VARCHAR(256),
        PARENT_COMMENT_ID VARCHAR(64) DEFAULT NULL,
        ENTRY_POINT VARCHAR(20),
        CATEGORY VARCHAR(20) DEFAULT 'general',
        FOREIGN KEY(API_UUID) REFERENCES API(UUID) ON DELETE CASCADE,
        FOREIGN KEY(PARENT_COMMENT_ID) REFERENCES API_COMMENTS(COMMENT_ID),
        PRIMARY KEY(COMMENT_ID)
        );
        
        CREATE TABLE IF NOT EXISTS API_RATINGS (
        RATING_UUID VARCHAR(255) NOT NULL,
        API_UUID VARCHAR(256),
        RATING INTEGER,
        USER_UUID VARCHAR(100),
        FOREIGN KEY(API_UUID) REFERENCES API(UUID) ON UPDATE CASCADE ON DELETE CASCADE,
        FOREIGN KEY(USER_UUID) REFERENCES INTERNAL_USER(UUID) ON
        UPDATE CASCADE ON DELETE RESTRICT,
        PRIMARY KEY (RATING_UUID)
        );
        
        CREATE TABLE IF NOT EXISTS BUSINESS_PLAN (
        UUID VARCHAR(256),
        NAME VARCHAR(512) NOT NULL,
        DISPLAY_NAME VARCHAR(512) NULL DEFAULT NULL,
        ORGANIZATION VARCHAR(100) NOT NULL,
        DESCRIPTION VARCHAR(1024) NULL DEFAULT NULL,
        QUOTA_TYPE VARCHAR(25) NOT NULL,
        QUOTA INTEGER NOT NULL,
        QUOTA_UNIT VARCHAR(10) NULL,
        UNIT_TIME INTEGER NOT NULL,
        TIME_UNIT VARCHAR(25) NOT NULL,
        RATE_LIMIT_COUNT INTEGER NULL DEFAULT NULL,
        RATE_LIMIT_TIME_UNIT VARCHAR(25) NULL DEFAULT NULL,
        IS_DEPLOYED BOOLEAN NOT NULL DEFAULT '0',
        CUSTOM_ATTRIBUTES BYTEA DEFAULT NULL,
        STOP_ON_QUOTA_REACH BOOLEAN NOT NULL DEFAULT '0',
        BILLING_PLAN VARCHAR(20) NOT NULL,
        MONETIZATION_PLAN VARCHAR(25) NULL DEFAULT NULL,
        FIXED_RATE VARCHAR(15) NULL DEFAULT NULL,
        BILLING_CYCLE VARCHAR(15) NULL DEFAULT NULL,
        PRICE_PER_REQUEST VARCHAR(15) NULL DEFAULT NULL,
        CURRENCY VARCHAR(15) NULL DEFAULT NULL,
        MAX_COMPLEXITY INTEGER NOT NULL DEFAULT 0,
        MAX_DEPTH INTEGER NOT NULL DEFAULT 0,
        CONNECTIONS_COUNT INTEGER NOT NULL DEFAULT 0,
        PRIMARY KEY(UUID),
        UNIQUE(NAME, ORGANIZATION)
        );
        
        CREATE TABLE IF NOT EXISTS APPLICATION_USAGE_PLAN (
        NAME VARCHAR(512) NOT NULL,
        DISPLAY_NAME VARCHAR(512) NULL DEFAULT NULL,
        ORGANIZATION VARCHAR(100) NOT NULL,
        DESCRIPTION VARCHAR(1024) NULL DEFAULT NULL,
        QUOTA_TYPE VARCHAR(25) NOT NULL,
        QUOTA INTEGER NOT NULL,
        QUOTA_UNIT VARCHAR(10) NULL DEFAULT NULL,
        UNIT_TIME INTEGER NOT NULL,
        TIME_UNIT VARCHAR(25) NOT NULL,
        IS_DEPLOYED BOOLEAN NOT NULL DEFAULT '0',
        CUSTOM_ATTRIBUTES BYTEA DEFAULT NULL,
        UUID VARCHAR(256),
        PRIMARY KEY(UUID),
        UNIQUE(NAME, ORGANIZATION)
        );
        
        CREATE TABLE BLOCK_CONDITION (
        TYPE varchar(45) DEFAULT NULL,
        BLOCK_CONDITION varchar(512) DEFAULT NULL,
        ENABLED varchar(45) DEFAULT NULL,
        ORGANIZATION varchar(100) DEFAULT NULL,
        UUID VARCHAR(256),
        PRIMARY KEY (UUID)
        );
        
        CREATE TABLE APPLICATION_GROUP_MAPPING (
        APPLICATION_UUID VARCHAR(256) NOT NULL,
        GROUP_ID VARCHAR(512) NOT NULL,
        ORGANIZATION VARCHAR(100) DEFAULT NULL,
        PRIMARY KEY (APPLICATION_UUID,GROUP_ID,ORGANIZATION),
        FOREIGN KEY (APPLICATION_UUID) REFERENCES APPLICATION(UUID) ON DELETE CASCADE ON UPDATE CASCADE
        );
        
        CREATE TABLE IF NOT EXISTS APPLICATION_ATTRIBUTES (
        APPLICATION_UUID VARCHAR(256) NOT NULL,
        NAME VARCHAR(255) NOT NULL,
        APP_ATTRIBUTE VARCHAR(1024) NOT NULL,
        ORGANIZATION VARCHAR(100) NOT NULL,
        PRIMARY KEY(APPLICATION_UUID,NAME),
        FOREIGN KEY(APPLICATION_UUID) REFERENCES APPLICATION(UUID) ON
        DELETE CASCADE ON UPDATE CASCADE
        );
        
        CREATE TABLE IF NOT EXISTS API_CATEGORIES (
        UUID VARCHAR(50),
        NAME VARCHAR(255),
        DESCRIPTION VARCHAR(1024),
        ORGANIZATION VARCHAR(100),
        UNIQUE(NAME,ORGANIZATION),
        PRIMARY KEY(UUID)
        );

        CREATE TABLE IF NOT EXISTS ORGANIZATION (
        UUID VARCHAR(50),
        NAME VARCHAR(255),
        DISPLAY_NAME VARCHAR(255),
        STATUS BOOLEAN NOT NULL DEFAULT 'TRUE',
        NAMESPACE JSONB,
        WORKFLOWS BYTEA,
        UNIQUE(NAME),
        PRIMARY KEY(UUID)
        );

        CREATE TABLE IF NOT EXISTS ORGANIZATION_CLAIM_MAPPING (
        UUID VARCHAR(50),
        CLAIM_KEY VARCHAR(255),
        CLAIM_VALUE VARCHAR(255),
        FOREIGN KEY(UUID) REFERENCES ORGANIZATION(UUID) ON UPDATE CASCADE ON DELETE CASCADE,
        UNIQUE(UUID,CLAIM_KEY)
        );

        CREATE TABLE IF NOT EXISTS ORGANIZATION_VHOST (
        UUID VARCHAR(50),
        VHOST VARCHAR(255),
        TYPE VARCHAR(50),
        FOREIGN KEY(UUID) REFERENCES ORGANIZATION(UUID) ON UPDATE CASCADE ON DELETE CASCADE,
        UNIQUE(UUID, VHOST, TYPE)
        );

        CREATE TABLE IF NOT EXISTS WORKFLOWS(
        UUID VARCHAR(255) NOT NULL ,
        WF_REFERENCE VARCHAR(255) NOT NULL,
        WF_TYPE VARCHAR(255) NOT NULL,
        WF_STATUS VARCHAR(255) NOT NULL,
        WF_CREATED_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        WF_UPDATED_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
        ORGANIZATION VARCHAR(255),
        PRIMARY KEY (UUID)
        );
        
        CREATE TABLE IF NOT EXISTS KEY_MANAGER (
        UUID VARCHAR(100) NOT NULL,
        NAME VARCHAR(100) NULL,
        DISPLAY_NAME VARCHAR(100) NULL,
        ISSUER VARCHAR(100) NOT NULL,
        DESCRIPTION VARCHAR(256) NULL,
        TYPE VARCHAR(45) NULL,
        CONFIGURATION BYTEA NULL,
        ENABLED BOOLEAN DEFAULT '1',
        ORGANIZATION VARCHAR(100) NULL,
        PRIMARY KEY(UUID),
        UNIQUE(NAME,ORGANIZATION)
        );
        
        -- End of APK Tables --
        
        -- Performance indexes start--
        
        create index IDX_AI_CTX on API (CONTEXT);
        create index IDX_AI_ORG on API (ORGANIZATION);
        create index IDX_AKM_CK on APPLICATION_KEY_MAPPING (CONSUMER_KEY);
        create index IDX_AUM_AI on API_URL_MAPPING (API_UUID);
        -- create index IDX_AUM_TT on API_URL_MAPPING (THROTTLING_TIER); --
        create index IDX_BP_QT on BUSINESS_PLAN (QUOTA_TYPE);
        create index IDX_S_AITIAI on SUBSCRIPTION (API_UUID,TIER_ID,APPLICATION_UUID);
        create index IDX_AUP_QT on APPLICATION_USAGE_PLAN (QUOTA_TYPE);
        create index IDX_A_AT_CB on APPLICATION (APPLICATION_TIER,CREATED_BY);
        create index IDX_SUB_APP_ID on SUBSCRIPTION (APPLICATION_UUID, UUID);
        
        GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO wso2carbon;
        GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO wso2carbon;
        GRANT ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA public TO wso2carbon;

        -- Insert Initial APK data ---
        INSERT INTO RESOURCE_CATEGORIES (RESOURCE_CATEGORY) VALUES ('Thumbnail');
        INSERT INTO RESOURCE_CATEGORIES (RESOURCE_CATEGORY) VALUES ('Document');
        -- End Insert Initial APK data  

        -- Insert Demo APK data ---
        INSERT INTO INTERNAL_USER(uuid, IDP_USER_NAME) VALUES ( 'apkuser', 'apkuser');
        INSERT INTO organization(uuid, name, display_name, status, workflows) VALUES ( 'a3b58ccf-6ecc-4557-b5bb-0a35cce38256', 'default', 'default', true, '');
        INSERT INTO organization_claim_mapping(uuid, claim_key, claim_value) VALUES ( 'a3b58ccf-6ecc-4557-b5bb-0a35cce38256', 'organizationClaimValue', 'default');
        -- End Insert Demo APK data    
        -- Insert Non Prod IDP table --
        CREATE TABLE CONSUMER_APPS (
          CONSUMER_KEY VARCHAR(255),
          CONSUMER_SECRET VARCHAR(2048),
          APP_NAME VARCHAR(255),
          CALLBACK_URL VARCHAR(2048),
          GRANT_TYPES VARCHAR (1024),
          CONSTRAINT CONSUMER_KEY_CONSTRAINT UNIQUE (CONSUMER_KEY),
          PRIMARY KEY (CONSUMER_KEY)
        );    
        -- End of Non Prod IDP table --
        commit;
---
# Source: apk-helm/templates/crds/dp.wso2.com_apipolicies.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
    cert-manager.io/inject-ca-from: default/my-apk-helm-wso2-apk-common-controller-server-cert
  name: apipolicies.dp.wso2.com
spec:
  conversion:
      strategy: Webhook
      webhook:
        clientConfig:
          service:
            name: my-apk-helm-wso2-apk-common-controller-service
            namespace: default
            path: /convert
        conversionReviewVersions:
        - v1
  group: dp.wso2.com
  names:
    kind: APIPolicy
    listKind: APIPolicyList
    plural: apipolicies
    singular: apipolicy
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: APIPolicy is the Schema for the apipolicies API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: APIPolicySpec defines the desired state of APIPolicy
            properties:
              default:
                description: PolicySpec contains API policies
                properties:
                  backendJwtPolicy:
                    description: BackendJWTPolicy holds reference to backendJWT policy
                      configurations
                    properties:
                      name:
                        description: Name holds the name of the BackendJWT resource.
                        type: string
                    type: object
                  cORSPolicy:
                    description: CORS policy to be applied to the API.
                    properties:
                      accessControlAllowCredentials:
                        description: AllowCredentials indicates whether the request
                          can include user credentials like cookies, HTTP authentication
                          or client side SSL certificates.
                        type: boolean
                      accessControlAllowHeaders:
                        description: AccessControlAllowHeaders indicates which headers
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlAllowMethods:
                        description: AccessControlAllowMethods indicates which methods
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlAllowOrigins:
                        description: AccessControlAllowOrigins indicates which origins
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlExposeHeaders:
                        description: AccessControlExposeHeaders indicates which headers
                          can be exposed as part of the response by listing their
                          names.
                        items:
                          type: string
                        type: array
                      accessControlMaxAge:
                        description: AccessControlMaxAge indicates how long the results
                          of a preflight request can be cached in a preflight result
                          cache.
                        type: integer
                    type: object
                  requestInterceptors:
                    description: RequestInterceptors referenced to intercetor services
                      to be applied to the request flow.
                    items:
                      description: InterceptorReference holds InterceptorService reference
                        using name and namespace
                      properties:
                        name:
                          description: Name is the referced CR's name of InterceptorService
                            resource.
                          type: string
                      required:
                      - name
                      type: object
                    maxItems: 1
                    nullable: true
                    type: array
                  responseInterceptors:
                    description: ResponseInterceptors referenced to intercetor services
                      to be applied to the response flow.
                    items:
                      description: InterceptorReference holds InterceptorService reference
                        using name and namespace
                      properties:
                        name:
                          description: Name is the referced CR's name of InterceptorService
                            resource.
                          type: string
                      required:
                      - name
                      type: object
                    maxItems: 1
                    nullable: true
                    type: array
                type: object
              override:
                description: PolicySpec contains API policies
                properties:
                  backendJwtPolicy:
                    description: BackendJWTPolicy holds reference to backendJWT policy
                      configurations
                    properties:
                      name:
                        description: Name holds the name of the BackendJWT resource.
                        type: string
                    type: object
                  cORSPolicy:
                    description: CORS policy to be applied to the API.
                    properties:
                      accessControlAllowCredentials:
                        description: AllowCredentials indicates whether the request
                          can include user credentials like cookies, HTTP authentication
                          or client side SSL certificates.
                        type: boolean
                      accessControlAllowHeaders:
                        description: AccessControlAllowHeaders indicates which headers
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlAllowMethods:
                        description: AccessControlAllowMethods indicates which methods
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlAllowOrigins:
                        description: AccessControlAllowOrigins indicates which origins
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlExposeHeaders:
                        description: AccessControlExposeHeaders indicates which headers
                          can be exposed as part of the response by listing their
                          names.
                        items:
                          type: string
                        type: array
                      accessControlMaxAge:
                        description: AccessControlMaxAge indicates how long the results
                          of a preflight request can be cached in a preflight result
                          cache.
                        type: integer
                    type: object
                  requestInterceptors:
                    description: RequestInterceptors referenced to intercetor services
                      to be applied to the request flow.
                    items:
                      description: InterceptorReference holds InterceptorService reference
                        using name and namespace
                      properties:
                        name:
                          description: Name is the referced CR's name of InterceptorService
                            resource.
                          type: string
                      required:
                      - name
                      type: object
                    maxItems: 1
                    nullable: true
                    type: array
                  responseInterceptors:
                    description: ResponseInterceptors referenced to intercetor services
                      to be applied to the response flow.
                    items:
                      description: InterceptorReference holds InterceptorService reference
                        using name and namespace
                      properties:
                        name:
                          description: Name is the referced CR's name of InterceptorService
                            resource.
                          type: string
                      required:
                      - name
                      type: object
                    maxItems: 1
                    nullable: true
                    type: array
                type: object
              targetRef:
                description: PolicyTargetReference identifies an API object to apply
                  a direct or inherited policy to. This should be used as part of
                  Policy resources that can target Gateway API resources. For more
                  information on how this policy attachment model works, and a sample
                  Policy resource, refer to the policy attachment documentation for
                  Gateway API.
                properties:
                  group:
                    description: Group is the group of the target resource.
                    maxLength: 253
                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: Kind is kind of the target resource.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: Name is the name of the target resource.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: Namespace is the namespace of the referent. When
                      unspecified, the local namespace is inferred. Even when policy
                      targets a resource in a different namespace, it MUST only apply
                      to traffic originating from the same namespace as the policy.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - group
                - kind
                - name
                type: object
            type: object
          status:
            description: APIPolicyStatus defines the observed state of APIPolicy
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: APIPolicy is the Schema for the apipolicies API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: APIPolicySpec defines the desired state of APIPolicy
            properties:
              default:
                description: PolicySpec contains API policies
                properties:
                  backendJwtPolicy:
                    description: BackendJWTPolicy holds reference to backendJWT policy
                      configurations
                    properties:
                      name:
                        description: Name holds the name of the BackendJWT resource.
                        type: string
                    type: object
                  cORSPolicy:
                    description: CORS policy to be applied to the API.
                    properties:
                      accessControlAllowCredentials:
                        description: AllowCredentials indicates whether the request
                          can include user credentials like cookies, HTTP authentication
                          or client side SSL certificates.
                        type: boolean
                      accessControlAllowHeaders:
                        description: AccessControlAllowHeaders indicates which headers
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlAllowMethods:
                        description: AccessControlAllowMethods indicates which methods
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlAllowOrigins:
                        description: AccessControlAllowOrigins indicates which origins
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlExposeHeaders:
                        description: AccessControlExposeHeaders indicates which headers
                          can be exposed as part of the response by listing their
                          names.
                        items:
                          type: string
                        type: array
                      accessControlMaxAge:
                        description: AccessControlMaxAge indicates how long the results
                          of a preflight request can be cached in a preflight result
                          cache.
                        type: integer
                      enabled:
                        default: true
                        description: Enabled is to enable CORs policy for the API.
                        type: boolean
                    type: object
                  requestInterceptors:
                    description: RequestInterceptors referenced to intercetor services
                      to be applied to the request flow.
                    items:
                      description: InterceptorReference holds InterceptorService reference
                        using name and namespace
                      properties:
                        name:
                          description: Name is the referced CR's name of InterceptorService
                            resource.
                          type: string
                      required:
                      - name
                      type: object
                    maxItems: 1
                    nullable: true
                    type: array
                  responseInterceptors:
                    description: ResponseInterceptors referenced to intercetor services
                      to be applied to the response flow.
                    items:
                      description: InterceptorReference holds InterceptorService reference
                        using name and namespace
                      properties:
                        name:
                          description: Name is the referced CR's name of InterceptorService
                            resource.
                          type: string
                      required:
                      - name
                      type: object
                    maxItems: 1
                    nullable: true
                    type: array
                  subscriptionValidation:
                    default: false
                    description: SubscriptionValidation denotes whether subscription
                      validation is enabled for the API
                    type: boolean
                type: object
              override:
                description: PolicySpec contains API policies
                properties:
                  backendJwtPolicy:
                    description: BackendJWTPolicy holds reference to backendJWT policy
                      configurations
                    properties:
                      name:
                        description: Name holds the name of the BackendJWT resource.
                        type: string
                    type: object
                  cORSPolicy:
                    description: CORS policy to be applied to the API.
                    properties:
                      accessControlAllowCredentials:
                        description: AllowCredentials indicates whether the request
                          can include user credentials like cookies, HTTP authentication
                          or client side SSL certificates.
                        type: boolean
                      accessControlAllowHeaders:
                        description: AccessControlAllowHeaders indicates which headers
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlAllowMethods:
                        description: AccessControlAllowMethods indicates which methods
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlAllowOrigins:
                        description: AccessControlAllowOrigins indicates which origins
                          can be used during the actual request.
                        items:
                          type: string
                        type: array
                      accessControlExposeHeaders:
                        description: AccessControlExposeHeaders indicates which headers
                          can be exposed as part of the response by listing their
                          names.
                        items:
                          type: string
                        type: array
                      accessControlMaxAge:
                        description: AccessControlMaxAge indicates how long the results
                          of a preflight request can be cached in a preflight result
                          cache.
                        type: integer
                      enabled:
                        default: true
                        description: Enabled is to enable CORs policy for the API.
                        type: boolean
                    type: object
                  requestInterceptors:
                    description: RequestInterceptors referenced to intercetor services
                      to be applied to the request flow.
                    items:
                      description: InterceptorReference holds InterceptorService reference
                        using name and namespace
                      properties:
                        name:
                          description: Name is the referced CR's name of InterceptorService
                            resource.
                          type: string
                      required:
                      - name
                      type: object
                    maxItems: 1
                    nullable: true
                    type: array
                  responseInterceptors:
                    description: ResponseInterceptors referenced to intercetor services
                      to be applied to the response flow.
                    items:
                      description: InterceptorReference holds InterceptorService reference
                        using name and namespace
                      properties:
                        name:
                          description: Name is the referced CR's name of InterceptorService
                            resource.
                          type: string
                      required:
                      - name
                      type: object
                    maxItems: 1
                    nullable: true
                    type: array
                  subscriptionValidation:
                    default: false
                    description: SubscriptionValidation denotes whether subscription
                      validation is enabled for the API
                    type: boolean
                type: object
              targetRef:
                description: PolicyTargetReference identifies an API object to apply
                  a direct or inherited policy to. This should be used as part of
                  Policy resources that can target Gateway API resources. For more
                  information on how this policy attachment model works, and a sample
                  Policy resource, refer to the policy attachment documentation for
                  Gateway API.
                properties:
                  group:
                    description: Group is the group of the target resource.
                    maxLength: 253
                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: Kind is kind of the target resource.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: Name is the name of the target resource.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: Namespace is the namespace of the referent. When
                      unspecified, the local namespace is inferred. Even when policy
                      targets a resource in a different namespace, it MUST only apply
                      to traffic originating from the same namespace as the policy.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - group
                - kind
                - name
                type: object
            type: object
          status:
            description: APIPolicyStatus defines the observed state of APIPolicy
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: apk-helm/templates/crds/dp.wso2.com_apis.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
    cert-manager.io/inject-ca-from: default/my-apk-helm-wso2-apk-common-controller-server-cert
  name: apis.dp.wso2.com
spec:
  conversion:
      strategy: Webhook
      webhook:
        clientConfig:
          service:
            name: my-apk-helm-wso2-apk-common-controller-service
            namespace: default
            path: /convert
        conversionReviewVersions:
        - v1
  group: dp.wso2.com
  names:
    kind: API
    listKind: APIList
    plural: apis
    singular: api
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.apiName
      name: API Name
      type: string
    - jsonPath: .spec.apiVersion
      name: Version
      type: string
    - jsonPath: .spec.basePath
      name: BasePath
      type: string
    - jsonPath: .spec.organization
      name: Organization
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: API is the Schema for the apis API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: APISpec defines the desired state of API
            properties:
              apiName:
                description: APIName is the unique name of the API can be used to
                  uniquely identify an API.
                maxLength: 60
                minLength: 1
                pattern: ^[^~!@#;:%^*()+={}|\<>"'',&$\[\]\/]*$
                type: string
              apiProperties:
                description: APIProperties denotes the custom properties of the API.
                items:
                  description: Property holds key value pair of APIProperties
                  properties:
                    name:
                      type: string
                    value:
                      type: string
                  type: object
                nullable: true
                type: array
              apiType:
                description: APIType denotes the type of the API. Possible values
                  could be REST, GraphQL, Async
                enum:
                - REST
                type: string
              apiVersion:
                description: APIVersion is the version number of the API.
                maxLength: 30
                minLength: 1
                pattern: ^[^~!@#;:%^*()+={}|\<>"'',&/$\[\]\s+\/]+$
                type: string
              basePath:
                description: 'BasePath denotes the basepath of the API. e.g: /pet-store-api/1.0.6'
                pattern: ^[/][a-zA-Z0-9~/_.-]*$
                type: string
              definitionFileRef:
                description: DefinitionFileRef contains the OpenAPI 3 or Swagger definition
                  of the API in a ConfigMap.
                type: string
              definitionPath:
                default: /api-definition
                description: DefinitionPath contains the path to expose the API definition.
                minLength: 1
                type: string
              isDefaultVersion:
                description: IsDefaultVersion indicates whether this API version should
                  be used as a default API
                type: boolean
              organization:
                description: Organization denotes the organization. related to the
                  API
                type: string
              production:
                description: 'Production contains a list of references to HttpRoutes
                  of type HttpRoute. xref: https://github.com/kubernetes-sigs/gateway-api/blob/main/apis/v1beta1/httproute_types.go'
                items:
                  description: EnvConfig contains the environment specific configuration
                  properties:
                    httpRouteRefs:
                      description: HTTPRouteRefs denotes the environment of the API.
                      items:
                        type: string
                      type: array
                  required:
                  - httpRouteRefs
                  type: object
                maxItems: 1
                nullable: true
                type: array
              sandbox:
                description: 'Sandbox contains a list of references to HttpRoutes
                  of type HttpRoute. xref: https://github.com/kubernetes-sigs/gateway-api/blob/main/apis/v1beta1/httproute_types.go'
                items:
                  description: EnvConfig contains the environment specific configuration
                  properties:
                    httpRouteRefs:
                      description: HTTPRouteRefs denotes the environment of the API.
                      items:
                        type: string
                      type: array
                  required:
                  - httpRouteRefs
                  type: object
                maxItems: 1
                nullable: true
                type: array
              systemAPI:
                description: SystemAPI denotes if it is an internal system API.
                type: boolean
            required:
            - apiName
            - apiType
            - apiVersion
            - basePath
            - definitionPath
            type: object
          status:
            description: APIStatus defines the observed state of API
            properties:
              deploymentStatus:
                description: DeploymentStatus denotes the deployment status of the
                  API
                properties:
                  accepted:
                    description: Accepted represents whether the API is accepted or
                      not.
                    type: boolean
                  events:
                    description: Events contains a list of events related to the API.
                    items:
                      type: string
                    type: array
                  message:
                    description: Message represents a user friendly message that explains
                      the current state of the API.
                    type: string
                  status:
                    description: Status denotes the state of the API in its lifecycle.
                      Possible values could be Accepted, Invalid, Deploy etc.
                    type: string
                  transitionTime:
                    description: TransitionTime represents the last known transition
                      timestamp.
                    format: date-time
                    type: string
                required:
                - accepted
                - status
                - transitionTime
                type: object
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .spec.apiName
      name: API Name
      type: string
    - jsonPath: .spec.apiVersion
      name: Version
      type: string
    - jsonPath: .spec.basePath
      name: BasePath
      type: string
    - jsonPath: .spec.organization
      name: Organization
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: API is the Schema for the apis API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: APISpec defines the desired state of API
            properties:
              apiName:
                description: APIName is the unique name of the API can be used to
                  uniquely identify an API.
                maxLength: 60
                minLength: 1
                pattern: ^[^~!@#;:%^*()+={}|\<>"'',&$\[\]\/]*$
                type: string
              apiProperties:
                description: APIProperties denotes the custom properties of the API.
                items:
                  description: Property holds key value pair of APIProperties
                  properties:
                    name:
                      type: string
                    value:
                      type: string
                  type: object
                nullable: true
                type: array
              apiType:
                description: APIType denotes the type of the API. Possible values
                  could be REST, GraphQL, Async
                enum:
                - REST
                - GraphQL
                type: string
              apiVersion:
                description: APIVersion is the version number of the API.
                maxLength: 30
                minLength: 1
                pattern: ^[^~!@#;:%^*()+={}|\<>"'',&/$\[\]\s+\/]+$
                type: string
              basePath:
                description: 'BasePath denotes the basepath of the API. e.g: /pet-store-api/1.0.6'
                pattern: ^[/][a-zA-Z0-9~/_.-]*$
                type: string
              definitionFileRef:
                description: DefinitionFileRef contains the definition of the API
                  in a ConfigMap.
                type: string
              definitionPath:
                default: /api-definition
                description: DefinitionPath contains the path to expose the API definition.
                minLength: 1
                type: string
              environment:
                description: Environment denotes the environment of the API.
                nullable: true
                type: string
              isDefaultVersion:
                description: IsDefaultVersion indicates whether this API version should
                  be used as a default API
                type: boolean
              organization:
                description: Organization denotes the organization. related to the
                  API
                type: string
              production:
                description: 'Production contains a list of references to HttpRoutes
                  of type HttpRoute. xref: https://github.com/kubernetes-sigs/gateway-api/blob/main/apis/v1beta1/httproute_types.go'
                items:
                  description: EnvConfig contains the environment specific configuration
                  properties:
                    routeRefs:
                      description: RouteRefs denotes the environment of the API.
                      items:
                        type: string
                      type: array
                  required:
                  - routeRefs
                  type: object
                maxItems: 1
                nullable: true
                type: array
              sandbox:
                description: 'Sandbox contains a list of references to HttpRoutes
                  of type HttpRoute. xref: https://github.com/kubernetes-sigs/gateway-api/blob/main/apis/v1beta1/httproute_types.go'
                items:
                  description: EnvConfig contains the environment specific configuration
                  properties:
                    routeRefs:
                      description: RouteRefs denotes the environment of the API.
                      items:
                        type: string
                      type: array
                  required:
                  - routeRefs
                  type: object
                maxItems: 1
                nullable: true
                type: array
              systemAPI:
                description: SystemAPI denotes if it is an internal system API.
                type: boolean
            required:
            - apiName
            - apiType
            - apiVersion
            - basePath
            - definitionPath
            type: object
          status:
            description: APIStatus defines the observed state of API
            properties:
              deploymentStatus:
                description: DeploymentStatus denotes the deployment status of the
                  API
                properties:
                  accepted:
                    description: Accepted represents whether the API is accepted or
                      not.
                    type: boolean
                  events:
                    description: Events contains a list of events related to the API.
                    items:
                      type: string
                    type: array
                  message:
                    description: Message represents a user friendly message that explains
                      the current state of the API.
                    type: string
                  status:
                    description: Status denotes the state of the API in its lifecycle.
                      Possible values could be Accepted, Invalid, Deploy etc.
                    type: string
                  transitionTime:
                    description: TransitionTime represents the last known transition
                      timestamp.
                    format: date-time
                    type: string
                required:
                - accepted
                - status
                - transitionTime
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: apk-helm/templates/crds/dp.wso2.com_authentications.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
    cert-manager.io/inject-ca-from: default/my-apk-helm-wso2-apk-common-controller-server-cert
  name: authentications.dp.wso2.com
spec:
  conversion:
      strategy: Webhook
      webhook:
        clientConfig:
          service:
            name: my-apk-helm-wso2-apk-common-controller-service
            namespace: default
            path: /convert
        conversionReviewVersions:
        - v1
  group: dp.wso2.com
  names:
    kind: Authentication
    listKind: AuthenticationList
    plural: authentications
    singular: authentication
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Authentication is the Schema for the authentications API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: AuthenticationSpec defines the desired state of Authentication
            properties:
              default:
                description: AuthSpec specification of the authentication service
                properties:
                  authTypes:
                    description: AuthTypes is to specify the authentication scheme
                      types and details
                    properties:
                      apiKey:
                        description: APIKey is to specify the APIKey authentication
                          scheme details
                        items:
                          description: APIKeyAuth APIKey Authentication scheme details
                          properties:
                            in:
                              description: In is to specify how the APIKey is passed
                                to the request
                              enum:
                              - Header
                              - Query
                              minLength: 1
                              type: string
                            name:
                              description: Name is the name of the header or query
                                parameter to be used
                              minLength: 1
                              type: string
                            sendTokenToUpstream:
                              description: SendTokenToUpstream is to specify whether
                                the APIKey should be sent to the upstream
                              type: boolean
                          type: object
                        nullable: true
                        type: array
                      oauth2:
                        description: Oauth2 is to specify the Oauth2 authentication
                          scheme details
                        properties:
                          disabled:
                            default: false
                            description: Disabled is to disable OAuth2 authentication
                            type: boolean
                          header:
                            default: authorization
                            description: Header is the header name used to pass the
                              OAuth2 token
                            type: string
                          sendTokenToUpstream:
                            description: SendTokenToUpstream is to specify whether
                              the OAuth2 token should be sent to the upstream
                            type: boolean
                        type: object
                      testConsoleKey:
                        description: TestConsoleKey is to specify the Test Console
                          Key authentication scheme details
                        properties:
                          header:
                            default: internal-key
                            description: Header is the header name used to pass the
                              Test Console Key
                            minLength: 1
                            type: string
                          sendTokenToUpstream:
                            description: SendTokenToUpstream is to specify whether
                              the Test Console Key should be sent to the upstream
                            type: boolean
                        type: object
                    type: object
                  disabled:
                    description: Disabled is to disable all authentications
                    type: boolean
                type: object
              override:
                description: AuthSpec specification of the authentication service
                properties:
                  authTypes:
                    description: AuthTypes is to specify the authentication scheme
                      types and details
                    properties:
                      apiKey:
                        description: APIKey is to specify the APIKey authentication
                          scheme details
                        items:
                          description: APIKeyAuth APIKey Authentication scheme details
                          properties:
                            in:
                              description: In is to specify how the APIKey is passed
                                to the request
                              enum:
                              - Header
                              - Query
                              minLength: 1
                              type: string
                            name:
                              description: Name is the name of the header or query
                                parameter to be used
                              minLength: 1
                              type: string
                            sendTokenToUpstream:
                              description: SendTokenToUpstream is to specify whether
                                the APIKey should be sent to the upstream
                              type: boolean
                          type: object
                        nullable: true
                        type: array
                      oauth2:
                        description: Oauth2 is to specify the Oauth2 authentication
                          scheme details
                        properties:
                          disabled:
                            default: false
                            description: Disabled is to disable OAuth2 authentication
                            type: boolean
                          header:
                            default: authorization
                            description: Header is the header name used to pass the
                              OAuth2 token
                            type: string
                          sendTokenToUpstream:
                            description: SendTokenToUpstream is to specify whether
                              the OAuth2 token should be sent to the upstream
                            type: boolean
                        type: object
                      testConsoleKey:
                        description: TestConsoleKey is to specify the Test Console
                          Key authentication scheme details
                        properties:
                          header:
                            default: internal-key
                            description: Header is the header name used to pass the
                              Test Console Key
                            minLength: 1
                            type: string
                          sendTokenToUpstream:
                            description: SendTokenToUpstream is to specify whether
                              the Test Console Key should be sent to the upstream
                            type: boolean
                        type: object
                    type: object
                  disabled:
                    description: Disabled is to disable all authentications
                    type: boolean
                type: object
              targetRef:
                description: PolicyTargetReference identifies an API object to apply
                  policy to. This should be used as part of Policy resources that
                  can target Gateway API resources. For more information on how this
                  policy attachment model works, and a sample Policy resource, refer
                  to the policy attachment documentation for Gateway API.
                properties:
                  group:
                    description: Group is the group of the target resource.
                    maxLength: 253
                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: Kind is kind of the target resource.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: Name is the name of the target resource.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: Namespace is the namespace of the referent. When
                      unspecified, the local namespace is inferred. Even when policy
                      targets a resource in a different namespace, it MUST only apply
                      to traffic originating from the same namespace as the policy.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - group
                - kind
                - name
                type: object
            type: object
          status:
            description: AuthenticationStatus defines the observed state of Authentication
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: Authentication is the Schema for the authentications API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: AuthenticationSpec defines the desired state of Authentication
            properties:
              default:
                description: AuthSpec specification of the authentication service
                properties:
                  authTypes:
                    description: AuthTypes is to specify the authentication scheme
                      types and details
                    properties:
                      apiKey:
                        description: APIKey is to specify the APIKey authentication
                          scheme details
                        items:
                          description: APIKeyAuth APIKey Authentication scheme details
                          properties:
                            in:
                              description: In is to specify how the APIKey is passed
                                to the request
                              enum:
                              - Header
                              - Query
                              minLength: 1
                              type: string
                            name:
                              description: Name is the name of the header or query
                                parameter to be used
                              minLength: 1
                              type: string
                            sendTokenToUpstream:
                              description: SendTokenToUpstream is to specify whether
                                the APIKey should be sent to the upstream
                              type: boolean
                          type: object
                        nullable: true
                        type: array
                      jwt:
                        description: JWT is to specify the JWT authentication scheme
                          details
                        properties:
                          audience:
                            description: Audience who can invoke a corresponding API
                            items:
                              type: string
                            type: array
                          disabled:
                            default: true
                            description: Disabled is to disable JWT authentication
                            type: boolean
                          header:
                            default: internal-key
                            description: Header is the header name used to pass the
                              JWT
                            minLength: 1
                            type: string
                          sendTokenToUpstream:
                            description: SendTokenToUpstream is to specify whether
                              the JWT should be sent to the upstream
                            type: boolean
                        type: object
                      mtls:
                        description: MutualSSL is to specify the features and certificates
                          for mutual SSL
                        properties:
                          certificatesInline:
                            description: CertificatesInline is the Inline Certificate
                              entry
                            items:
                              type: string
                            type: array
                          configMapRefs:
                            description: ConfigMapRefs denotes the reference to the
                              ConfigMap that contains the Certificate
                            items:
                              description: RefConfig holds a config for a secret or
                                a configmap
                              properties:
                                key:
                                  description: Key of the secret or configmap
                                  minLength: 1
                                  type: string
                                name:
                                  description: Name of the secret or configmap
                                  minLength: 1
                                  type: string
                              required:
                              - key
                              - name
                              type: object
                            type: array
                          disabled:
                            default: false
                            description: Disabled is to disable mTLS authentication
                            type: boolean
                          required:
                            default: optional
                            description: Required indicates whether mutualSSL is mandatory
                              or optional
                            enum:
                            - mandatory
                            - optional
                            type: string
                          secretRefs:
                            description: SecretRefs denotes the reference to the Secret
                              that contains the Certificate
                            items:
                              description: RefConfig holds a config for a secret or
                                a configmap
                              properties:
                                key:
                                  description: Key of the secret or configmap
                                  minLength: 1
                                  type: string
                                name:
                                  description: Name of the secret or configmap
                                  minLength: 1
                                  type: string
                              required:
                              - key
                              - name
                              type: object
                            type: array
                        type: object
                      oauth2:
                        description: Oauth2 is to specify the Oauth2 authentication
                          scheme details
                        properties:
                          disabled:
                            default: false
                            description: Disabled is to disable OAuth2 authentication
                            type: boolean
                          header:
                            default: authorization
                            description: Header is the header name used to pass the
                              OAuth2 token
                            type: string
                          required:
                            default: mandatory
                            description: Required indicates whether OAuth2 is mandatory
                              or optional
                            enum:
                            - mandatory
                            - optional
                            type: string
                          sendTokenToUpstream:
                            description: SendTokenToUpstream is to specify whether
                              the OAuth2 token should be sent to the upstream
                            type: boolean
                        type: object
                    type: object
                  disabled:
                    description: Disabled is to disable all authentications
                    type: boolean
                type: object
              override:
                description: AuthSpec specification of the authentication service
                properties:
                  authTypes:
                    description: AuthTypes is to specify the authentication scheme
                      types and details
                    properties:
                      apiKey:
                        description: APIKey is to specify the APIKey authentication
                          scheme details
                        items:
                          description: APIKeyAuth APIKey Authentication scheme details
                          properties:
                            in:
                              description: In is to specify how the APIKey is passed
                                to the request
                              enum:
                              - Header
                              - Query
                              minLength: 1
                              type: string
                            name:
                              description: Name is the name of the header or query
                                parameter to be used
                              minLength: 1
                              type: string
                            sendTokenToUpstream:
                              description: SendTokenToUpstream is to specify whether
                                the APIKey should be sent to the upstream
                              type: boolean
                          type: object
                        nullable: true
                        type: array
                      jwt:
                        description: JWT is to specify the JWT authentication scheme
                          details
                        properties:
                          audience:
                            description: Audience who can invoke a corresponding API
                            items:
                              type: string
                            type: array
                          disabled:
                            default: true
                            description: Disabled is to disable JWT authentication
                            type: boolean
                          header:
                            default: internal-key
                            description: Header is the header name used to pass the
                              JWT
                            minLength: 1
                            type: string
                          sendTokenToUpstream:
                            description: SendTokenToUpstream is to specify whether
                              the JWT should be sent to the upstream
                            type: boolean
                        type: object
                      mtls:
                        description: MutualSSL is to specify the features and certificates
                          for mutual SSL
                        properties:
                          certificatesInline:
                            description: CertificatesInline is the Inline Certificate
                              entry
                            items:
                              type: string
                            type: array
                          configMapRefs:
                            description: ConfigMapRefs denotes the reference to the
                              ConfigMap that contains the Certificate
                            items:
                              description: RefConfig holds a config for a secret or
                                a configmap
                              properties:
                                key:
                                  description: Key of the secret or configmap
                                  minLength: 1
                                  type: string
                                name:
                                  description: Name of the secret or configmap
                                  minLength: 1
                                  type: string
                              required:
                              - key
                              - name
                              type: object
                            type: array
                          disabled:
                            default: false
                            description: Disabled is to disable mTLS authentication
                            type: boolean
                          required:
                            default: optional
                            description: Required indicates whether mutualSSL is mandatory
                              or optional
                            enum:
                            - mandatory
                            - optional
                            type: string
                          secretRefs:
                            description: SecretRefs denotes the reference to the Secret
                              that contains the Certificate
                            items:
                              description: RefConfig holds a config for a secret or
                                a configmap
                              properties:
                                key:
                                  description: Key of the secret or configmap
                                  minLength: 1
                                  type: string
                                name:
                                  description: Name of the secret or configmap
                                  minLength: 1
                                  type: string
                              required:
                              - key
                              - name
                              type: object
                            type: array
                        type: object
                      oauth2:
                        description: Oauth2 is to specify the Oauth2 authentication
                          scheme details
                        properties:
                          disabled:
                            default: false
                            description: Disabled is to disable OAuth2 authentication
                            type: boolean
                          header:
                            default: authorization
                            description: Header is the header name used to pass the
                              OAuth2 token
                            type: string
                          required:
                            default: mandatory
                            description: Required indicates whether OAuth2 is mandatory
                              or optional
                            enum:
                            - mandatory
                            - optional
                            type: string
                          sendTokenToUpstream:
                            description: SendTokenToUpstream is to specify whether
                              the OAuth2 token should be sent to the upstream
                            type: boolean
                        type: object
                    type: object
                  disabled:
                    description: Disabled is to disable all authentications
                    type: boolean
                type: object
              targetRef:
                description: PolicyTargetReference identifies an API object to apply
                  policy to. This should be used as part of Policy resources that
                  can target Gateway API resources. For more information on how this
                  policy attachment model works, and a sample Policy resource, refer
                  to the policy attachment documentation for Gateway API.
                properties:
                  group:
                    description: Group is the group of the target resource.
                    maxLength: 253
                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: Kind is kind of the target resource.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: Name is the name of the target resource.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: Namespace is the namespace of the referent. When
                      unspecified, the local namespace is inferred. Even when policy
                      targets a resource in a different namespace, it MUST only apply
                      to traffic originating from the same namespace as the policy.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - group
                - kind
                - name
                type: object
            type: object
          status:
            description: AuthenticationStatus defines the observed state of Authentication
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: apk-helm/templates/crds/dp.wso2.com_tokenissuers.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
    cert-manager.io/inject-ca-from: default/my-apk-helm-wso2-apk-common-controller-server-cert
  creationTimestamp: null
  name: tokenissuers.dp.wso2.com
spec:
  conversion:
      strategy: Webhook
      webhook:
        clientConfig:
          service:
            name: my-apk-helm-wso2-apk-common-controller-service
            namespace: default
            path: /convert
        conversionReviewVersions:
        - v1
  group: dp.wso2.com
  names:
    kind: TokenIssuer
    listKind: TokenIssuerList
    plural: tokenissuers
    singular: tokenissuer
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: TokenIssuer is the Schema for the tokenIssuer API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: TokenIssuerSpec defines the desired state of TokenIssuer
            properties:
              claimMappings:
                description: ClaimMappings denotes the claim mappings of the jwt
                items:
                  description: ClaimMapping defines the reference configuration
                  properties:
                    localClaim:
                      description: LocalClaim denotes the local claim
                      type: string
                    remoteClaim:
                      description: RemoteClaim denotes the remote claim
                      type: string
                  required:
                  - localClaim
                  - remoteClaim
                  type: object
                type: array
              consumerKeyClaim:
                description: ConsumerKeyClaim denotes the claim key of the consumer
                  key.
                minLength: 1
                type: string
              issuer:
                description: Issuer denotes the issuer of the Token Issuer.
                minLength: 1
                type: string
              name:
                description: Name is the unique name of the Token Issuer in the Organization
                  defined . "Organization/Name" can be used to uniquely identify an
                  Issuer.
                minLength: 1
                type: string
              organization:
                description: Organization denotes the organization of the Token Issuer.
                minLength: 1
                type: string
              scopesClaim:
                description: ScopesClaim denotes the claim key of the scopes.
                minLength: 1
                type: string
              signatureValidation:
                description: SignatureValidation denotes the signature validation
                  method of jwt
                properties:
                  certificate:
                    description: Certificate denotes the certificate information
                    properties:
                      certificateInline:
                        description: CertificateInline is the Inline Certificate entry
                        type: string
                      configMapRef:
                        description: ConfigMapRef denotes the reference to the ConfigMap
                          that contains the Certificate
                        properties:
                          key:
                            description: Key of the secret or configmap
                            minLength: 1
                            type: string
                          name:
                            description: Name of the secret or configmap
                            minLength: 1
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      secretRef:
                        description: SecretRef denotes the reference to the Secret
                          that contains the Certificate
                        properties:
                          key:
                            description: Key of the secret or configmap
                            minLength: 1
                            type: string
                          name:
                            description: Name of the secret or configmap
                            minLength: 1
                            type: string
                        required:
                        - key
                        - name
                        type: object
                    type: object
                  jwks:
                    description: JWKS denotes the JWKS endpoint information
                    properties:
                      tls:
                        description: TLS denotes the TLS configuration of the JWKS
                          endpoint
                        properties:
                          certificateInline:
                            description: CertificateInline is the Inline Certificate
                              entry
                            type: string
                          configMapRef:
                            description: ConfigMapRef denotes the reference to the
                              ConfigMap that contains the Certificate
                            properties:
                              key:
                                description: Key of the secret or configmap
                                minLength: 1
                                type: string
                              name:
                                description: Name of the secret or configmap
                                minLength: 1
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          secretRef:
                            description: SecretRef denotes the reference to the Secret
                              that contains the Certificate
                            properties:
                              key:
                                description: Key of the secret or configmap
                                minLength: 1
                                type: string
                              name:
                                description: Name of the secret or configmap
                                minLength: 1
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        type: object
                      url:
                        description: URL is the URL of the JWKS endpoint
                        type: string
                    required:
                    - url
                    type: object
                type: object
              targetRef:
                description: TargetRef denotes the reference to the which gateway
                  it applies to
                properties:
                  group:
                    description: Group is the group of the target resource.
                    maxLength: 253
                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: Kind is kind of the target resource.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: Name is the name of the target resource.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: Namespace is the namespace of the referent. When
                      unspecified, the local namespace is inferred. Even when policy
                      targets a resource in a different namespace, it MUST only apply
                      to traffic originating from the same namespace as the policy.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - group
                - kind
                - name
                type: object
            required:
            - consumerKeyClaim
            - issuer
            - name
            - organization
            - scopesClaim
            - signatureValidation
            type: object
          status:
            description: TokenIssuerStatus defines the observed state of TokenIssuer
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: TokenIssuer is the Schema for the tokenissuers API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: TokenIssuerSpec defines the desired state of TokenIssuer
            properties:
              claimMappings:
                description: ClaimMappings denotes the claim mappings of the jwt
                items:
                  description: ClaimMapping defines the reference configuration
                  properties:
                    localClaim:
                      description: LocalClaim denotes the local claim
                      type: string
                    remoteClaim:
                      description: RemoteClaim denotes the remote claim
                      type: string
                  required:
                  - localClaim
                  - remoteClaim
                  type: object
                type: array
              consumerKeyClaim:
                description: ConsumerKeyClaim denotes the claim key of the consumer
                  key.
                minLength: 1
                type: string
              environments:
                description: Environments denotes the environments that are applicable
                  for the token issuer.
                items:
                  type: string
                nullable: true
                type: array
              issuer:
                description: Issuer denotes the issuer of the Token Issuer.
                minLength: 1
                type: string
              name:
                description: Name is the unique name of the Token Issuer in the Organization
                  defined . "Organization/Name" can be used to uniquely identify an
                  Issuer.
                minLength: 1
                type: string
              organization:
                description: Organization denotes the organization of the Token Issuer.
                minLength: 1
                type: string
              scopesClaim:
                description: ScopesClaim denotes the claim key of the scopes.
                minLength: 1
                type: string
              signatureValidation:
                description: SignatureValidation denotes the signature validation
                  method of jwt
                properties:
                  certificate:
                    description: Certificate denotes the certificate information
                    properties:
                      certificateInline:
                        description: CertificateInline is the Inline Certificate entry
                        type: string
                      configMapRef:
                        description: ConfigMapRef denotes the reference to the ConfigMap
                          that contains the Certificate
                        properties:
                          key:
                            description: Key of the secret or configmap
                            minLength: 1
                            type: string
                          name:
                            description: Name of the secret or configmap
                            minLength: 1
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      secretRef:
                        description: SecretRef denotes the reference to the Secret
                          that contains the Certificate
                        properties:
                          key:
                            description: Key of the secret or configmap
                            minLength: 1
                            type: string
                          name:
                            description: Name of the secret or configmap
                            minLength: 1
                            type: string
                        required:
                        - key
                        - name
                        type: object
                    type: object
                  jwks:
                    description: JWKS denotes the JWKS endpoint information
                    properties:
                      tls:
                        description: TLS denotes the TLS configuration of the JWKS
                          endpoint
                        properties:
                          certificateInline:
                            description: CertificateInline is the Inline Certificate
                              entry
                            type: string
                          configMapRef:
                            description: ConfigMapRef denotes the reference to the
                              ConfigMap that contains the Certificate
                            properties:
                              key:
                                description: Key of the secret or configmap
                                minLength: 1
                                type: string
                              name:
                                description: Name of the secret or configmap
                                minLength: 1
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          secretRef:
                            description: SecretRef denotes the reference to the Secret
                              that contains the Certificate
                            properties:
                              key:
                                description: Key of the secret or configmap
                                minLength: 1
                                type: string
                              name:
                                description: Name of the secret or configmap
                                minLength: 1
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        type: object
                      url:
                        description: URL is the URL of the JWKS endpoint
                        type: string
                    required:
                    - url
                    type: object
                type: object
              targetRef:
                description: TargetRef denotes the reference to the which gateway
                  it applies to
                properties:
                  group:
                    description: Group is the group of the target resource.
                    maxLength: 253
                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: Kind is kind of the target resource.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: Name is the name of the target resource.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: Namespace is the namespace of the referent. When
                      unspecified, the local namespace is inferred. Even when policy
                      targets a resource in a different namespace, it MUST only apply
                      to traffic originating from the same namespace as the policy.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - group
                - kind
                - name
                type: object
            required:
            - consumerKeyClaim
            - issuer
            - name
            - organization
            - scopesClaim
            - signatureValidation
            type: object
          status:
            description: TokenIssuerStatus defines the observed state of TokenIssuer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: apk-helm/charts/cert-manager/templates/cainjector-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-cainjector
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["get", "create", "update", "patch"]
  - apiGroups: ["admissionregistration.k8s.io"]
    resources: ["validatingwebhookconfigurations", "mutatingwebhookconfigurations"]
    verbs: ["get", "list", "watch", "update"]
  - apiGroups: ["apiregistration.k8s.io"]
    resources: ["apiservices"]
    verbs: ["get", "list", "watch", "update"]
  - apiGroups: ["apiextensions.k8s.io"]
    resources: ["customresourcedefinitions"]
    verbs: ["get", "list", "watch", "update"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# Issuer controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-controller-issuers
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["issuers", "issuers/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["cert-manager.io"]
    resources: ["issuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch", "create", "update", "delete"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# ClusterIssuer controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-controller-clusterissuers
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["clusterissuers", "clusterissuers/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["cert-manager.io"]
    resources: ["clusterissuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch", "create", "update", "delete"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# Certificates controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-controller-certificates
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificates/status", "certificaterequests", "certificaterequests/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests", "clusterissuers", "issuers"]
    verbs: ["get", "list", "watch"]
  # We require these rules to support users with the OwnerReferencesPermissionEnforcement
  # admission controller enabled:
  # https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#ownerreferencespermissionenforcement
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates/finalizers", "certificaterequests/finalizers"]
    verbs: ["update"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["orders"]
    verbs: ["create", "delete", "get", "list", "watch"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch", "create", "update", "delete", "patch"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# Orders controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-controller-orders
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["orders", "orders/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["orders", "challenges"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["cert-manager.io"]
    resources: ["clusterissuers", "issuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges"]
    verbs: ["create", "delete"]
  # We require these rules to support users with the OwnerReferencesPermissionEnforcement
  # admission controller enabled:
  # https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#ownerreferencespermissionenforcement
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["orders/finalizers"]
    verbs: ["update"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# Challenges controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-controller-challenges
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  # Use to update challenge resource status
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges", "challenges/status"]
    verbs: ["update", "patch"]
  # Used to watch challenge resources
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges"]
    verbs: ["get", "list", "watch"]
  # Used to watch challenges, issuer and clusterissuer resources
  - apiGroups: ["cert-manager.io"]
    resources: ["issuers", "clusterissuers"]
    verbs: ["get", "list", "watch"]
  # Need to be able to retrieve ACME account private key to complete challenges
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
  # Used to create events
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
  # HTTP01 rules
  - apiGroups: [""]
    resources: ["pods", "services"]
    verbs: ["get", "list", "watch", "create", "delete"]
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses"]
    verbs: ["get", "list", "watch", "create", "delete", "update"]
  - apiGroups: [ "gateway.networking.k8s.io" ]
    resources: [ "httproutes" ]
    verbs: ["get", "list", "watch", "create", "delete", "update"]
  # We require the ability to specify a custom hostname when we are creating
  # new ingress resources.
  # See: https://github.com/openshift/origin/blob/21f191775636f9acadb44fa42beeb4f75b255532/pkg/route/apiserver/admission/ingress_admission.go#L84-L148
  - apiGroups: ["route.openshift.io"]
    resources: ["routes/custom-host"]
    verbs: ["create"]
  # We require these rules to support users with the OwnerReferencesPermissionEnforcement
  # admission controller enabled:
  # https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#ownerreferencespermissionenforcement
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges/finalizers"]
    verbs: ["update"]
  # DNS01 rules (duplicated above)
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# ingress-shim controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-controller-ingress-shim
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests"]
    verbs: ["create", "update", "delete"]
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests", "issuers", "clusterissuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses"]
    verbs: ["get", "list", "watch"]
  # We require these rules to support users with the OwnerReferencesPermissionEnforcement
  # admission controller enabled:
  # https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#ownerreferencespermissionenforcement
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses/finalizers"]
    verbs: ["update"]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["gateways", "httproutes"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["gateways/finalizers", "httproutes/finalizers"]
    verbs: ["update"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-view
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
    rbac.authorization.k8s.io/aggregate-to-view: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests", "issuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges", "orders"]
    verbs: ["get", "list", "watch"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-edit
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests", "issuers"]
    verbs: ["create", "delete", "deletecollection", "patch", "update"]
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates/status"]
    verbs: ["update"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges", "orders"]
    verbs: ["create", "delete", "deletecollection", "patch", "update"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# Permission to approve CertificateRequests referencing cert-manager.io Issuers and ClusterIssuers
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-controller-approve:cert-manager-io
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cert-manager"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["signers"]
    verbs: ["approve"]
    resourceNames: ["issuers.cert-manager.io/*", "clusterissuers.cert-manager.io/*"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# Permission to:
# - Update and sign CertificatSigningeRequests referencing cert-manager.io Issuers and ClusterIssuers
# - Perform SubjectAccessReviews to test whether users are able to reference Namespaced Issuers
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-controller-certificatesigningrequests
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cert-manager"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["certificates.k8s.io"]
    resources: ["certificatesigningrequests"]
    verbs: ["get", "list", "watch", "update"]
  - apiGroups: ["certificates.k8s.io"]
    resources: ["certificatesigningrequests/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["certificates.k8s.io"]
    resources: ["signers"]
    resourceNames: ["issuers.cert-manager.io/*", "clusterissuers.cert-manager.io/*"]
    verbs: ["sign"]
  - apiGroups: ["authorization.k8s.io"]
    resources: ["subjectaccessreviews"]
    verbs: ["create"]
---
# Source: apk-helm/charts/cert-manager/templates/webhook-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-apk-helm-cert-manager-webhook:subjectaccessreviews
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
- apiGroups: ["authorization.k8s.io"]
  resources: ["subjectaccessreviews"]
  verbs: ["create"]
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: gateway-api-admission
  labels:
    name: gateway-api
rules:
  - apiGroups:
      - admissionregistration.k8s.io
    resources:
      - validatingwebhookconfigurations
    verbs:
      - get
      - update
---
# Source: apk-helm/templates/serviceAccount/apk-cluster-role.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: wso2apk-role
rules:
  - apiGroups: [""]
    resources: ["services","configmaps","secrets"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["httproutes","gateways","gatewayclasses"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: [ "gateway.networking.k8s.io" ]
    resources: [ "gateways/status","gatewayclasses/status","httproutes/status" ]
    verbs: [ "get","patch","update" ]
  - apiGroups: ["dp.wso2.com"]
    resources: ["apis"]
    verbs: ["get","list","watch","update","delete","create", "patch"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["apis/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["apis/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["authentications"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["authentications/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["authentications/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["backends"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["backends/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["backends/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["apipolicies"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["apipolicies/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["apipolicies/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["interceptorservices"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["interceptorservices/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["interceptorservices/status"]
    verbs: ["get","patch","update"]
  - apiGroups: [ "dp.wso2.com" ]
    resources: [ "scopes" ]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["scopes/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["scopes/status"]
    verbs: ["get","patch","update"]
  - apiGroups: [ "dp.wso2.com" ]
    resources: [ "ratelimitpolicies" ]
    verbs: [ "get","list","watch","update","delete","create" ]
  - apiGroups: [ "dp.wso2.com" ]
    resources: [ "ratelimitpolicies/finalizers" ]
    verbs: [ "update" ]
  - apiGroups: [ "dp.wso2.com" ]
    resources: [ "ratelimitpolicies/status" ]
    verbs: [ "get","patch","update" ]
  - apiGroups: [ "coordination.k8s.io" ]
    resources: [ "leases" ]
    verbs: [ "get","list","watch","update","patch","create","delete" ]
  - apiGroups: ["dp.wso2.com"]
    resources: ["tokenissuers"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["tokenissuers/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["tokenissuers/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["backendjwts"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["backendjwts/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["backendjwts/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["gqlroutes"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["gqlroutes/finalizers"]
    verbs: ["update"]
  - apiGroups: ["dp.wso2.com"]
    resources: ["gqlroutes/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["applications"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["applications/finalizers"]
    verbs: ["update"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["applications/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["subscriptions"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["subscriptions/finalizers"]
    verbs: ["update"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["subscriptions/status"]
    verbs: ["get","patch","update"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["applicationmappings"]
    verbs: ["get","list","watch","update","delete","create"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["applicationmappings/finalizers"]
    verbs: ["update"]
  - apiGroups: ["cp.wso2.com"]
    resources: ["applicationmappings/status"]
    verbs: ["get","patch","update"]
---
# Source: apk-helm/charts/cert-manager/templates/cainjector-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-cainjector
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-cainjector
subjects:
  - name: my-apk-helm-cert-manager-cainjector
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-controller-issuers
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-controller-issuers
subjects:
  - name: my-apk-helm-cert-manager
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-controller-clusterissuers
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-controller-clusterissuers
subjects:
  - name: my-apk-helm-cert-manager
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-controller-certificates
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-controller-certificates
subjects:
  - name: my-apk-helm-cert-manager
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-controller-orders
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-controller-orders
subjects:
  - name: my-apk-helm-cert-manager
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-controller-challenges
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-controller-challenges
subjects:
  - name: my-apk-helm-cert-manager
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-controller-ingress-shim
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-controller-ingress-shim
subjects:
  - name: my-apk-helm-cert-manager
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-controller-approve:cert-manager-io
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cert-manager"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-controller-approve:cert-manager-io
subjects:
  - name: my-apk-helm-cert-manager
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-controller-certificatesigningrequests
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cert-manager"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-controller-certificatesigningrequests
subjects:
  - name: my-apk-helm-cert-manager
    namespace: default
    kind: ServiceAccount
---
# Source: apk-helm/charts/cert-manager/templates/webhook-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-cert-manager-webhook:subjectaccessreviews
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-apk-helm-cert-manager-webhook:subjectaccessreviews
subjects:
- apiGroup: ""
  kind: ServiceAccount
  name: my-apk-helm-cert-manager-webhook
  namespace: default
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-wso2-apk-gateway-api-admission
  annotations:
  labels:
    name: gateway-api-webhook
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: gateway-api-admission
subjects:
  - kind: ServiceAccount
    name: gateway-api-admission
    namespace: default
---
# Source: apk-helm/templates/serviceAccount/apk-cluster-role-binding.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: rbac.authorization.k8s.io/v1
# This cluster role binding allows anyone in the "manager" group to read secrets in any namespace.
kind: ClusterRoleBinding
metadata:
  name: my-apk-helm-wso2-apk-role-binding
  namespace: default
roleRef:
  kind: ClusterRole
  name: wso2apk-role
  apiGroup: rbac.authorization.k8s.io
subjects:
  # You can specify more than one "subject"
  - kind: ServiceAccount
    name: wso2apk-platform
    namespace: default
---
# Source: apk-helm/charts/cert-manager/templates/cainjector-rbac.yaml
# leader election rules
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: my-apk-helm-cert-manager-cainjector:leaderelection
  namespace: kube-system
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  # Used for leader election by the controller
  # cert-manager-cainjector-leader-election is used by the CertificateBased injector controller
  #   see cmd/cainjector/start.go#L113
  # cert-manager-cainjector-leader-election-core is used by the SecretBased injector controller
  #   see cmd/cainjector/start.go#L137
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    resourceNames: ["cert-manager-cainjector-leader-election", "cert-manager-cainjector-leader-election-core"]
    verbs: ["get", "update", "patch"]
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    verbs: ["create"]
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: my-apk-helm-cert-manager:leaderelection
  namespace: kube-system
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    resourceNames: ["cert-manager-controller"]
    verbs: ["get", "update", "patch"]
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    verbs: ["create"]
---
# Source: apk-helm/charts/cert-manager/templates/webhook-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: my-apk-helm-cert-manager-webhook:dynamic-serving
  namespace: default
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
rules:
- apiGroups: [""]
  resources: ["secrets"]
  resourceNames:
  - 'my-apk-helm-cert-manager-webhook-ca'
  verbs: ["get", "list", "watch", "update"]
# It's not possible to grant CREATE permission on a single resourceName.
- apiGroups: [""]
  resources: ["secrets"]
  verbs: ["create"]
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: gateway-api-admission
  annotations:
  labels:
    name: gateway-api-webhook
  namespace: default
rules:
  - apiGroups:
      - ''
    resources:
      - secrets
    verbs:
      - get
      - create
---
# Source: apk-helm/charts/cert-manager/templates/cainjector-rbac.yaml
# grant cert-manager permission to manage the leaderelection configmap in the
# leader election namespace
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: my-apk-helm-cert-manager-cainjector:leaderelection
  namespace: kube-system
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: my-apk-helm-cert-manager-cainjector:leaderelection
subjects:
  - kind: ServiceAccount
    name: my-apk-helm-cert-manager-cainjector
    namespace: default
---
# Source: apk-helm/charts/cert-manager/templates/rbac.yaml
# grant cert-manager permission to manage the leaderelection configmap in the
# leader election namespace
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: my-apk-helm-cert-manager:leaderelection
  namespace: kube-system
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: my-apk-helm-cert-manager:leaderelection
subjects:
  - apiGroup: ""
    kind: ServiceAccount
    name: my-apk-helm-cert-manager
    namespace: default
---
# Source: apk-helm/charts/cert-manager/templates/webhook-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: my-apk-helm-cert-manager-webhook:dynamic-serving
  namespace: default
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: my-apk-helm-cert-manager-webhook:dynamic-serving
subjects:
- apiGroup: ""
  kind: ServiceAccount
  name: my-apk-helm-cert-manager-webhook
  namespace: default
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: gateway-api-admission
  annotations:
  labels:
    name: gateway-api-webhook
  namespace: default
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: gateway-api-admission
subjects:
  - kind: ServiceAccount
    name: gateway-api-admission
    namespace: default
---
# Source: apk-helm/charts/cert-manager/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-cert-manager
  namespace: default
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
spec:
  type: ClusterIP
  ports:
  - protocol: TCP
    port: 9402
    name: tcp-prometheus-servicemonitor
    targetPort: 9402
  selector:
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
---
# Source: apk-helm/charts/cert-manager/templates/webhook-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-cert-manager-webhook
  namespace: default
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
spec:
  type: ClusterIP
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: "https"
  selector:
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
---
# Source: apk-helm/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: wso2apk-db-service-hl
  namespace: "default"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-11.9.6
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: primary
    # Use this annotation in addition to the actual publishNotReadyAddresses
    # field below because the annotation will stop being respected soon but the
    # field is broken in some versions of Kubernetes:
    # https://github.com/kubernetes/kubernetes/issues/58662
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: primary
---
# Source: apk-helm/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: wso2apk-db-service
  namespace: "default"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-11.9.6
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: primary
  annotations:
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: primary
---
# Source: apk-helm/charts/redis/templates/headless-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: redis-headless
  namespace: "default"
  labels:
    app.kubernetes.io/name: redis
    helm.sh/chart: redis-17.8.0
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
  annotations:
    
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: tcp-redis
      port: 6379
      targetPort: redis
  selector:
    app.kubernetes.io/name: redis
    app.kubernetes.io/instance: my-apk-helm
---
# Source: apk-helm/charts/redis/templates/master/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: redis-master
  namespace: "default"
  labels:
    app.kubernetes.io/name: redis
    helm.sh/chart: redis-17.8.0
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: master
spec:
  type: ClusterIP
  internalTrafficPolicy: Cluster
  sessionAffinity: None
  ports:
    - name: tcp-redis
      port: 6379
      targetPort: redis
      nodePort: null
  selector:
    app.kubernetes.io/name: redis
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: master
---
# Source: apk-helm/templates/data-plane/config-deployer/config-ds-service.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-wso2-apk-config-ds-service
  namespace : default
spec:
  # label keys and values that must match in order to receive traffic for this service
  selector:
    app.kubernetes.io/app: configdeployer-ds
    app.kubernetes.io/release: my-apk-helm
  ports:
    - name: servlet-https
      protocol: TCP
      port: 9443
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    name: gateway-api-webhook-server
  name: gateway-api-admission-server
  namespace: default
spec:
  type: ClusterIP
  ports:
    - name: https-webhook
      port: 443
      targetPort: 8443
  selector:
    name: gateway-api-admission-server
---
# Source: apk-helm/templates/data-plane/gateway-components/adapter/adapter-service.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-wso2-apk-adapter-service
  namespace : default
spec:
  # label keys and values that must match in order to receive traffic for this service
  selector:
    app.kubernetes.io/app: adapter
    app.kubernetes.io/release: my-apk-helm
  ports:
    - name: endpoint1
      protocol: TCP
      port: 8765
    - name: endpoint2
      protocol: TCP
      port: 18000
    - name: webhook-server
      protocol: TCP
      port: 443
      targetPort: 9443
    - name: https-rate-limiter
      protocol: TCP
      port: 18001
    - name: profile-port
      protocol: TCP
      port: 6060
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/common-controller-service.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-wso2-apk-common-controller-service
  namespace : default
spec:
  # label keys and values that must match in order to receive traffic for this service
  selector:
    app.kubernetes.io/app: commoncontroller
    app.kubernetes.io/release: my-apk-helm
  ports:
    - name: https-rate-limiter
      protocol: TCP
      port: 18005
    - name: https-enforcer-xds
      protocol: TCP
      port: 18002
    - name: webhook-server
      protocol: TCP
      port: 443
      targetPort: 9443
    - name: https-internal-api
      protocol: TCP
      port: 18003
    - name: web-server
      protocol: TCP
      port: 9543
      targetPort: 9543
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/enforcer-service.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-wso2-apk-enforcer-service
  namespace : default
spec:
  # label keys and values that must match in order to receive traffic for this service
  selector:
    app.kubernetes.io/app: gateway
    app.kubernetes.io/release: my-apk-helm
  ports:
    - name: servlet-https
      protocol: TCP
      port: 9092
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/gateway-service.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-wso2-apk-gateway-service
  namespace : default

spec:
  type: LoadBalancer
  # label keys and values that must match in order to receive traffic for this service
  selector:
    app.kubernetes.io/app: gateway
    app.kubernetes.io/release: my-apk-helm
  ports:

  - name: "https-endpoint"
    protocol: TCP
    port: 9095
---
# Source: apk-helm/templates/data-plane/ratelimiter/ratelimiter-service.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-wso2-apk-ratelimiter-service
  namespace : default
spec:
  # label keys and values that must match in order to receive traffic for this service
  selector:
    app.kubernetes.io/app: ratelimiter
    app.kubernetes.io/release: my-apk-helm
  ports:
    - name: endpoint1
      protocol: TCP
      port: 8090
    - name: endpoint2
      protocol: TCP
      port: 8091
    - name: endpoint3
      protocol: TCP
      port: 6070
---
# Source: apk-helm/templates/idp/idp-ds/idp-ds-service.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-wso2-apk-idp-ds-service
  namespace : default
spec:
  # label keys and values that must match in order to receive traffic for this service
  selector:
    app.kubernetes.io/app: idp-ds
    app.kubernetes.io/release: my-apk-helm
  ports:
    - name: servlet-https
      protocol: TCP
      port: 9443
---
# Source: apk-helm/templates/idp/idp-ui/idp-ui-service.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: v1
kind: Service
metadata:
  name: my-apk-helm-wso2-apk-idp-ui-service
  namespace : default
spec:
  # label keys and values that must match in order to receive traffic for this service
  selector:
    app.kubernetes.io/app: idp-ui
    app.kubernetes.io/release: my-apk-helm
  ports:
    - name: servlet-https
      protocol: TCP
      port: 9443
---
# Source: apk-helm/charts/cert-manager/templates/cainjector-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-cert-manager-cainjector
  namespace: default
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: cainjector
      app.kubernetes.io/instance: my-apk-helm
      app.kubernetes.io/component: "cainjector"
  template:
    metadata:
      labels:
        app: cainjector
        app.kubernetes.io/name: cainjector
        app.kubernetes.io/instance: my-apk-helm
        app.kubernetes.io/component: "cainjector"
        app.kubernetes.io/version: "v1.10.1"
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: cert-manager-v1.10.1
    spec:
      serviceAccountName: my-apk-helm-cert-manager-cainjector
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: cert-manager-cainjector
          image: "quay.io/jetstack/cert-manager-cainjector:v1.10.1"
          imagePullPolicy: IfNotPresent
          args:
          - --v=2
          - --leader-election-namespace=kube-system
          env:
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: apk-helm/charts/cert-manager/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-cert-manager
  namespace: default
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: cert-manager
      app.kubernetes.io/instance: my-apk-helm
      app.kubernetes.io/component: "controller"
  template:
    metadata:
      labels:
        app: cert-manager
        app.kubernetes.io/name: cert-manager
        app.kubernetes.io/instance: my-apk-helm
        app.kubernetes.io/component: "controller"
        app.kubernetes.io/version: "v1.10.1"
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: cert-manager-v1.10.1
      annotations:
        prometheus.io/path: "/metrics"
        prometheus.io/scrape: 'true'
        prometheus.io/port: '9402'
    spec:
      serviceAccountName: my-apk-helm-cert-manager
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: cert-manager-controller
          image: "quay.io/jetstack/cert-manager-controller:v1.10.1"
          imagePullPolicy: IfNotPresent
          args:
          - --v=2
          - --cluster-resource-namespace=$(POD_NAMESPACE)
          - --leader-election-namespace=kube-system
          ports:
          - containerPort: 9402
            name: http-metrics
            protocol: TCP
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
          env:
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: apk-helm/charts/cert-manager/templates/webhook-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-cert-manager-webhook
  namespace: default
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: webhook
      app.kubernetes.io/instance: my-apk-helm
      app.kubernetes.io/component: "webhook"
  template:
    metadata:
      labels:
        app: webhook
        app.kubernetes.io/name: webhook
        app.kubernetes.io/instance: my-apk-helm
        app.kubernetes.io/component: "webhook"
        app.kubernetes.io/version: "v1.10.1"
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: cert-manager-v1.10.1
    spec:
      serviceAccountName: my-apk-helm-cert-manager-webhook
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: cert-manager-webhook
          image: "quay.io/jetstack/cert-manager-webhook:v1.10.1"
          imagePullPolicy: IfNotPresent
          args:
          - --v=2
          - --secure-port=10250
          - --dynamic-serving-ca-secret-namespace=$(POD_NAMESPACE)
          - --dynamic-serving-ca-secret-name=my-apk-helm-cert-manager-webhook-ca
          - --dynamic-serving-dns-names=my-apk-helm-cert-manager-webhook
          - --dynamic-serving-dns-names=my-apk-helm-cert-manager-webhook.$(POD_NAMESPACE)
          - --dynamic-serving-dns-names=my-apk-helm-cert-manager-webhook.$(POD_NAMESPACE).svc
          
          ports:
          - name: https
            protocol: TCP
            containerPort: 10250
          - name: healthcheck
            protocol: TCP
            containerPort: 6080
          livenessProbe:
            httpGet:
              path: /livez
              port: 6080
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /healthz
              port: 6080
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 3
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
          env:
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: apk-helm/templates/data-plane/config-deployer/config-ds-deployment.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-wso2-apk-config-ds-deployment
  namespace: default
spec:
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/app: configdeployer-ds
      app.kubernetes.io/release: my-apk-helm
  template:
    metadata:
      labels:
        app.kubernetes.io/app: configdeployer-ds
        app.kubernetes.io/release: my-apk-helm
      annotations:
        checksum/config: 8beb243f2c4f045bd511084939457681cfdd5acd39e69f3a61a26bdc96592168
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/app
                  operator: In
                  values:
                  - config-ds
              topologyKey: "topology.kubernetes.io/zone"
            weight: 100
      serviceAccountName: wso2apk-platform
      containers:
        - name: config-ds
          image: docker.wso2.com/apk-config-deployer-service:1.1.0.0
          imagePullPolicy: Always
          ports:
            - containerPort: 9443
              protocol: "TCP"
            
          env:
            
          readinessProbe:
            httpGet:
              path: /health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20    
          livenessProbe:
            httpGet:
              path: /health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20
          resources:
            requests:
              memory: 512Mi
              cpu: 200m
            limits:
              memory: 1024Mi
              cpu: 500m
          volumeMounts:
            - mountPath: /home/wso2apk/config-deployer/conf/Config.toml
              name: config-toml-volume
              subPath: Config.toml
            - name: config-ds-tls-volume
              mountPath: /home/wso2apk/config-deployer/security/config.key
              subPath: tls.key
            - name: config-ds-tls-volume
              mountPath: /home/wso2apk/config-deployer/security/config.pem
              subPath: tls.crt
            
            - name: enforcer-jwt-secret-volume
              mountPath: /home/wso2apk/config-deployer/security/mg.pem
              subPath: mg.pem
            - name: tmp
              mountPath: /tmp
            - name: config-deployer-temp
              mountPath: /home/wso2apk/config-deployer/tmp
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            readOnlyRootFilesystem: true      
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: "RuntimeDefault"

      volumes:
        - name: config-toml-volume
          configMap:
            name: my-apk-helm-wso2-apk-config-ds-configmap
        - name: config-ds-tls-volume
          secret:
       
            secretName: my-apk-helm-wso2-apk-config-ds-server-cert
       
        
        - name: enforcer-jwt-secret-volume
          secret: 
            secretName: my-apk-helm-wso2-apk-enforcer-keystore-secret
        - name: tmp
          emptyDir: {}
        - name: config-deployer-temp
          emptyDir: {}
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gateway-api-admission-server
  namespace: default
  labels:
    name: gateway-api-admission-server
spec:
  replicas: 1
  selector:
    matchLabels:
      name: gateway-api-admission-server
  template:
    metadata:
      name: gateway-api-admission-server
      labels:
        name: gateway-api-admission-server
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/app
                  operator: In
                  values:
                  - gateway-api-ad-server
              topologyKey: "topology.kubernetes.io/zone"
            weight: 100
      containers:
        - name: webhook
          image: registry.k8s.io/gateway-api/admission-server:v1.0.0
          imagePullPolicy: Always
          args:
            - -logtostderr
            - --tlsCertFile=/etc/certs/cert
            - --tlsKeyFile=/etc/certs/key
            - -v=10
            - 2>&1
          ports:
            - containerPort: 8443
              name: webhook
          resources:
            limits:
              memory: 50Mi
              cpu: 100m
            requests:
              memory: 50Mi
              cpu: 100m
          volumeMounts:
            - name: webhook-certs
              mountPath: /etc/certs
              readOnly: true
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 65532
            runAsGroup: 65532
            capabilities:
              drop:
              - "ALL"
            seccompProfile:
              type: RuntimeDefault
      volumes:
        - name: webhook-certs
          secret:
            secretName: gateway-api-admission
---
# Source: apk-helm/templates/data-plane/gateway-components/adapter/adapter-deployment.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-wso2-apk-adapter-deployment
  namespace: default
spec:
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/app: adapter
      app.kubernetes.io/release: my-apk-helm
  template:
    metadata:
      labels:
        app.kubernetes.io/app: adapter
        app.kubernetes.io/release: my-apk-helm
      annotations:
        checksum/config: 2cf85c56ed47e2386cc782d4cad29b083d7a78f1702903095c7cb6bb53583de8
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/app
                  operator: In
                  values:
                  - adapter
              topologyKey: "topology.kubernetes.io/zone"
            weight: 100
      serviceAccountName: wso2apk-platform
      containers:
        - name: adapter
          image: docker.wso2.com/apk-adapter:1.1.0.0
          imagePullPolicy: Always
          ports:
            - containerPort: 18000
              protocol: "TCP"
            - containerPort: 8765
              protocol: "TCP"
            - containerPort: 18001
              protocol: TCP
            
          resources:
            requests:
              memory: 64Mi
              cpu: 50m
            limits:
              memory: 128Mi
              cpu: 200m
          env:
          - name: OPERATOR_POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: ADAPTER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/adapter.key
          - name: ADAPTER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/adapter.crt
          - name: ADAPTER_SERVER_NAME
            value: my-apk-helm-wso2-apk-adapter-service.default.svc
          volumeMounts:
            - name: adapter-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/adapter.key
              subPath: tls.key
            - name: adapter-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/adapter.crt
              subPath: tls.crt
            - name: adapter-keystore-secret-volume
              mountPath: /home/wso2/security/truststore/adapter-ca.crt
              subPath: ca.crt
            - name: router-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/router.crt
              subPath: tls.crt
            - name: enforcer-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/enforcer.crt
              subPath: tls.crt
            - name: adapter-truststore-consul-secret-volume
              mountPath: /home/wso2/security/truststore/consul
            - name: log-conf-volume
              mountPath: /home/wso2/conf/
            # - mountPath: /tmp/k8s-webhook-server/serving-certs
            #   name: adapter-webhook-server-cert
            #   readOnly: true
            
          readinessProbe:
            exec:
              command: [ "sh", "check_health.sh" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          livenessProbe:
            exec:
              command: [ "sh", "check_health.sh" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            readOnlyRootFilesystem: true      
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: "RuntimeDefault"
      volumes: 
        - name: adapter-keystore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-adapter-server-cert
            defaultMode: 420
        - name: adapter-truststore-consul-secret-volume
          secret: 
            secretName: my-apk-helm-wso2-apk-adapter-truststore-consul-secret
        - name: log-conf-volume
          configMap: 
            name: my-apk-helm-wso2-apk-log-conf
        # - name: adapter-webhook-server-cert
        #   secret:
        #     secretName: my-apk-helm-wso2-apk-webhook-server-cert
        #     defaultMode: 420
        - name: router-truststore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-gateway-server-cert
        - name: enforcer-truststore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-enforcer-server-cert
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/common-controller-deployment.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-wso2-apk-common-controller-deployment
  namespace: default
spec:
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/app: commoncontroller
      app.kubernetes.io/release: my-apk-helm
  template:
    metadata:
      labels:
        app.kubernetes.io/app: commoncontroller
        app.kubernetes.io/release: my-apk-helm
      annotations:
        checksum/config: 7973c8dba3555c3f320a5fb94e89d04c97247e7461bf3fde4d920e9aac4f5c8b
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/app
                  operator: In
                  values:
                  - common-controller
              topologyKey: "topology.kubernetes.io/zone"
            weight: 100
      serviceAccountName: wso2apk-platform
      containers:
        - name: commoncontroller
          image: docker.wso2.com/apk-common-controller:1.1.0.0
          imagePullPolicy: Always
          ports:
            - containerPort: 18005
              protocol: TCP
            - containerPort: 18002
              protocol: TCP
            - containerPort: 9543
              protocol: TCP
            - containerPort: 18003
              protocol: TCP
            
          resources:
            requests:
              memory: 64Mi
              cpu: 50m
            limits:
              memory: 128Mi
              cpu: 200m
          env:
          - name: OPERATOR_POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: COMMON_CONTROLLER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/commoncontroller.key
          - name: COMMON_CONTROLLER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/commoncontroller.crt
          - name: COMMON_CONTROLLER_SERVER_NAME
            value: my-apk-helm-wso2-apk-common-controller-service.default.svc
          volumeMounts:
            - name: common-controller-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/commoncontroller.key
              subPath: tls.key
            - name: common-controller-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/commoncontroller.crt
              subPath: tls.crt
            - name: common-controller-keystore-secret-volume
              mountPath: /home/wso2/security/truststore/adapter-ca.crt
              subPath: ca.crt
        
            # - name: enforcer-truststore-secret-volume
            #   mountPath: /home/wso2/security/truststore/enforcer.crt
            - name: ratelimiter-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/ratelimiter.crt
              subPath: tls.crt
            - name: ratelimiter-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/ca-ratelimiter.crt
              subPath: ca.crt
        
            - name: log-conf-volume
              mountPath: /home/wso2/conf/
            - mountPath: /tmp/k8s-webhook-server/serving-certs
              name: adapter-webhook-server-cert
              readOnly: true
            - mountPath: /home/wso2/security/sts/
              name: sts-shared-auth-key
              readOnly: true
          readinessProbe:
            exec:
              command: [ "sh", "check_health.sh" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          livenessProbe:
            exec:
              command: [ "sh", "check_health.sh" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            readOnlyRootFilesystem: true      
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: "RuntimeDefault"
      volumes:
        - name: common-controller-keystore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-common-controller-server-cert
            defaultMode: 420
        - name: log-conf-volume
          configMap: 
            name: my-apk-helm-wso2-apk-common-log-conf
        - name: adapter-webhook-server-cert
          secret:
            secretName: my-apk-helm-wso2-apk-webhook-server-cert
            defaultMode: 420
        - name: sts-shared-auth-key
          secret:
            secretName: my-apk-helm-wso2-apk-sts-shared-auth-key
            defaultMode: 420
      
        - name: ratelimiter-truststore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-ratelimiter-server-cert
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/gateway-runtime-deployment.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-wso2-apk-gateway-runtime-deployment
  namespace: default
spec:
  replicas: 1
  strategy:
    type: 
  selector:
    matchLabels:
      app.kubernetes.io/app: gateway
      app.kubernetes.io/release: my-apk-helm
  template:
    metadata:
      labels:
        app.kubernetes.io/app: gateway
        app.kubernetes.io/release: my-apk-helm
      annotations:
        checksum/config: 2cf85c56ed47e2386cc782d4cad29b083d7a78f1702903095c7cb6bb53583de8
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/app
                  operator: In
                  values:
                  - gateway-runtime
              topologyKey: "topology.kubernetes.io/zone"
            weight: 100
      automountServiceAccountToken: false
      containers:
        - name: enforcer
          image: docker.wso2.com/apk-enforcer:1.1.0.0
          imagePullPolicy: Always
          ports:
            - containerPort: 8081
              protocol: "TCP"
            - containerPort: 9001
              protocol: "TCP"
            - containerPort: 5006	
              protocol: "TCP"
            - containerPort: 8084
              protocol: "TCP"
            - containerPort: 9092
              protocol: "TCP"
            - containerPort: 18002
              protocol: "TCP"
          resources:
            requests:
              memory: 512Mi
              cpu: 500m
            limits:
              memory: 1028Mi
              cpu: 1000m
          env:
            - name: ADAPTER_HOST_NAME
              value: my-apk-helm-wso2-apk-adapter-service.default.svc
            - name: ADAPTER_HOST
              value: my-apk-helm-wso2-apk-adapter-service.default.svc
            - name: COMMON_CONTROLLER_HOST_NAME
              value: my-apk-helm-wso2-apk-common-controller-service.default.svc
            - name: COMMON_CONTROLLER_HOST
              value: my-apk-helm-wso2-apk-common-controller-service.default.svc
            - name: ENFORCER_PRIVATE_KEY_PATH
              value: /home/wso2/security/keystore/enforcer.key  
            - name: ENFORCER_PUBLIC_CERT_PATH
              value: /home/wso2/security/keystore/enforcer.crt
            - name: ENFORCER_SERVER_NAME
              value: my-apk-helm-wso2-apk-enforcer-service.default.svc
            - name: TRUSTED_CA_CERTS_PATH
              value: "/home/wso2/security/truststore"
            - name: ADAPTER_XDS_PORT
              value : "18000"
            - name: COMMON_CONTROLLER_XDS_PORT
              value : "18002"
            - name: COMMON_CONTROLLER_REST_PORT
              value : "18003"
            - name: ENFORCER_LABEL
              value : wso2-apk-default
            - name: ENFORCER_REGION
              value: UNKNOWN
            - name: XDS_MAX_MSG_SIZE
              value: "4194304"
            - name: XDS_MAX_RETRIES 
              value: "3"
            - name: enforcer_admin_pwd
              value: admin
            - name: JAVA_OPTS
              value: -Dhttpclient.hostnameVerifier=AllowAll -Xms512m -Xmx512m -XX:MaxRAMFraction=2
            - name: REDIS_USERNAME
              value: "default"
            - name: REDIS_PASSWORD
              value: ""
            - name: REDIS_HOST
              value: "redis-master"
            - name: REDIS_PORT
              value: "6379"
            - name: IS_REDIS_TLS_ENABLED
              value: "false"
            - name: REDIS_REVOKED_TOKENS_CHANNEL
              value: "wso2-apk-revoked-tokens-channel"
            - name: REDIS_KEY_FILE
              value: "/home/wso2/security/redis/redis.key"
            - name: REDIS_CERT_FILE
              value: "/home/wso2/security/redis/redis.crt"
            - name: REDIS_CA_CERT_FILE
              value: "/home/wso2/security/redis/redis-ca.key"
            - name: REVOKED_TOKEN_CLEANUP_INTERVAL
              value: "3600"
          volumeMounts:
            - name: tmp
              mountPath: /tmp
            - name: enforcer-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/enforcer.key
              subPath: tls.key
            - name: enforcer-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/enforcer.crt
              subPath: tls.crt
            - name: enforcer-keystore-secret-volume
              mountPath: /home/wso2/security/truststore/apk.crt
              subPath: ca.crt
            - name: enforcer-keystore-secret-volume
              mountPath: /home/wso2/security/truststore/enforcer.crt
              subPath: tls.crt
            - name: adapter-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/adapter.crt
              subPath: tls.crt
            # - name: common-controller-truststore-secret-volume
            #   mountPath: /home/wso2/security/truststore/adapter.pem
            - name: router-keystore-secret-volume
              mountPath: /home/wso2/security/truststore/router.crt
              subPath: tls.crt
            - name: log-conf-volume
              mountPath: /home/wso2/conf/
            - name: enforcer-jwt-secret-volume
              mountPath: /home/wso2/security/keystore/mg.pem
              subPath: mg.pem
            - name: enforcer-jwt-secret-volume
              mountPath: /home/wso2/security/truststore/mg.pem
              subPath: mg.pem
            - name: enforcer-jwt-secret-volume
              mountPath: /home/wso2/security/keystore/mg.key
              subPath: mg.key
            - name: enforcer-trusted-certs
              mountPath: /home/wso2/security/truststore/wso2carbon.pem
              subPath: wso2carbon.pem
            - name: enforcer-apikey-cert
              mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
              subPath: wso2-apim-carbon.pem
            - name: idp-certificate-secret-volume
              mountPath: /home/wso2/security/truststore/idp.pem
            
              subPath: wso2carbon.pem
            
            
          readinessProbe:
            exec:
              command: [ "sh", "check_health.sh" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          livenessProbe:
            exec:
              command: [ "sh", "check_health.sh" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            readOnlyRootFilesystem: true
            runAsNonRoot: true
        - name: router
          image: docker.wso2.com/apk-router:1.1.0.0
          imagePullPolicy: Always
          ports:
            
            - containerPort: 9095
              protocol: "TCP"
            - containerPort: 9090
              protocol: "TCP"
            - containerPort: 9091
              protocol: "TCP"
            - containerPort: 9000
              protocol: "TCP"
          resources:
            requests:
              memory: 128Mi
              cpu: 200m
            limits:
              memory: 1028Mi
              cpu: 1000m
          env:
            - name: ADAPTER_HOST_NAME
              value: my-apk-helm-wso2-apk-adapter-service.default.svc
            - name: ADAPTER_HOST
              value: my-apk-helm-wso2-apk-adapter-service.default.svc
            - name: ENFORCER_HOST
              value: "127.0.0.1"
            - name: ENFORCER_ANALYTICS_HOST
              value: "127.0.0.1"
            - name: ROUTER_ADMIN_HOST
              value: "0.0.0.0"
            - name: ROUTER_ADMIN_PORT
              value: "9000"
            - name: ROUTER_PORT
              value: "9095"
            - name: ROUTER_CLUSTER
              value: "apk_router_cluster"
            - name: ROUTER_LABEL
              value: wso2-apk-default
            - name: ROUTER_PRIVATE_KEY_PATH
              value: "/home/wso2/security/keystore/router.key"
            - name: ROUTER_PUBLIC_CERT_PATH
              value: "/home/wso2/security/keystore/router.crt"
            - name: ADAPTER_PORT
              value: "18000"
            - name: ADAPTER_CA_CERT_PATH
              value: "/home/wso2/security/truststore/adapter.crt"
            - name: ENFORCER_PORT
              value: "8081"
            - name: ENFORCER_ANALYTICS_RECEIVER_PORT
              value: "18090"
            - name: ENFORCER_CA_CERT_PATH
              value: "/home/wso2/security/truststore/enforcer.crt"
            - name: CONCURRENCY
              value: "2"
          volumeMounts:
            - name: router-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/router.key
              subPath: tls.key
            - name: router-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/router.crt
              subPath: tls.crt
            - name: adapter-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/adapter.crt
              subPath: tls.crt
            - name: enforcer-keystore-secret-volume
              mountPath: /home/wso2/security/truststore/enforcer.crt
              subPath: tls.crt
            - name: log-conf-volume
              mountPath: /home/wso2/conf/
            
            - name: ratelimiter-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/ratelimiter.crt
              subPath: tls.crt
            - name: ratelimiter-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
              subPath: ca.crt
            
          livenessProbe:
            exec:
              command: [ "sh", "router_check_health.sh", "health" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          readinessProbe:
            exec:
              command: [ "sh", "router_check_health.sh", "ready" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          startupProbe:
            exec:
              command: [ "sh", "router_check_health.sh", "ready" ]
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
      securityContext:
        seccompProfile:
          type: "RuntimeDefault"
      volumes:
      
        - name: ratelimiter-truststore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-ratelimiter-server-cert
      
        # - name: common-controller-truststore-secret-volume
        #   secret:
        #
        #     secretName: my-apk-helm-wso2-apk-common-controller-server-cert
        #
        #     defaultMode: 420
        - name: enforcer-keystore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-enforcer-server-cert
        - name: log-conf-volume
          configMap: 
            name: my-apk-helm-wso2-apk-log-conf
        - name: router-keystore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-gateway-server-cert
        - name: adapter-truststore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-adapter-server-cert
        - name: enforcer-jwt-secret-volume
          secret: 
            secretName: my-apk-helm-wso2-apk-enforcer-keystore-secret
        - name: enforcer-trusted-certs
          secret: 
            secretName: my-apk-helm-wso2-apk-enforcer-truststore-secret 
        - name: enforcer-apikey-cert
          secret: 
            secretName: my-apk-helm-wso2-apk-enforcer-truststore-secret 
        - name: idp-certificate-secret-volume
          secret:
          
            secretName: my-apk-helm-wso2-apk-enforcer-truststore-secret
          
          
        - name: tmp
          emptyDir: {}
---
# Source: apk-helm/templates/data-plane/ratelimiter/ratelimiter-deployment.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-wso2-apk-ratelimiter-deployment
  namespace: default
spec:
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/app: ratelimiter
      app.kubernetes.io/release: my-apk-helm
  template:
    metadata:
      labels:
        app.kubernetes.io/app: ratelimiter
        app.kubernetes.io/release: my-apk-helm
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/app
                  operator: In
                  values:
                  - rate-limiter
              topologyKey: "topology.kubernetes.io/zone"
            weight: 100
      automountServiceAccountToken: false
      serviceAccountName: wso2apk-platform
      containers:
        
        - name: ratelimiter
          image: docker.wso2.com/apk-ratelimiter:1.1.0.0
          imagePullPolicy: Always
          ports:
            - containerPort: 8090
              protocol: "TCP"
            - containerPort: 8091
              protocol: "TCP"
            - containerPort: 6070
              protocol: "TCP"
          resources:
            requests:
              memory: 64Mi
              cpu: 50m
            limits:
              memory: 128Mi
              cpu: 100m
          env:
            - name: HOST
              value: "0.0.0.0"
            - name: PORT
              value: "8090"
            
            - name: USE_STATSD
              value: "false"
            
            - name: LOG_LEVEL
              value: "DEBUG"
            - name: LIMIT_RESPONSE_HEADERS_ENABLED
              value: "false"
            - name: REDIS_TYPE
           
              value: "single"
            
            - name: REDIS_SOCKET_TYPE
              value: "tcp"
            - name: REDIS_URL
            
              value: "redis-master:6379"
            
            - name: REDIS_PIPELINE_WINDOW
              value: "0.2ms"
            - name: REDIS_PIPELINE_LIMIT
              value: "0"
            
            
            
            - name: GRPC_HOST
              value: "0.0.0.0"
            - name: GRPC_PORT
              value: "8091"
            - name: GRPC_SERVER_USE_TLS
              value: "true"
            - name: GRPC_SERVER_TLS_KEY
              value: "/home/wso2/security/keystore/ratelimiter.key"
            - name: GRPC_SERVER_TLS_CERT
              value: "/home/wso2/security/keystore/ratelimiter.crt"
            - name: GRPC_CLIENT_TLS_CACERT
              value: "/home/wso2/security/truststore/ratelimiter-ca.crt"
            - name: RATELIMITER_LABEL
              value: "ratelimiter"
            - name: CONFIG_GRPC_XDS_SERVER_URL
              value: "my-apk-helm-wso2-apk-common-controller-service.default.svc:18005"
            - name: CONFIG_GRPC_XDS_SERVER_USE_TLS
              value: "true"
            - name: CONFIG_GRPC_XDS_CLIENT_TLS_KEY
              value: "/home/wso2/security/keystore/ratelimiter.key"
            - name: CONFIG_GRPC_XDS_CLIENT_TLS_CERT
              value: "/home/wso2/security/keystore/ratelimiter.crt"
            - name: CONFIG_GRPC_XDS_SERVER_TLS_CACERT
              value: "/home/wso2/security/truststore/ratelimiter-ca.crt"
            - name: CONFIG_GRPC_XDS_SERVER_TLS_SAN
              value: "my-apk-helm-wso2-apk-common-controller-service.default.svc"
            
          volumeMounts:
            - name: ratelimiter-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/ratelimiter.key
              subPath: tls.key
            - name: ratelimiter-keystore-secret-volume
              mountPath: /home/wso2/security/keystore/ratelimiter.crt
              subPath: tls.crt
            - name: ratelimiter-keystore-secret-volume
              mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
              subPath: ca.crt
            - name: common-controller-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/adapter.pem
              subPath: tls.crt
            - name: router-truststore-secret-volume
              mountPath: /home/wso2/security/truststore/router.pem
              subPath: tls.crt
            
          livenessProbe:
            httpGet:
              port: 8090
              path: /healthcheck
              scheme: HTTP
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          readinessProbe:
            httpGet:
              port: 8090
              path: /healthcheck
              scheme: HTTP
            initialDelaySeconds: 20
            periodSeconds: 20
            failureThreshold: 5
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            readOnlyRootFilesystem: true
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: "RuntimeDefault"

      volumes:
        - name: ratelimiter-keystore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-ratelimiter-server-cert
            defaultMode: 420
        - name: common-controller-truststore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-common-controller-server-cert
            defaultMode: 420
        - name: router-truststore-secret-volume
          secret:
            secretName: my-apk-helm-wso2-apk-gateway-server-cert
            defaultMode: 420
---
# Source: apk-helm/templates/idp/idp-ds/idp-ds-deployment.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-wso2-apk-idpds-deployment
  namespace: default
spec:
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/app: idp-ds
      app.kubernetes.io/release: my-apk-helm
  template:
    metadata:
      labels:
        app.kubernetes.io/app: idp-ds
        app.kubernetes.io/release: my-apk-helm
      annotations:
        checksum/config: a8e9b6f1b88f1c2565b4c13096dc84cb17bdf414e340d929bf5d8376dd04921c
    spec:
      automountServiceAccountToken: false
      initContainers:
        - name: init-db
          image: busybox:1.32
          command: ['sh', '-c', 'echo -e "Checking for the availability of DB Server deployment"; while ! nc -z "wso2apk-db-service" 5432; do sleep 1; printf "-"; done; echo -e "  >> DB Server has started";']
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            readOnlyRootFilesystem: true
      containers:
        - name: idpds
          image: docker.wso2.com/apk-idp-domain-service:1.1.0.0
          imagePullPolicy: Always
          ports:
            - containerPort: 9443
              protocol: "TCP"
                        
          env:
            
          readinessProbe:
            httpGet:
              path: /health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20    
          livenessProbe:
            httpGet:
              path: /health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20
          resources:
            requests:
              memory: 512Mi
              cpu: 200m
            limits:
              memory: 1024Mi
              cpu: 500m
          volumeMounts:
            - mountPath: /home/wso2apk/idp/conf/Config.toml
              name: config-toml-volume
              subPath: Config.toml
            - mountPath: /home/wso2apk/idp/security/wso2carbon.key
              name: idp-signing-keystore-volume
              subPath: wso2carbon.key
            - mountPath: /home/wso2apk/idp/security/wso2carbon.pem
              name: idp-signing-keystore-volume
              subPath: wso2carbon.pem
            - name: idp-ds-tls-volume
              mountPath: /home/wso2apk/idp/security/idp.key
              subPath: tls.key
            - name: idp-ds-tls-volume
              mountPath: /home/wso2apk/idp/security/idp.crt
              subPath: tls.crt
            - name: db-secret-volume
              mountPath: /home/wso2apk/idp/security/database/
            - name: tmp
              mountPath: /tmp
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            runAsNonRoot: true
            readOnlyRootFilesystem: true      
      securityContext:
        seccompProfile:
          type: "RuntimeDefault"
      volumes:
        - name: config-toml-volume
          configMap:
            name: my-apk-helm-wso2-apk-idp-ds-configmap
        - name: idp-signing-keystore-volume
          secret: 
            secretName: my-apk-helm-wso2-apk-idp-signing-keystore-secret
        - name: idp-ds-tls-volume
          secret:
       
            secretName: my-apk-helm-wso2-apk-idp-ds-server-cert
       
        - name: db-secret-volume
          secret:
       
            secretName: apk-db-secret
            items:
              - key: "DB_PASSWORD"
                path: db-password
       
        - name: tmp
          emptyDir: {}
---
# Source: apk-helm/templates/idp/idp-ui/idp-ui-deployment.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-apk-helm-wso2-apk-idpui-deployment
  namespace: default
spec:
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/app: idp-ui
      app.kubernetes.io/release: my-apk-helm
  template:
    metadata:
      labels:
        app.kubernetes.io/app: idp-ui
        app.kubernetes.io/release: my-apk-helm
    spec:
      automountServiceAccountToken: false
      containers:
        - name: idpui
          image: docker.wso2.com/apk-idp-ui:1.1.0.0
          imagePullPolicy: Always
          ports:
            - containerPort: 9443
              protocol: "TCP"
          env:
          - name: IDP_LOGIN_URL
            value: https://idp.am.wso2.com:9095/commonauth/login
          - name: IDP_AUTH_CALLBACK_URL
            value: https://idp.am.wso2.com:9095/oauth2/auth-callback
          - name: SSL_CERT_PATH
            value: /home/wso2apk/security/idp.crt
          - name: SSL_KEY_PATH
            value: /home/wso2apk/security/idp.key
          readinessProbe:
            httpGet:
              path: /authenticationEndpoint/health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20    
          livenessProbe:
            httpGet:
              path: /authenticationEndpoint/health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            readOnlyRootFilesystem: true
          resources:
            requests:
              memory: 64Mi
              cpu: 50m
            limits:
              memory: 256Mi
              cpu: 100m
          volumeMounts:
            - name: idp-ui-tls-volume
              mountPath: /home/wso2apk/security/idp.key
              subPath: tls.key
            - name: idp-ui-tls-volume
              mountPath: /home/wso2apk/security/idp.crt
              subPath: tls.crt      
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: "RuntimeDefault"

      volumes:
        - name: idp-ui-tls-volume
          secret:
       
            secretName: my-apk-helm-wso2-apk-idp-ui-server-cert
---
# Source: apk-helm/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: wso2apk-db-service
  namespace: "default"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-11.9.6
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: primary
  annotations:
spec:
  replicas: 1
  serviceName: wso2apk-db-service-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/instance: my-apk-helm
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: wso2apk-db-service
      labels:
        app.kubernetes.io/name: postgresql
        helm.sh/chart: postgresql-11.9.6
        app.kubernetes.io/instance: my-apk-helm
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: primary
      annotations:
        checksum/extended-configuration: ee540ed921aec0784eaab6860ff1e042ff29bdf0231e9575a06e62571b783175
    spec:
      serviceAccountName: default
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/name: postgresql
                    app.kubernetes.io/instance: my-apk-helm
                    app.kubernetes.io/component: primary
                namespaces:
                  - "default"
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      hostNetwork: false
      hostIPC: false
      initContainers:
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:14.5.0-debian-11-r21
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
          env:
            - name: BITNAMI_DEBUG
              value: "true"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "wso2carbon"
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: wso2apk-db-service
                  key: postgres-password
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: wso2apk-db-service
                  key: password
            - name: POSTGRES_DB
              value: "WSO2AM_DB"
            # Replication
            # Initdb
            - name: POSTGRESQL_INITSCRIPTS_USERNAME
              value: wso2carbon
            - name: POSTGRESQL_INITSCRIPTS_PASSWORD
              value: "wso2carbon"
            # Standby
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "wso2carbon" -d "dbname=WSO2AM_DB" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                
                - |
                  exec pg_isready -U "wso2carbon" -d "dbname=WSO2AM_DB" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits: {}
            requests:
              cpu: 250m
              memory: 256Mi
          volumeMounts:
            - name: custom-init-scripts
              mountPath: /docker-entrypoint-initdb.d/
            - name: postgresql-extended-config
              mountPath: /bitnami/postgresql/conf/conf.d/
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: postgresql-extended-config
          configMap:
            name: wso2apk-db-service-extended-configuration
        - name: custom-init-scripts
          configMap:
            name: postgres-initdb-scripts-configmap
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: apk-helm/charts/redis/templates/master/application.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: redis-master
  namespace: "default"
  labels:
    app.kubernetes.io/name: redis
    helm.sh/chart: redis-17.8.0
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: master
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: redis
      app.kubernetes.io/instance: my-apk-helm
      app.kubernetes.io/component: master
  serviceName: redis-headless
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        app.kubernetes.io/name: redis
        helm.sh/chart: redis-17.8.0
        app.kubernetes.io/instance: my-apk-helm
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: master
      annotations:
        checksum/configmap: 65dff671dcd113c45aeef4275dcab6f67bfe6f6cadb5c8fedfc6fd4c8819ad3a
        checksum/health: 5ca2672ca3cd2024f31594988d0bdebe1e8b0826751599bbcffc4d3158562753
        checksum/scripts: 972af6cce20f36a5069f5f69f3d5b8d931bc415485454038260c836d31a65c5b
        checksum/secret: 01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b
    spec:
      
      securityContext:
        fsGroup: 1001
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccountName: redis
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/name: redis
                    app.kubernetes.io/instance: my-apk-helm
                    app.kubernetes.io/component: master
                namespaces:
                  - "default"
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      terminationGracePeriodSeconds: 30
      containers:
        - name: redis
          image: docker.io/bitnami/redis:7.0.8-debian-11-r13
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
          command:
            - /bin/bash
          args:
            - -c
            - /opt/bitnami/scripts/start-scripts/start-master.sh
          env:
            - name: BITNAMI_DEBUG
              value: "true"
            - name: REDIS_REPLICATION_MODE
              value: master
            - name: ALLOW_EMPTY_PASSWORD
              value: "yes"
            - name: REDIS_TLS_ENABLED
              value: "no"
            - name: REDIS_PORT
              value: "6379"
          ports:
            - name: redis
              containerPort: 6379
          livenessProbe:
            initialDelaySeconds: 20
            periodSeconds: 5
            # One second longer than command timeout should prevent generation of zombie processes.
            timeoutSeconds: 6
            successThreshold: 1
            failureThreshold: 5
            exec:
              command:
                - sh
                - -c
                - /health/ping_liveness_local.sh 5
          readinessProbe:
            initialDelaySeconds: 20
            periodSeconds: 5
            timeoutSeconds: 2
            successThreshold: 1
            failureThreshold: 5
            exec:
              command:
                - sh
                - -c
                - /health/ping_readiness_local.sh 1
          resources:
            limits: {}
            requests: {}
          volumeMounts:
            - name: start-scripts
              mountPath: /opt/bitnami/scripts/start-scripts
            - name: health
              mountPath: /health
            - name: redis-data
              mountPath: /data
            - name: config
              mountPath: /opt/bitnami/redis/mounted-etc
            - name: redis-tmp-conf
              mountPath: /opt/bitnami/redis/etc/
            - name: tmp
              mountPath: /tmp
      volumes:
        - name: start-scripts
          configMap:
            name: redis-scripts
            defaultMode: 0755
        - name: health
          configMap:
            name: redis-health
            defaultMode: 0755
        - name: config
          configMap:
            name: redis-configuration
        - name: redis-tmp-conf
          emptyDir: {}
        - name: tmp
          emptyDir: {}
  volumeClaimTemplates:
    - metadata:
        name: redis-data
        labels:
          app.kubernetes.io/name: redis
          app.kubernetes.io/instance: my-apk-helm
          app.kubernetes.io/component: master
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: gateway-api-admission
  annotations:
  labels:
    name: gateway-api-webhook
  namespace: default
spec:
  template:
    metadata:
      name: gateway-api-admission-create
      labels:
        name: gateway-api-webhook
    spec:
      containers:
        - name: create
          image: registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.1.1
          imagePullPolicy: IfNotPresent
          args:
            - create
            - --host=gateway-api-admission-server,gateway-api-admission-server.default.svc
            - --namespace=default
            - --secret-name=gateway-api-admission
          env:
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 2000
            runAsGroup: 2000
            capabilities:
              drop:
              - "ALL"
            seccompProfile:
              type: RuntimeDefault
      restartPolicy: OnFailure
      
      serviceAccountName: gateway-api-admission
      
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: "RuntimeDefault"
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: gateway-api-admission-patch
  labels:
    name: gateway-api-webhook
  namespace: default
spec:
  template:
    metadata:
      name: gateway-api-admission-patch
      labels:
        name: gateway-api-webhook
    spec:
      containers:
        - name: patch
          image: registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.1.1
          imagePullPolicy: IfNotPresent
          args:
            - patch
            - --webhook-name=my-apk-helm-wso2-apk-gateway-api-admission
            - --namespace=default
            - --patch-mutating=false
            - --patch-validating=true
            - --secret-name=gateway-api-admission
            - --patch-failure-policy=Fail
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 2000
            runAsGroup: 2000
            capabilities:
              drop:
              - "ALL"
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
      restartPolicy: OnFailure
      
      serviceAccountName: gateway-api-admission
      
      securityContext:
        runAsNonRoot: true
        runAsUser: 2000
        runAsGroup: 2000
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/gateway-runtime-autoscaller.yaml
# --------------------------------------------------------------------
# Copyright (c) 2022, WSO2 LLC. (http://wso2.com) All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# -----------------------------------------------------------------------
---
# Source: apk-helm/templates/cert-manager/certificates/adapter-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-adapter-server-cert
  namespace: default
spec:
  commonName: adapter-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-adapter-service.default.svc
  - my-apk-helm-wso2-apk-adapter-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-adapter-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/common-controller-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-common-controller-server-cert
  namespace: default
spec:
  commonName: common-controller-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-common-controller-service.default.svc
  - my-apk-helm-wso2-apk-common-controller-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-common-controller-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/config-deployer-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-config-ds-server-cert
  namespace: default
spec:
  commonName: config-ds-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-config-ds-service.default.svc
  - my-apk-helm-wso2-apk-config-ds-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-config-ds-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/enforcer-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-enforcer-server-cert
  namespace: default
spec:
  commonName: enforcer-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-enforcer-service.default.svc
  - my-apk-helm-wso2-apk-enforcer-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-enforcer-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/gateway-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-gateway-server-cert
  namespace: default
spec:
  commonName: gateway-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-gateway-service.default.svc
  - my-apk-helm-wso2-apk-gateway-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-gateway-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/gw-listener-certificate.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-gw-listener-cert
  namespace: default
spec:
  dnsNames:
    - "*.gw.wso2.com"
    - "*.sandbox.gw.wso2.com"
    - "prod.gw.wso2.com"
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-gw-listener-cert
---
# Source: apk-helm/templates/cert-manager/certificates/idp-listener-certificate.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-idp-listener-cert
  namespace: default
spec:
  dnsNames:
  - "*.idp.am.wso2.com"
  - "idp.am.wso2.com"
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-idp-listener-cert
---
# Source: apk-helm/templates/cert-manager/certificates/idp-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-idp-ds-server-cert
  namespace: default
spec:
  commonName: idp-ds-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-idp-ds-service.default.svc
  - my-apk-helm-wso2-apk-idp-ds-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-idp-ds-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/idp-ui-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-idp-ui-server-cert
  namespace: default
spec:
  commonName: idp-ui-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-idp-ui-service.default.svc
  - my-apk-helm-wso2-apk-idp-ui-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-idp-ui-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/localhost-listener-certificate.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-localhost-listener-cert
  namespace: default
spec:
  dnsNames:
  - "locahost"
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-localhost-listener-cert
---
# Source: apk-helm/templates/cert-manager/certificates/ratelimiter-server-certificate.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-ratelimiter-server-cert
  namespace: default
spec:
  commonName: ratelimiter-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-ratelimiter-service.default.svc
  - my-apk-helm-wso2-apk-ratelimiter-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-ratelimiter-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/runtime-domain-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-runtime-ds-server-cert
  namespace: default
spec:
  commonName: runtime-ds-service
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  dnsNames:
  - my-apk-helm-wso2-apk-runtime-ds-service.default.svc
  - my-apk-helm-wso2-apk-runtime-ds-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-runtime-ds-server-cert
---
# Source: apk-helm/templates/cert-manager/certificates/system-api-listener-certificate.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-system-api-listener-cert
  namespace: default
spec:
  dnsNames:
  - "*.api.am.wso2.com"
  - "api.am.wso2.com"
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-system-api-listener-cert
---
# Source: apk-helm/templates/cert-manager/certificates/webhook-server-certificate.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

# The following manifests contain a self-signed issuer CR and a certificate CR.
# More document can be found at https://docs.cert-manager.io
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: my-apk-helm-wso2-apk-webhook-server-cert
  namespace: default
spec:
  dnsNames:
  - my-apk-helm-wso2-apk-common-controller-service.default.svc
  - my-apk-helm-wso2-apk-common-controller-service.default.svc.cluster.local
  issuerRef:
    kind: ClusterIssuer
    name: my-apk-helm-wso2-apk-selfsigned-issuer
  secretName: my-apk-helm-wso2-apk-webhook-server-cert
---
# Source: apk-helm/templates/cert-manager/issuers/self-signed-issuer.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.

apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: my-apk-helm-wso2-apk-selfsigned-issuer
spec:
  ca:
    secretName: apk-root-certificate
---
# Source: apk-helm/templates/data-plane/gateway-components/adapter/gateway.yaml
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: wso2-apk-default
  namespace: default
  annotations:
    cert-manager.io/issuer: my-apk-helm-wso2-apk-selfsigned-issuer
spec:
  gatewayClassName: "wso2-apk-default"
  listeners:
    
    - name: httpslistener
      hostname: "api.am.wso2.com"
      port: 9095
      protocol: "HTTPS"
      tls:
        mode: Terminate
        certificateRefs:
          - kind: Secret
            group: ""
            name: my-apk-helm-wso2-apk-system-api-listener-cert
            namespace: default
    
    
    - name: idplistener
      hostname: "idp.am.wso2.com"
      port: 9095
      protocol: "HTTPS"
      tls:
        mode: Terminate
        certificateRefs:
          - kind: Secret
            group: ""
            name: my-apk-helm-wso2-apk-idp-listener-cert
            namespace: default
    
    
    - name: gatewaylistener
      hostname: "*.gw.wso2.com"
      port: 9095
      protocol: "HTTPS"
      tls:  
        mode: Terminate
        certificateRefs:
          - kind: Secret
            group: ""
            name: my-apk-helm-wso2-apk-gw-listener-cert
            namespace: default
    
    - name: systemlistener
      hostname: "localhost"
      port: 9095
      protocol: "HTTPS"
      tls:
        mode: Terminate
        certificateRefs:
          - kind: Secret
            group: ""
            name: my-apk-helm-wso2-apk-localhost-listener-cert
            namespace: default
---
# Source: apk-helm/templates/data-plane/gateway-components/adapter/gateway-class.yaml
# Copyright (c) 2024, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: gateway.networking.k8s.io/v1
kind: GatewayClass
metadata:
  name: "wso2-apk-default"
spec:
  controllerName: "wso2.com/apk-gateway-default"
---
# Source: apk-helm/templates/data-plane/config-deployer/config-deploy-api-route.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "gateway.networking.k8s.io/v1beta1"
kind: "HTTPRoute"
metadata:
  name: "my-apk-helm-wso2-apk-config-deploy-api-route"
  namespace: default
  labels:
    managed-by: "apk"
spec:
  hostnames:
  - "api.am.wso2.com"
  rules:
  - matches:
    - path:
        type: "RegularExpression"
        value: "/apis/deploy"
      method: "POST"
    backendRefs:
    - group: "dp.wso2.com"
      kind: "Backend"
      name: "my-apk-helm-wso2-apk-config-deployer-ds-backend"
    filters:
    - extensionRef:
        group: dp.wso2.com
        kind: Scope
        name: my-apk-helm-wso2-apk-api-create-scope
      type: ExtensionRef
  - matches:
    - path:
        type: "RegularExpression"
        value: "/apis/undeploy"
      method: "POST"
    backendRefs:
    - group: "dp.wso2.com"
      kind: "Backend"
      name: "my-apk-helm-wso2-apk-config-deployer-ds-backend"
    filters:
    - extensionRef:
        group: dp.wso2.com
        kind: Scope
        name: my-apk-helm-wso2-apk-api-create-scope
      type: ExtensionRef
  parentRefs:
  - group: "gateway.networking.k8s.io"
    kind: "Gateway"
    name: wso2-apk-default
    sectionName: "httpslistener"
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/jwks-domain-api-httproute.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "gateway.networking.k8s.io/v1beta1"
kind: "HTTPRoute"
metadata:
  name: my-apk-helm-wso2-apk-jwks-endpoint-ds-httproute
  namespace: default
  labels:
    api-name: "jwks-endpoint"
    api-version: "1.0.0"
spec:
  hostnames:
  - "api.am.wso2.com"
  rules:
  - matches:
    - path:
        type: "PathPrefix"
        value: "/" 
    backendRefs:
    - group: dp.wso2.com
      kind: Backend
      name: my-apk-helm-wso2-apk-jwks-endpoint-ds-backend
  parentRefs:
  - group: "gateway.networking.k8s.io"
    kind: "Gateway"
    name: wso2-apk-default
    sectionName: "httpslistener"
---
# Source: apk-helm/templates/idp/authenticationEndpoint-domain-api-httproute.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "gateway.networking.k8s.io/v1beta1"
kind: "HTTPRoute"
metadata:
  name: my-apk-helm-wso2-apk-authentication-endpoint-ds-httproute
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
spec:
  hostnames:
  - "idp.am.wso2.com"
  rules:
  - matches:
    - path:
        type: "PathPrefix"
        value: "/" 
    backendRefs:
    - group: dp.wso2.com
      kind: Backend
      name: my-apk-helm-wso2-apk-authentication-endpoint-ds-backend
  parentRefs:
  - group: "gateway.networking.k8s.io"
    kind: "Gateway"
    name: wso2-apk-default
    sectionName: "idplistener"
---
# Source: apk-helm/templates/idp/commonoauth-domain-api-httproute.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "gateway.networking.k8s.io/v1beta1"
kind: "HTTPRoute"
metadata:
  name: my-apk-helm-wso2-apk-commonoauth-ds-httproute
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
spec:
  hostnames:
  - "idp.am.wso2.com"
  rules:
  - matches:
    - path:
        type: "PathPrefix"
        value: "/"
    backendRefs:
    - group: dp.wso2.com
      kind: Backend
      name: my-apk-helm-wso2-apk-commonoauth-ds-backend
  parentRefs:
  - group: "gateway.networking.k8s.io"
    kind: "Gateway"
    name: wso2-apk-default
    sectionName: "idplistener"
---
# Source: apk-helm/templates/idp/dcr-domain-api-httproute.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "gateway.networking.k8s.io/v1beta1"
kind: "HTTPRoute"
metadata:
  name: my-apk-helm-wso2-apk-dcr-ds-httproute
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
spec:
  hostnames:
  - "idp.am.wso2.com"
  rules:
  - matches:
    - path:
        type: "PathPrefix"
        value: "/"
    backendRefs:
    - group: dp.wso2.com
      kind: Backend
      name: my-apk-helm-wso2-apk-dcr-ds-backend
  parentRefs:
  - group: "gateway.networking.k8s.io"
    kind: "Gateway"
    name: wso2-apk-default
    sectionName: "idplistener"
---
# Source: apk-helm/templates/idp/oauth-domain-api-httproute.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "gateway.networking.k8s.io/v1beta1"
kind: "HTTPRoute"
metadata:
  name: my-apk-helm-wso2-apk-oauth-ds-httproute
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
spec:
  hostnames:
  - "idp.am.wso2.com"
  rules:
  - matches:
    - path:
        type: "PathPrefix"
        value: "/"
    backendRefs:
    - group: dp.wso2.com
      kind: Backend
      name: my-apk-helm-wso2-apk-oauth-ds-backend
  parentRefs:
  - group: "gateway.networking.k8s.io"
    kind: "Gateway"
    name: wso2-apk-default
    sectionName: "idplistener"
---
# Source: apk-helm/charts/cert-manager/templates/webhook-mutating-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: my-apk-helm-cert-manager-webhook
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
  annotations:
    cert-manager.io/inject-ca-from-secret: "default/my-apk-helm-cert-manager-webhook-ca"
webhooks:
  - name: webhook.cert-manager.io
    rules:
      - apiGroups:
          - "cert-manager.io"
          - "acme.cert-manager.io"
        apiVersions:
          - "v1"
        operations:
          - CREATE
          - UPDATE
        resources:
          - "*/*"
    admissionReviewVersions: ["v1"]
    # This webhook only accepts v1 cert-manager resources.
    # Equivalent matchPolicy ensures that non-v1 resource requests are sent to
    # this webhook (after the resources have been converted to v1).
    matchPolicy: Equivalent
    timeoutSeconds: 10
    failurePolicy: Fail
    # Only include 'sideEffects' field in Kubernetes 1.12+
    sideEffects: None
    clientConfig:
      service:
        name: my-apk-helm-cert-manager-webhook
        namespace: default
        path: /mutate
---
# Source: apk-helm/charts/cert-manager/templates/webhook-validating-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: my-apk-helm-cert-manager-webhook
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
  annotations:
    cert-manager.io/inject-ca-from-secret: "default/my-apk-helm-cert-manager-webhook-ca"
webhooks:
  - name: webhook.cert-manager.io
    namespaceSelector:
      matchExpressions:
      - key: "cert-manager.io/disable-validation"
        operator: "NotIn"
        values:
        - "true"
      - key: "name"
        operator: "NotIn"
        values:
        - default
    rules:
      - apiGroups:
          - "cert-manager.io"
          - "acme.cert-manager.io"
        apiVersions:
          - "v1"
        operations:
          - CREATE
          - UPDATE
        resources:
          - "*/*"
    admissionReviewVersions: ["v1"]
    # This webhook only accepts v1 cert-manager resources.
    # Equivalent matchPolicy ensures that non-v1 resource requests are sent to
    # this webhook (after the resources have been converted to v1).
    matchPolicy: Equivalent
    timeoutSeconds: 10
    failurePolicy: Fail
    sideEffects: None
    clientConfig:
      service:
        name: my-apk-helm-cert-manager-webhook
        namespace: default
        path: /validate
---
# Source: apk-helm/templates/data-plane/gateway-api/gateway-api.yaml
# --------------------------------------------------------------------
# Copyright (c) 2022, WSO2 LLC. (http://wso2.com) All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# -----------------------------------------------------------------------
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: my-apk-helm-wso2-apk-gateway-api-admission
webhooks:
  - name: validate.gateway.networking.k8s.io
    matchPolicy: Equivalent
    rules:
      - operations: [ "CREATE" , "UPDATE" ]
        apiGroups: [ "gateway.networking.k8s.io" ]
        apiVersions: [ "v1alpha2", "v1beta1" ]
        resources: [ "gateways", "gatewayclasses", "httproutes" ]
    failurePolicy: Fail
    sideEffects: None
    admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: gateway-api-admission-server
        namespace: default
        path: "/validate"
    namespaceSelector:
      matchExpressions:
      - key: metadata.namespace
        operator: In
        values: ["default"]
---
# Source: apk-helm/charts/cert-manager/templates/startupapicheck-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: my-apk-helm-cert-manager-startupapicheck
  namespace: default
  annotations:
    helm.sh/hook: post-install
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    helm.sh/hook-weight: "-5"
  labels:
    app: startupapicheck
    app.kubernetes.io/name: startupapicheck
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "startupapicheck"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/api/notification-api.yaml
kind: "ConfigMap"
apiVersion: "v1"
metadata:
  name: "my-apk-helm-wso2-apk-notification-api-definition"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
binaryData:
  definition: "H4sIAAAAAAAA/31TTW/bMAz9K4LOi5N028W3dsghCJYUa7rLUhSqTc/qrI9KdFYv8H8fKTtrgwTzxTb5RL73SB2k82CV1zKXH7NZNpcfhNS2cjI/SNTYACXWDnWlC4XaWXF9u2RMCbEI2nOIENtaR84IH9xeU04oYaColdXRiMoFEcGW2v6kuH1fDR0dW2U7yzX3EOJQb05UZrKnWITAYZn/OMg2NJSrEX3Mp1MincGrMr6BrHBmup+f87oNrmyL1GkoJPuHVLRog8YuVS2hUm2D9P2Qkl5hHVn+NDHt+NO7iPyOrTEqdEdPOiZ/3nXwi0zAGkTsIoIZFXoVlAE8CrL0Q3jsPAy+089LC9TggsMgGCdcdeJgJr62EcUTiJ3cblaL9eO3xffNl+vtcrPeyYwLBXhpdYBS5hhaYPnYpbnSXAwD4NU3roS3fFGDUWkDmFlOBwLNTvbJHy4HEW9cmawpnEWwyR3lfTPSmj5Hpn04r+WenqHAZEag3QtIRqW0+wX2Us8+MUxzfoeTnWvDRBUFxDhJsUkNAUb8qeQhEr2zceh1NZvx69ThzSot3KdLuRtVilH3CJqfg+6tarF2Qf+hxoz6fKnUkuwKVjXiLi2kWITgaC37/67loIq2nDSQ2UnEEX3HDg+6/p15c5spXbHbVeN+J5A2PCU9TGwknGZ2f3K9kLTyvZJpIWhSfLgfnr9aQ7ylNgQAAA=="
---
# Source: apk-helm/charts/cert-manager/templates/startupapicheck-rbac.yaml
# create certificate role
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: my-apk-helm-cert-manager-startupapicheck:create-cert
  namespace: default
  labels:
    app: startupapicheck
    app.kubernetes.io/name: startupapicheck
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "startupapicheck"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
  annotations:
    helm.sh/hook: post-install
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    helm.sh/hook-weight: "-5"
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates"]
    verbs: ["create"]
---
# Source: apk-helm/charts/cert-manager/templates/startupapicheck-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: my-apk-helm-cert-manager-startupapicheck:create-cert
  namespace: default
  labels:
    app: startupapicheck
    app.kubernetes.io/name: startupapicheck
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "startupapicheck"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
  annotations:
    helm.sh/hook: post-install
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    helm.sh/hook-weight: "-5"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: my-apk-helm-cert-manager-startupapicheck:create-cert
subjects:
  - kind: ServiceAccount
    name: my-apk-helm-cert-manager-startupapicheck
    namespace: default
---
# Source: apk-helm/charts/cert-manager/templates/startupapicheck-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: my-apk-helm-cert-manager-startupapicheck
  namespace: default
  labels:
    app: startupapicheck
    app.kubernetes.io/name: startupapicheck
    app.kubernetes.io/instance: my-apk-helm
    app.kubernetes.io/component: "startupapicheck"
    app.kubernetes.io/version: "v1.10.1"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.10.1
  annotations:
    helm.sh/hook: post-install
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    helm.sh/hook-weight: "1"
spec:
  backoffLimit: 4
  template:
    metadata:
      labels:
        app: startupapicheck
        app.kubernetes.io/name: startupapicheck
        app.kubernetes.io/instance: my-apk-helm
        app.kubernetes.io/component: "startupapicheck"
        app.kubernetes.io/version: "v1.10.1"
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: cert-manager-v1.10.1
    spec:
      restartPolicy: OnFailure
      serviceAccountName: my-apk-helm-cert-manager-startupapicheck
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: cert-manager-startupapicheck
          image: "quay.io/jetstack/cert-manager-ctl:v1.10.1"
          imagePullPolicy: IfNotPresent
          args:
          - check
          - api
          - --wait=1m
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: apk-helm/templates/data-plane/config-deployer/wso2-apk-config-deployer-api.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "API"
apiVersion: "dp.wso2.com/v1alpha2"
metadata:
  name: "my-apk-helm-wso2-apk-wso2-apk-config-deployer-api"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  apiName: "WSO2 APK Config Deployer API"
  apiType: "REST"
  apiVersion: "1.1.0"
  basePath: "/api/deployer/1.1.0"
  isDefaultVersion: true
  organization: "apk-system"
  definitionFileRef: "my-apk-helm-wso2-apk-wso2-apk-config-deployer-api-definition"
  production:
  - routeRefs:
    - "my-apk-helm-wso2-apk-config-deploy-api-route"
  systemAPI: true
---
# Source: apk-helm/templates/data-plane/config-deployer/wso2-apk-config-generator-api.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "API"
apiVersion: "dp.wso2.com/v1alpha2"
metadata:
  name: "my-apk-helm-wso2-apk-wso2-apk-config-generator-api"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  apiName: "WSO2 APK Config Generator API"
  apiType: "REST"
  apiVersion: "1.1.0"
  basePath: "/api/configurator/1.1.0"
  isDefaultVersion: true
  organization: "apk-system"
  definitionFileRef: "my-apk-helm-wso2-apk-wso2-apk-config-generator-api-definition"
  production:
  - routeRefs:
    - "my-apk-helm-wso2-apk-config-api-route"
  systemAPI: true
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/api/notification-api.yaml
# Copyright (c) 2024, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "API"
apiVersion: "dp.wso2.com/v1alpha2"
metadata:
  name: "my-apk-helm-wso2-apk-wso2-apk-notification-api"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  apiName: "WSO2 APK Notification API"
  apiType: "REST"
  apiVersion: "1.0.0"
  basePath: "/api/notification/1.0.0"
  isDefaultVersion: true
  organization: "apk-system"
  definitionFileRef: "my-apk-helm-wso2-apk-notification-api-definition"
  production:
  - routeRefs:
    - "my-apk-helm-wso2-apk-notification-api-route"
  systemAPI: true
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/jwks-domain-api.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "API"
apiVersion: "dp.wso2.com/v1alpha2"
metadata:
  name: my-apk-helm-wso2-apk-jwks-endpoint-ds-api
  namespace: default
  labels:
    api-name: "jwks-endpoint"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  apiName: "jwks-domain-service"
  apiType: "REST"
  apiVersion: "1.0.0"
  basePath: "/.wellknown/jwks/1.0.0"
  organization: "apk-system"
  isDefaultVersion: true
  production:
    - routeRefs:
      - my-apk-helm-wso2-apk-jwks-endpoint-ds-httproute
  systemAPI: true
---
# Source: apk-helm/templates/idp/authenticationEndpoint-domain-api.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "API"
apiVersion: "dp.wso2.com/v1alpha2"
metadata:
  name: my-apk-helm-wso2-apk-authentication-endpoint-ds-api
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  apiName: "authenticationEndpoint-domain-service"
  apiType: "REST"
  apiVersion: "1.0.0"
  basePath: "/authenticationEndpoint/1.0.0"
  organization: "apk-system"
  production:
    - routeRefs:
      - my-apk-helm-wso2-apk-authentication-endpoint-ds-httproute
  systemAPI: true
---
# Source: apk-helm/templates/idp/commonoauth-domain-api.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "API"
apiVersion: "dp.wso2.com/v1alpha2"
metadata:
  name: my-apk-helm-wso2-apk-commonoauth-api
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  apiName: "commonoauth-api"
  apiType: "REST"
  apiVersion: "1.0.0"
  basePath: "/commonoauth/1.0.0"
  isDefaultVersion: true
  organization: "apk-system"
  production:
    - routeRefs:
      - my-apk-helm-wso2-apk-commonoauth-ds-httproute
  systemAPI: true
---
# Source: apk-helm/templates/idp/dcr-domain-api.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "API"
apiVersion: "dp.wso2.com/v1alpha2"
metadata:
  name: my-apk-helm-wso2-apk-dcr-api
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  apiName: "dcr-api"
  apiType: "REST"
  apiVersion: "1.0.0"
  basePath: "/dcr/1.0.0"
  isDefaultVersion: true
  organization: "apk-system"
  production:
    - routeRefs:
      - my-apk-helm-wso2-apk-dcr-ds-httproute
  systemAPI: true
---
# Source: apk-helm/templates/idp/oauth-domain-api.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "API"
apiVersion: "dp.wso2.com/v1alpha2"
metadata:
  name: my-apk-helm-wso2-apk-oauth-api
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  apiName: "oauth-api"
  apiType: "REST"
  apiVersion: "1.0.0"
  basePath: "/oauth2/1.0.0"
  isDefaultVersion: true
  organization: "apk-system"
  production:
    - routeRefs:
      - my-apk-helm-wso2-apk-oauth-ds-httproute
  systemAPI: true
---
# Source: apk-helm/templates/data-plane/config-deployer/config-api-apipolicy.yaml
apiVersion: dp.wso2.com/v1alpha2
kind: APIPolicy
metadata:
  name: "my-apk-helm-wso2-apk-config-api-api-policy"
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  override:
    backendJwtPolicy:
        name: "my-apk-helm-wso2-apk-config-api-backendjwt"
  targetRef:
    group: gateway.networking.k8s.io
    kind: API
    name:  my-apk-helm-wso2-apk-wso2-apk-config-deployer-api
---
# Source: apk-helm/templates/data-plane/config-deployer/configurator-api-no-authentication-policy.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "dp.wso2.com/v1alpha2"
kind: "Authentication"
metadata:
  name: "my-apk-helm-wso2-apk-configurator-api-no-authentication-policy"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  override:
    disabled: true
  targetRef:
    group: ""
    kind: "API"
    name: "my-apk-helm-wso2-apk-wso2-apk-config-generator-api"
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/api/notification-api.yaml
apiVersion: "dp.wso2.com/v1alpha2"
kind: "Authentication"
metadata:
  name: "my-apk-helm-wso2-apk-notification-api-no-authentication-policy"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  override:
    disabled: true
  targetRef:
    group: ""
    kind: "API"
    name: "my-apk-helm-wso2-apk-wso2-apk-notification-api"
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/jwks-domain-api--authentication.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "dp.wso2.com/v1alpha2"
kind: "Authentication"
metadata:
  name: my-apk-helm-wso2-apk-jwks-endpoint-ds-authentication
  namespace: default
  labels:
    api-name: "jwks-endpoint"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  override:
    disabled: true
  targetRef:
    group: ""
    kind: "API"
    name: my-apk-helm-wso2-apk-jwks-endpoint-ds-api
    namespace: default
---
# Source: apk-helm/templates/idp/authenticationEndpoint-domain-api--authentication.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "dp.wso2.com/v1alpha2"
kind: "Authentication"
metadata:
  name: my-apk-helm-wso2-apk-authentication-endpoint-ds-authentication
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  override:
    disabled: true
  targetRef:
    group: ""
    kind: "API"
    name: my-apk-helm-wso2-apk-authentication-endpoint-ds-api
    namespace: default
---
# Source: apk-helm/templates/idp/commonoauth-domain-api-no-authentication.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "dp.wso2.com/v1alpha2"
kind: "Authentication"
metadata:
  name: my-apk-helm-wso2-apk-commonoauth-ds-authentication
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  override:
    disabled: true
  targetRef:
    group: ""
    kind: "API"
    name: my-apk-helm-wso2-apk-commonoauth-api
    namespace: default
---
# Source: apk-helm/templates/idp/dcr-domain-api-no-authentication.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "dp.wso2.com/v1alpha2"
kind: "Authentication"
metadata:
  name: my-apk-helm-wso2-apk-dcr-ds-authentication
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  override:
    disabled: true
  targetRef:
    group: ""
    kind: "API"
    name: my-apk-helm-wso2-apk-dcr-api
    namespace: default
---
# Source: apk-helm/templates/idp/oauth-domain-api-no-authentication.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "dp.wso2.com/v1alpha2"
kind: "Authentication"
metadata:
  name: my-apk-helm-wso2-apk-oauth-ds-authentication
  namespace: default
  labels:
    api-name: "idp-domain-service"
    api-version: "1.0.0"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  override:
    disabled: true
  targetRef:
    group: ""
    kind: "API"
    name: my-apk-helm-wso2-apk-oauth-api
    namespace: default
---
# Source: apk-helm/templates/data-plane/config-deployer/config-deployer-domain-api-backend.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-config-deployer-ds-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
 basePath: "/api/deployer"
 services:
  - host:  my-apk-helm-wso2-apk-config-ds-service.default
    port: 9443
 protocol: "https"
 tls:
  allowedSANs:
   - my-apk-helm-wso2-apk-config-ds-service.default.svc
  secretRef:
    name: my-apk-helm-wso2-apk-config-ds-server-cert
    key: tls.crt
---
# Source: apk-helm/templates/data-plane/config-deployer/config-generator-domain-api-backend.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-config-generator-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
 basePath: "/api/configurator"
 services:
  - host:  my-apk-helm-wso2-apk-config-ds-service.default
    port: 9443
 protocol: "https"
 tls:
  allowedSANs:
   - my-apk-helm-wso2-apk-config-ds-service.default.svc
  secretRef:
    name: my-apk-helm-wso2-apk-config-ds-server-cert
    key: tls.crt
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/api/notification-api.yaml
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-notification-api-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  basePath: ""
  services:
    - host:  my-apk-helm-wso2-apk-common-controller-service.default.svc
      port: 9543
  protocol: "https"
  tls:
    allowedSANs:
      - my-apk-helm-wso2-apk-common-controller-service.default.svc
    secretRef:
      name: my-apk-helm-wso2-apk-common-controller-server-cert
      key: tls.crt
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/jwks-domain-api-backend.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-jwks-endpoint-ds-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
 basePath: /jwks
 services:
  - host:  my-apk-helm-wso2-apk-enforcer-service.default.svc
    port: 9092
 protocol: "https"
 tls:
  allowedSANs:
   - my-apk-helm-wso2-apk-enforcer-service.default.svc
  secretRef:
    name: my-apk-helm-wso2-apk-enforcer-server-cert
    key: tls.crt
---
# Source: apk-helm/templates/idp/authenticationEndpoint-domain-api-backend.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-authentication-endpoint-ds-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
 basePath: /commonoauth
 services:
  - host:  my-apk-helm-wso2-apk-idp-ds-service.default.svc
    port: 9443
 protocol: "https"
 tls:
  allowedSANs:
   - my-apk-helm-wso2-apk-idp-ds-service.default.svc
  secretRef:
    name: my-apk-helm-wso2-apk-idp-ds-server-cert
    key: tls.crt
---
# Source: apk-helm/templates/idp/commonoauth-domain-api-backend.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-commonoauth-ds-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
 basePath: /commonoauth
 services:
  - host:  my-apk-helm-wso2-apk-idp-ds-service.default.svc
    port: 9443
 protocol: "https"
 tls:
  allowedSANs:
   - my-apk-helm-wso2-apk-idp-ds-service.default.svc
  secretRef:
    name: my-apk-helm-wso2-apk-idp-ds-server-cert
    key: tls.crt
---
# Source: apk-helm/templates/idp/dcr-domain-api-backend.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-dcr-ds-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
 basePath: /dcr
 services:
  - host:  my-apk-helm-wso2-apk-idp-ds-service.default.svc
    port: 9443
 protocol: "https"
 tls:
  allowedSANs:
   - my-apk-helm-wso2-apk-idp-ds-service.default.svc
  secretRef:
    name: my-apk-helm-wso2-apk-idp-ds-server-cert
    key: tls.crt
---
# Source: apk-helm/templates/idp/idp-ui/idp-ui-backend.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-idp-ui-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
 services:
  - host:  my-apk-helm-wso2-apk-idp-ui-service.default
    port: 9443
 protocol: "https"
 tls:
  allowedSANs:
   - my-apk-helm-wso2-apk-idp-ui-service.default.svc
  secretRef:
    name: my-apk-helm-wso2-apk-idp-ui-server-cert
    key: tls.crt
---
# Source: apk-helm/templates/idp/oauth-domain-api-backend.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
kind: "Backend"
apiVersion: "dp.wso2.com/v1alpha1"
metadata:
  name: my-apk-helm-wso2-apk-oauth-ds-backend
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
 basePath: /oauth2
 services:
  - host:  my-apk-helm-wso2-apk-idp-ds-service.default.svc
    port: 9443
 protocol: "https"
 tls:
  allowedSANs:
   - my-apk-helm-wso2-apk-idp-ds-service.default.svc
  secretRef:
    name: my-apk-helm-wso2-apk-idp-ds-server-cert
    key: tls.crt
---
# Source: apk-helm/templates/data-plane/config-deployer/config-deployer-api-backendjwt.yaml
apiVersion: dp.wso2.com/v1alpha1
kind: BackendJWT
metadata:
  name: "my-apk-helm-wso2-apk-config-api-backendjwt"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
    header: "X-JWT-Assertion"
    encoding: "Base64"
    signingAlgorithm: "SHA256withRSA"
    tokenTTL: 3600
---
# Source: apk-helm/templates/data-plane/config-deployer/config-api-route.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: "gateway.networking.k8s.io/v1beta1"
kind: "HTTPRoute"
metadata:
  name: "my-apk-helm-wso2-apk-config-api-route"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  hostnames:
  - "api.am.wso2.com"
  rules:
  - matches:
    - path:
        type: "RegularExpression"
        value: "/apis/generate-configuration"
      method: "POST"
    backendRefs:
    - group: "dp.wso2.com"
      kind: "Backend"
      name: "my-apk-helm-wso2-apk-config-generator-backend"
  - matches:
    - path:
        type: "RegularExpression"
        value: "/apis/generate-k8s-resources"
      method: "POST"
    backendRefs:
    - group: "dp.wso2.com"
      kind: "Backend"
      name: "my-apk-helm-wso2-apk-config-generator-backend"
  parentRefs:
  - group: "gateway.networking.k8s.io"
    kind: "Gateway"
    name: wso2-apk-default
    sectionName: "httpslistener"
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/api/notification-api.yaml
apiVersion: "gateway.networking.k8s.io/v1beta1"
kind: "HTTPRoute"
metadata:
  name: "my-apk-helm-wso2-apk-notification-api-route"
  namespace: default
  labels:
    managed-by: "apk"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  hostnames:
    - "api.am.wso2.com"
  rules:
    - matches:
        - path:
            type: "RegularExpression"
            value: "/notify"
          method: "POST"
      backendRefs:
        - group: "dp.wso2.com"
          kind: "Backend"
          name: "my-apk-helm-wso2-apk-notification-api-backend"
  parentRefs:
    - group: "gateway.networking.k8s.io"
      kind: "Gateway"
      name: wso2-apk-default
      sectionName: "httpslistener"
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/webhook/adapter-mutating-webhook-config.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.


apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: my-apk-helm-wso2-apk-mutating-webhook-configuration
  namespace : default
  annotations:
    cert-manager.io/inject-ca-from: default/my-apk-helm-wso2-apk-webhook-server-cert
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /mutate-dp-wso2-com-v1alpha2-api
  failurePolicy: Fail
  name: mapi.kb.io
  rules:
  - apiGroups:
    - dp.wso2.com
    apiVersions:
    - v1alpha2
    operations:
    - CREATE
    - UPDATE
    resources:
    - apis
  sideEffects: None
- admissionReviewVersions:
    - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /mutate-dp-wso2-com-v1alpha2-apipolicy
  failurePolicy: Fail
  name: mapipolicy.kb.io
  rules:
    - apiGroups:
        - dp.wso2.com
      apiVersions:
        - v1alpha2
      operations:
        - CREATE
        - UPDATE
      resources:
        - apipolicies
  sideEffects: None
- admissionReviewVersions:
    - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /mutate-dp-wso2-com-v1alpha2-authentication
  failurePolicy: Fail
  name: mauthentication.kb.io
  rules:
  - apiGroups:
    - dp.wso2.com
    apiVersions:
    - v1alpha2
    operations:
    - CREATE
    - UPDATE
    resources:
    - authentications
  sideEffects: None
- admissionReviewVersions:
    - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /mutate-dp-wso2-com-v1alpha1-interceptorservice
  failurePolicy: Fail
  name: minterceptorservice.kb.io
  rules:
  - apiGroups:
    - dp.wso2.com
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - interceptorservices
  sideEffects: None

- admissionReviewVersions:
    - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /mutate-dp-wso2-com-v1alpha1-ratelimitpolicy
  failurePolicy: Fail
  name: mratelimitpolicy.kb.io
  rules:
    - apiGroups:
        - dp.wso2.com
      apiVersions:
        - v1alpha1
      operations:
        - CREATE
        - UPDATE
      resources:
        - ratelimitpolicies
  sideEffects: None
---
# Source: apk-helm/templates/data-plane/config-deployer/config-deploy-api-create-scope.yaml
# Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
apiVersion: dp.wso2.com/v1alpha1
kind: Scope
metadata:
  labels:
    managed-by: "apk"
  name: my-apk-helm-wso2-apk-api-create-scope
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  names:
  - apk:api_create
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/default-jwt-issuer.yaml
kind: TokenIssuer
apiVersion: dp.wso2.com/v1alpha2
metadata:
  name: my-apk-helm-wso2-apk-default-jwt-issuer
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  name: "default-jwt-issuer"
  consumerKeyClaim: clientId
  scopesClaim: scope
  issuer: "https://idp.am.wso2.com/token"
  organization: "default"
  signatureValidation:
  
    certificate:
      secretRef:
        name: "my-apk-helm-wso2-apk-enforcer-truststore-secret"
        key: "wso2carbon.pem"
    
    
  claimMappings:
    - remoteClaim: "organization"
      localClaim:  "x-wso2-organization"
    
    
    - remoteClaim: "groups"
      localClaim: "x-wso2-groups"
    
  targetRef:
    kind: Gateway
    name: wso2-apk-default
    group: gateway.networking.k8s.io
---
# Source: apk-helm/templates/data-plane/gateway-components/gateway-runtime/idp-jwt-issuer.yaml
kind: TokenIssuer
apiVersion: dp.wso2.com/v1alpha2
metadata:
  name: my-apk-helm-wso2-apk-idp-jwt-issuer
  namespace: default
  annotations:
    "helm.sh/hook": post-install,post-upgrade
spec:
  name: "Domain-service-idp"
  consumerKeyClaim: clientId
  scopesClaim: scope
  issuer: "https://idp.am.wso2.com/token"
  organization: "apk-system"
  signatureValidation:
  
    certificate:
      secretRef:
        name: "my-apk-helm-wso2-apk-enforcer-truststore-secret"
        key: "wso2carbon.pem"
    
    
  claimMappings:
    - remoteClaim: "organization"
      localClaim:  "x-wso2-organization"
    
    
    - remoteClaim: "groups"
      localClaim:  "x-wso2-groups"
    
  targetRef:
    kind: Gateway
    name: wso2-apk-default
    group: gateway.networking.k8s.io
---
# Source: apk-helm/templates/data-plane/gateway-components/common-controller/webhook/adapter-validation-webhook-config.yaml
# Copyright (c) 2022, WSO2 LLC. (https://www.wso2.com) All Rights Reserved.
#
# WSO2 LLC. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.


apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: my-apk-helm-wso2-apk-validating-webhook-configuration
  namespace : default
  annotations:
    cert-manager.io/inject-ca-from: default/my-apk-helm-wso2-apk-webhook-server-cert
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /validate-dp-wso2-com-v1alpha1-backend
  failurePolicy: Fail
  name: vbackend.kb.io
  rules:
  - apiGroups:
    - dp.wso2.com
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - backends
  sideEffects: None
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /validate-dp-wso2-com-v1alpha2-api
  failurePolicy: Fail
  name: vapi.kb.io
  rules:
  - apiGroups:
    - dp.wso2.com
    apiVersions:
    - v1alpha2
    operations:
    - CREATE
    - UPDATE
    resources:
    - apis
  sideEffects: None
- admissionReviewVersions:
    - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /validate-dp-wso2-com-v1alpha2-apipolicy
  failurePolicy: Fail
  name: vapipolicy.kb.io
  rules:
    - apiGroups:
        - dp.wso2.com
      apiVersions:
        - v1alpha2
      operations:
        - CREATE
        - UPDATE
      resources:
        - apipolicies
  sideEffects: None
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /validate-dp-wso2-com-v1alpha2-authentication
  failurePolicy: Fail
  name: vauthentication.kb.io
  rules:
  - apiGroups:
    - dp.wso2.com
    apiVersions:
    - v1alpha2
    operations:
    - CREATE
    - UPDATE
    resources:
    - authentications
  sideEffects: None

- admissionReviewVersions:
    - v1
  clientConfig:
    service:
      name: my-apk-helm-wso2-apk-common-controller-service
      namespace: default
      path: /validate-dp-wso2-com-v1alpha1-ratelimitpolicy
  failurePolicy: Fail
  name: vratelimitpolicy.kb.io
  rules:
    - apiGroups:
        - dp.wso2.com
      apiVersions:
        - v1alpha1
      operations:
        - CREATE
        - UPDATE
      resources:
        - ratelimitpolicies
  sideEffects: None
